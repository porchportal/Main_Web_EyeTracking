"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_pages-dir-node_pages_collected-dataset_components-gui_cameraAccess_js";
exports.ids = ["_pages-dir-node_pages_collected-dataset_components-gui_cameraAccess_js"];
exports.modules = {

/***/ "(pages-dir-node)/./pages/collected-dataset/components-gui/cameraAccess.js":
/*!****************************************************************!*\
  !*** ./pages/collected-dataset/components-gui/cameraAccess.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_collected_dataset_Helper_savefile__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../components/collected-dataset/Helper/savefile */ \"(pages-dir-node)/./components/collected-dataset/Helper/savefile.js\");\n// cameraAccess.js\n\n\n\nconst CameraAccess = ({ isShowing, onClose, onCameraReady, showHeadPose = false, showBoundingBox = false, showMask = false, showParameters = false })=>{\n    const videoRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const containerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const wsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [stream, setStream] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [errorMessage, setErrorMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');\n    const [fps, setFps] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const fpsTimerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const processingInterval = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [dimensions, setDimensions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({\n        width: 0,\n        height: 0\n    });\n    const [isVideoReady, setIsVideoReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [processingResults, setProcessingResults] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const frameQueue = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    const isProcessing = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const [wsStatus, setWsStatus] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('disconnected');\n    const [isLinked, setIsLinked] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // WebSocket connection\n    const connectWebSocket = ()=>{\n        if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n            console.log('WebSocket already connected');\n            return;\n        }\n        setWsStatus('connecting');\n        try {\n            // Connect to FastAPI WebSocket endpoint\n            const ws = new WebSocket('ws://localhost:8000/ws/video');\n            wsRef.current = ws;\n            // Set a connection timeout\n            const connectionTimeout = setTimeout(()=>{\n                if (ws.readyState !== WebSocket.OPEN) {\n                    console.error('WebSocket connection timeout');\n                    ws.close();\n                    setWsStatus('error');\n                    setErrorMessage('Connection timeout. Please check if the backend server is running.');\n                    setIsLinked(false);\n                }\n            }, 5000);\n            ws.onopen = ()=>{\n                console.log('WebSocket connected to FastAPI backend');\n                clearTimeout(connectionTimeout);\n                setWsStatus('connected');\n                setErrorMessage('');\n                setIsLinked(true);\n                if (isVideoReady) {\n                    processingInterval.current = setInterval(captureAndProcessFrame, 33);\n                }\n            };\n            ws.onmessage = (event)=>{\n                try {\n                    const result = JSON.parse(event.data);\n                    setProcessingResults(result);\n                    drawResults(result);\n                } catch (error) {\n                    console.error('Error parsing WebSocket message:', error);\n                }\n            };\n            ws.onerror = (error)=>{\n                console.error('WebSocket error:', error);\n                clearTimeout(connectionTimeout);\n                setWsStatus('error');\n                setErrorMessage('Failed to connect to FastAPI backend. Please check if the server is running.');\n                setIsLinked(false);\n            };\n            ws.onclose = (event)=>{\n                console.log('WebSocket disconnected:', event.code, event.reason);\n                clearTimeout(connectionTimeout);\n                setWsStatus('disconnected');\n                setIsLinked(false);\n                // Stop frame processing\n                if (processingInterval.current) {\n                    clearInterval(processingInterval.current);\n                    processingInterval.current = null;\n                }\n                // If the connection was closed due to an error, show error message\n                if (event.code !== 1000) {\n                    setErrorMessage(`WebSocket connection closed: ${event.reason || 'Unknown reason'}`);\n                }\n            };\n        } catch (error) {\n            console.error('Error creating WebSocket:', error);\n            setWsStatus('error');\n            setErrorMessage('Failed to create WebSocket connection. Please check your network connection.');\n            setIsLinked(false);\n        }\n    };\n    const disconnectWebSocket = ()=>{\n        if (wsRef.current) {\n            wsRef.current.close(1000, 'User requested disconnect');\n            wsRef.current = null;\n            setWsStatus('disconnected');\n            setIsLinked(false);\n            // Stop frame processing\n            if (processingInterval.current) {\n                clearInterval(processingInterval.current);\n                processingInterval.current = null;\n            }\n            // Clear the canvas to remove any overlays\n            if (canvasRef.current) {\n                const ctx = canvasRef.current.getContext('2d');\n                ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\n            }\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CameraAccess.useEffect\": ()=>{\n            if (!isShowing) {\n                disconnectWebSocket();\n                return;\n            }\n            return ({\n                \"CameraAccess.useEffect\": ()=>{\n                    disconnectWebSocket();\n                }\n            })[\"CameraAccess.useEffect\"];\n        }\n    }[\"CameraAccess.useEffect\"], [\n        isShowing\n    ]);\n    // Frame capture and processing\n    const captureAndProcessFrame = ()=>{\n        if (!videoRef.current || !canvasRef.current || !isVideoReady || !wsRef.current) return;\n        const video = videoRef.current;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n        // Only draw on canvas if WebSocket is connected\n        if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n            // Clear canvas\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            // Save the current context state\n            ctx.save();\n            // Flip the context horizontally to mirror the video\n            ctx.translate(canvas.width, 0);\n            ctx.scale(-1, 1);\n            // Draw video frame to canvas at high resolution\n            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n            // Restore the context state\n            ctx.restore();\n            // Convert canvas to blob with high quality\n            canvas.toBlob((blob)=>{\n                if (blob && wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\n                    // Send frame to backend\n                    wsRef.current.send(blob);\n                }\n            }, 'image/jpeg', 0.95);\n        }\n    };\n    // Draw processing results\n    const drawResults = (results)=>{\n        if (!canvasRef.current || !results) return;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n        // Draw bounding box if available\n        if (results.bounding_box && showBoundingBox) {\n            const { x, y, width, height } = results.bounding_box;\n            ctx.strokeStyle = 'rgba(255, 0, 0, 0.8)';\n            ctx.lineWidth = 2;\n            ctx.strokeRect(x, y, width, height);\n        }\n        // Draw head pose if available\n        if (results.head_pose && showHeadPose) {\n            const { pitch, yaw, roll } = results.head_pose;\n            // Draw head pose visualization\n            drawHeadPose(ctx, canvas, pitch, yaw, roll);\n        }\n        // Draw face mask if available\n        if (results.face_mask && showMask) {\n            const { points } = results.face_mask;\n            drawFaceMask(ctx, canvas, points);\n        }\n        // Draw parameters if enabled\n        if (showParameters) {\n            drawParameters(ctx, canvas, results);\n        }\n    };\n    // Start camera with highest resolution\n    const startCamera = async ()=>{\n        setErrorMessage('');\n        setIsVideoReady(false);\n        try {\n            // Check if MediaDevices API is supported\n            if (typeof navigator === 'undefined' || !navigator.mediaDevices) {\n                // Try to polyfill the MediaDevices API\n                if (typeof navigator !== 'undefined') {\n                    navigator.mediaDevices = {};\n                }\n                // Add getUserMedia polyfill if needed\n                if (!navigator.mediaDevices.getUserMedia) {\n                    navigator.mediaDevices.getUserMedia = function(constraints) {\n                        // First get ahold of the legacy getUserMedia, if present\n                        const getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n                        // Some browsers just don't implement it - return a rejected promise with an error\n                        if (!getUserMedia) {\n                            return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n                        }\n                        // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n                        return new Promise(function(resolve, reject) {\n                            getUserMedia.call(navigator, constraints, resolve, reject);\n                        });\n                    };\n                }\n            }\n            // Check if we're on HTTPS or localhost\n            const isSecure = window.location.protocol === 'https:' || window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1' || \"development\" === 'development';\n            if (!isSecure) {\n                throw new Error('Camera access requires HTTPS or localhost. Please use HTTPS or run the application on localhost.');\n            }\n            console.log('Starting camera access with highest resolution...');\n            // Get highest resolution constraints\n            const constraints = await (0,_components_collected_dataset_Helper_savefile__WEBPACK_IMPORTED_MODULE_2__.getHighestResolutionConstraints)();\n            console.log('Using camera constraints:', constraints);\n            const mediaStream = await navigator.mediaDevices.getUserMedia({\n                ...constraints,\n                audio: false\n            });\n            console.log('High resolution camera access granted!');\n            setStream(mediaStream);\n            if (videoRef.current) {\n                videoRef.current.playsInline = true;\n                videoRef.current.muted = true;\n                videoRef.current.autoplay = true;\n                videoRef.current.srcObject = mediaStream;\n                try {\n                    await videoRef.current.play();\n                    console.log('Video playing successfully!');\n                    setIsVideoReady(true);\n                    // Start frame processing if WebSocket is connected\n                    if (wsStatus === 'connected') {\n                        processingInterval.current = setInterval(captureAndProcessFrame, 33); // ~30fps\n                    }\n                } catch (playError) {\n                    console.error('Error playing video:', playError);\n                    setErrorMessage('Unable to start video stream. Please try again.');\n                }\n            }\n        } catch (error) {\n            console.error('Camera access error:', error);\n            let errorMessage = 'Camera error: ';\n            if (error.name === 'NotAllowedError') {\n                errorMessage += 'Camera access was denied. Please allow camera access in your browser settings.';\n            } else if (error.name === 'NotFoundError') {\n                errorMessage += 'No camera found. Please connect a camera and try again.';\n            } else if (error.name === 'NotReadableError') {\n                errorMessage += 'Camera is already in use by another application.';\n            } else if (error.name === 'OverconstrainedError') {\n                errorMessage += 'Camera does not support the requested resolution.';\n            } else if (error.message === 'getUserMedia is not implemented in this browser') {\n                errorMessage += 'Your browser does not support camera access. Please try using a modern browser like Chrome, Firefox, or Edge.';\n            } else {\n                errorMessage += error.message || 'Unknown error';\n            }\n            setErrorMessage(errorMessage);\n        }\n    };\n    const stopCamera = ()=>{\n        // Stop all tracks in the stream\n        if (stream) {\n            stream.getTracks().forEach((track)=>track.stop());\n            setStream(null);\n        }\n        // Clear video source\n        if (videoRef.current) {\n            videoRef.current.srcObject = null;\n        }\n        // Clear processing interval\n        if (processingInterval.current) {\n            clearInterval(processingInterval.current);\n            processingInterval.current = null;\n        }\n        setIsVideoReady(false);\n    };\n    // Start camera on component mount if isShowing is true\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CameraAccess.useEffect\": ()=>{\n            if (isShowing) {\n                startCamera();\n            } else {\n                stopCamera();\n            }\n            return ({\n                \"CameraAccess.useEffect\": ()=>{\n                    stopCamera();\n                }\n            })[\"CameraAccess.useEffect\"];\n        }\n    }[\"CameraAccess.useEffect\"], [\n        isShowing\n    ]);\n    // Setup FPS counter\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CameraAccess.useEffect\": ()=>{\n            if (!isShowing) return;\n            fpsTimerRef.current = setInterval({\n                \"CameraAccess.useEffect\": ()=>{\n                    setFps({\n                        \"CameraAccess.useEffect\": (prevFps)=>{\n                            // Simple mock for fps counter\n                            const newFps = Math.floor(Math.random() * 10) + 25; // Random between 25-35 fps\n                            return newFps;\n                        }\n                    }[\"CameraAccess.useEffect\"]);\n                }\n            }[\"CameraAccess.useEffect\"], 1000);\n            return ({\n                \"CameraAccess.useEffect\": ()=>{\n                    if (fpsTimerRef.current) {\n                        clearInterval(fpsTimerRef.current);\n                    }\n                    if (processingInterval.current) {\n                        clearInterval(processingInterval.current);\n                    }\n                }\n            })[\"CameraAccess.useEffect\"];\n        }\n    }[\"CameraAccess.useEffect\"], [\n        isShowing\n    ]);\n    // Update dimensions when container size changes\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CameraAccess.useEffect\": ()=>{\n            if (!isShowing) return;\n            const updateDimensions = {\n                \"CameraAccess.useEffect.updateDimensions\": ()=>{\n                    if (containerRef.current) {\n                        const { width, height } = containerRef.current.getBoundingClientRect();\n                        setDimensions({\n                            width,\n                            height\n                        });\n                    }\n                }\n            }[\"CameraAccess.useEffect.updateDimensions\"];\n            updateDimensions();\n            window.addEventListener('resize', updateDimensions);\n            return ({\n                \"CameraAccess.useEffect\": ()=>window.removeEventListener('resize', updateDimensions)\n            })[\"CameraAccess.useEffect\"];\n        }\n    }[\"CameraAccess.useEffect\"], [\n        isShowing\n    ]);\n    // Handle video element ready state\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"CameraAccess.useEffect\": ()=>{\n            if (!isShowing || !videoRef.current || !stream) return;\n            const video = videoRef.current;\n            const handleLoadedMetadata = {\n                \"CameraAccess.useEffect.handleLoadedMetadata\": ()=>{\n                    console.log('Video metadata loaded');\n                    setIsVideoReady(true);\n                    // Get video dimensions\n                    const videoWidth = video.videoWidth || 640;\n                    const videoHeight = video.videoHeight || 480;\n                    console.log(`Video dimensions: ${videoWidth}x${videoHeight}`);\n                    // Setup canvas for processing\n                    if (canvasRef.current) {\n                        // Store actual dimensions for capture\n                        canvasRef.current.width = videoWidth;\n                        canvasRef.current.height = videoHeight;\n                        // Set display size to maintain aspect ratio\n                        const aspectRatio = videoWidth / videoHeight;\n                        const containerWidth = dimensions.width;\n                        const containerHeight = containerWidth / aspectRatio;\n                        canvasRef.current.style.width = `${containerWidth}px`;\n                        canvasRef.current.style.height = `${containerHeight}px`;\n                    }\n                    // Start processing frames\n                    startProcessing();\n                    // Notify parent component that camera is ready\n                    if (onCameraReady) {\n                        onCameraReady({\n                            width: videoWidth,\n                            height: videoHeight\n                        });\n                    }\n                }\n            }[\"CameraAccess.useEffect.handleLoadedMetadata\"];\n            video.addEventListener('loadedmetadata', handleLoadedMetadata);\n            return ({\n                \"CameraAccess.useEffect\": ()=>{\n                    video.removeEventListener('loadedmetadata', handleLoadedMetadata);\n                }\n            })[\"CameraAccess.useEffect\"];\n        }\n    }[\"CameraAccess.useEffect\"], [\n        stream,\n        isShowing,\n        dimensions,\n        onCameraReady\n    ]);\n    const startProcessing = ()=>{\n        if (!canvasRef.current || !videoRef.current || !isVideoReady) return;\n        const video = videoRef.current;\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext('2d');\n        // Start processing frames at ~30fps\n        processingInterval.current = setInterval(()=>{\n            if (video.readyState !== 4) return;\n            // Clear canvas\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            // Save the current context state\n            ctx.save();\n            // Flip the context horizontally to mirror the video\n            ctx.translate(canvas.width, 0);\n            ctx.scale(-1, 1);\n            // Draw video frame to canvas at high resolution\n            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n            // Restore the context state\n            ctx.restore();\n            // Simulate face detection (90% chance of face detected)\n            const faceDetected = Math.random() > 0.1;\n            // Draw visualizations based on enabled options\n            if (faceDetected) {\n                if (showBoundingBox) {\n                    drawBoundingBox(ctx, canvas);\n                }\n                if (showHeadPose) {\n                    drawHeadPose(ctx, canvas);\n                }\n                if (showMask) {\n                    drawFaceMask(ctx, canvas);\n                }\n            }\n            // Display parameters if enabled\n            if (showParameters) {\n                drawParameters(ctx, canvas, faceDetected);\n            }\n        }, 33); // ~30fps\n    };\n    // Helper function to draw bounding box\n    const drawBoundingBox = (ctx, canvas)=>{\n        const centerX = canvas.width / 2;\n        const centerY = canvas.height / 2;\n        const boxWidth = canvas.width * 0.6;\n        const boxHeight = canvas.height * 0.8;\n        ctx.strokeStyle = 'rgba(255, 255, 0, 0.7)';\n        ctx.lineWidth = 2;\n        ctx.strokeRect(centerX - boxWidth / 2, centerY - boxHeight / 2, boxWidth, boxHeight);\n    };\n    // Helper function to draw head pose axes\n    const drawHeadPose = (ctx, canvas, pitch, yaw, roll)=>{\n        const centerX = canvas.width / 2;\n        const centerY = canvas.height / 2;\n        const time = Date.now() / 1000;\n        const length = canvas.width * 0.1;\n        // X axis (red)\n        ctx.beginPath();\n        ctx.moveTo(centerX, centerY);\n        ctx.lineTo(centerX + length * Math.sin(time), centerY);\n        ctx.strokeStyle = 'red';\n        ctx.lineWidth = 3;\n        ctx.stroke();\n        // Y axis (green)\n        ctx.beginPath();\n        ctx.moveTo(centerX, centerY);\n        ctx.lineTo(centerX, centerY + length * Math.sin(time + 1));\n        ctx.strokeStyle = 'green';\n        ctx.lineWidth = 3;\n        ctx.stroke();\n        // Z axis (blue)\n        ctx.beginPath();\n        ctx.moveTo(centerX, centerY);\n        ctx.lineTo(centerX + length / 2 * Math.sin(time + 2), centerY - length / 2 * Math.cos(time + 2));\n        ctx.strokeStyle = 'blue';\n        ctx.lineWidth = 3;\n        ctx.stroke();\n    };\n    // Helper function to draw face mask\n    const drawFaceMask = (ctx, canvas, points)=>{\n        const centerX = canvas.width / 2;\n        const centerY = canvas.height / 2;\n        const radius = Math.min(canvas.width, canvas.height) * 0.2;\n        // Draw mask\n        ctx.fillStyle = 'rgba(0, 255, 255, 0.2)';\n        ctx.beginPath();\n        ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);\n        ctx.fill();\n        // Draw eyes\n        const eyeRadius = radius * 0.2;\n        const eyeOffsetX = radius * 0.3;\n        const eyeOffsetY = radius * 0.1;\n        ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\n        // Left eye\n        ctx.beginPath();\n        ctx.arc(centerX - eyeOffsetX, centerY - eyeOffsetY, eyeRadius, 0, Math.PI * 2);\n        ctx.fill();\n        // Right eye\n        ctx.beginPath();\n        ctx.arc(centerX + eyeOffsetX, centerY - eyeOffsetY, eyeRadius, 0, Math.PI * 2);\n        ctx.fill();\n    };\n    // Helper function to draw parameters\n    const drawParameters = (ctx, canvas, faceDetected)=>{\n        ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n        ctx.fillRect(5, canvas.height - 60, 150, 50);\n        ctx.font = '12px Arial';\n        ctx.fillStyle = 'white';\n        ctx.fillText(`Resolution: ${canvas.width}x${canvas.height}`, 10, canvas.height - 40);\n        ctx.fillText(`FPS: ${fps}`, 10, canvas.height - 25);\n        ctx.fillText(`Face: ${faceDetected ? 'Detected' : 'Not Detected'}`, 10, canvas.height - 10);\n    };\n    if (!isShowing) {\n        return null;\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        ref: containerRef,\n        style: {\n            position: 'fixed',\n            top: '50%',\n            left: '50%',\n            transform: 'translate(-50%, -50%)',\n            width: '30vw',\n            height: '30vh',\n            backgroundColor: 'white',\n            borderRadius: '8px',\n            boxShadow: '0 4px 8px rgba(0, 0, 0, 0.2)',\n            overflow: 'hidden',\n            zIndex: 1000\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"video\", {\n                ref: videoRef,\n                style: {\n                    width: '100%',\n                    height: '100%',\n                    objectFit: 'cover',\n                    transform: 'scaleX(-1)',\n                    opacity: 1\n                },\n                playsInline: true,\n                muted: true,\n                autoPlay: true\n            }, void 0, false, {\n                fileName: \"/app/pages/collected-dataset/components-gui/cameraAccess.js\",\n                lineNumber: 595,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"canvas\", {\n                ref: canvasRef,\n                style: {\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    width: '100%',\n                    height: '100%',\n                    zIndex: 1,\n                    pointerEvents: 'none',\n                    display: isLinked ? 'block' : 'none' // Hide canvas when not linked\n                }\n            }, void 0, false, {\n                fileName: \"/app/pages/collected-dataset/components-gui/cameraAccess.js\",\n                lineNumber: 608,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: 'absolute',\n                    top: '10px',\n                    right: '10px',\n                    display: 'flex',\n                    gap: '10px',\n                    zIndex: 2\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: onClose,\n                        style: {\n                            padding: '8px 12px',\n                            backgroundColor: 'rgba(0, 0, 0, 0.5)',\n                            color: 'white',\n                            border: 'none',\n                            borderRadius: '4px',\n                            cursor: 'pointer',\n                            transition: 'background-color 0.3s ease'\n                        },\n                        children: \"Close\"\n                    }, void 0, false, {\n                        fileName: \"/app/pages/collected-dataset/components-gui/cameraAccess.js\",\n                        lineNumber: 629,\n                        columnNumber: 9\n                    }, undefined),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: ()=>{\n                            if (isLinked) {\n                                disconnectWebSocket();\n                            } else {\n                                connectWebSocket();\n                            }\n                        },\n                        style: {\n                            padding: '8px 12px',\n                            backgroundColor: isLinked ? 'rgba(255, 0, 0, 0.7)' : 'rgba(0, 255, 0, 0.7)',\n                            color: 'white',\n                            border: 'none',\n                            borderRadius: '4px',\n                            cursor: 'pointer',\n                            transition: 'background-color 0.3s ease'\n                        },\n                        children: isLinked ? 'Unlink' : 'Link'\n                    }, void 0, false, {\n                        fileName: \"/app/pages/collected-dataset/components-gui/cameraAccess.js\",\n                        lineNumber: 644,\n                        columnNumber: 9\n                    }, undefined)\n                ]\n            }, void 0, true, {\n                fileName: \"/app/pages/collected-dataset/components-gui/cameraAccess.js\",\n                lineNumber: 621,\n                columnNumber: 7\n            }, undefined),\n            wsStatus === 'error' && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: 'absolute',\n                    top: '50px',\n                    right: '10px',\n                    padding: '8px 12px',\n                    backgroundColor: 'rgba(255, 0, 0, 0.7)',\n                    color: 'white',\n                    borderRadius: '4px',\n                    zIndex: 2\n                },\n                children: [\n                    \"Connection Error: \",\n                    errorMessage\n                ]\n            }, void 0, true, {\n                fileName: \"/app/pages/collected-dataset/components-gui/cameraAccess.js\",\n                lineNumber: 667,\n                columnNumber: 9\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/app/pages/collected-dataset/components-gui/cameraAccess.js\",\n        lineNumber: 579,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CameraAccess);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL3BhZ2VzL2NvbGxlY3RlZC1kYXRhc2V0L2NvbXBvbmVudHMtZ3VpL2NhbWVyYUFjY2Vzcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxrQkFBa0I7O0FBQ3lDO0FBQzZDO0FBRXhHLE1BQU1LLGVBQWUsQ0FBQyxFQUNwQkMsU0FBUyxFQUNUQyxPQUFPLEVBQ1BDLGFBQWEsRUFDYkMsZUFBZSxLQUFLLEVBQ3BCQyxrQkFBa0IsS0FBSyxFQUN2QkMsV0FBVyxLQUFLLEVBQ2hCQyxpQkFBaUIsS0FBSyxFQUN2QjtJQUNDLE1BQU1DLFdBQVdYLDZDQUFNQSxDQUFDO0lBQ3hCLE1BQU1ZLFlBQVlaLDZDQUFNQSxDQUFDO0lBQ3pCLE1BQU1hLGVBQWViLDZDQUFNQSxDQUFDO0lBQzVCLE1BQU1jLFFBQVFkLDZDQUFNQSxDQUFDO0lBQ3JCLE1BQU0sQ0FBQ2UsUUFBUUMsVUFBVSxHQUFHZiwrQ0FBUUEsQ0FBQztJQUNyQyxNQUFNLENBQUNnQixjQUFjQyxnQkFBZ0IsR0FBR2pCLCtDQUFRQSxDQUFDO0lBQ2pELE1BQU0sQ0FBQ2tCLEtBQUtDLE9BQU8sR0FBR25CLCtDQUFRQSxDQUFDO0lBQy9CLE1BQU1vQixjQUFjckIsNkNBQU1BLENBQUM7SUFDM0IsTUFBTXNCLHFCQUFxQnRCLDZDQUFNQSxDQUFDO0lBQ2xDLE1BQU0sQ0FBQ3VCLFlBQVlDLGNBQWMsR0FBR3ZCLCtDQUFRQSxDQUFDO1FBQUV3QixPQUFPO1FBQUdDLFFBQVE7SUFBRTtJQUNuRSxNQUFNLENBQUNDLGNBQWNDLGdCQUFnQixHQUFHM0IsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDNEIsbUJBQW1CQyxxQkFBcUIsR0FBRzdCLCtDQUFRQSxDQUFDO0lBQzNELE1BQU04QixhQUFhL0IsNkNBQU1BLENBQUMsRUFBRTtJQUM1QixNQUFNZ0MsZUFBZWhDLDZDQUFNQSxDQUFDO0lBQzVCLE1BQU0sQ0FBQ2lDLFVBQVVDLFlBQVksR0FBR2pDLCtDQUFRQSxDQUFDO0lBQ3pDLE1BQU0sQ0FBQ2tDLFVBQVVDLFlBQVksR0FBR25DLCtDQUFRQSxDQUFDO0lBRXpDLHVCQUF1QjtJQUN2QixNQUFNb0MsbUJBQW1CO1FBQ3ZCLElBQUl2QixNQUFNd0IsT0FBTyxJQUFJeEIsTUFBTXdCLE9BQU8sQ0FBQ0MsVUFBVSxLQUFLQyxVQUFVQyxJQUFJLEVBQUU7WUFDaEVDLFFBQVFDLEdBQUcsQ0FBQztZQUNaO1FBQ0Y7UUFFQVQsWUFBWTtRQUNaLElBQUk7WUFDRix3Q0FBd0M7WUFDeEMsTUFBTVUsS0FBSyxJQUFJSixVQUFVO1lBQ3pCMUIsTUFBTXdCLE9BQU8sR0FBR007WUFFaEIsMkJBQTJCO1lBQzNCLE1BQU1DLG9CQUFvQkMsV0FBVztnQkFDbkMsSUFBSUYsR0FBR0wsVUFBVSxLQUFLQyxVQUFVQyxJQUFJLEVBQUU7b0JBQ3BDQyxRQUFRSyxLQUFLLENBQUM7b0JBQ2RILEdBQUdJLEtBQUs7b0JBQ1JkLFlBQVk7b0JBQ1poQixnQkFBZ0I7b0JBQ2hCa0IsWUFBWTtnQkFDZDtZQUNGLEdBQUc7WUFFSFEsR0FBR0ssTUFBTSxHQUFHO2dCQUNWUCxRQUFRQyxHQUFHLENBQUM7Z0JBQ1pPLGFBQWFMO2dCQUNiWCxZQUFZO2dCQUNaaEIsZ0JBQWdCO2dCQUNoQmtCLFlBQVk7Z0JBQ1osSUFBSVQsY0FBYztvQkFDaEJMLG1CQUFtQmdCLE9BQU8sR0FBR2EsWUFBWUMsd0JBQXdCO2dCQUNuRTtZQUNGO1lBRUFSLEdBQUdTLFNBQVMsR0FBRyxDQUFDQztnQkFDZCxJQUFJO29CQUNGLE1BQU1DLFNBQVNDLEtBQUtDLEtBQUssQ0FBQ0gsTUFBTUksSUFBSTtvQkFDcEM1QixxQkFBcUJ5QjtvQkFDckJJLFlBQVlKO2dCQUNkLEVBQUUsT0FBT1IsT0FBTztvQkFDZEwsUUFBUUssS0FBSyxDQUFDLG9DQUFvQ0E7Z0JBQ3BEO1lBQ0Y7WUFFQUgsR0FBR2dCLE9BQU8sR0FBRyxDQUFDYjtnQkFDWkwsUUFBUUssS0FBSyxDQUFDLG9CQUFvQkE7Z0JBQ2xDRyxhQUFhTDtnQkFDYlgsWUFBWTtnQkFDWmhCLGdCQUFnQjtnQkFDaEJrQixZQUFZO1lBQ2Q7WUFFQVEsR0FBR2lCLE9BQU8sR0FBRyxDQUFDUDtnQkFDWlosUUFBUUMsR0FBRyxDQUFDLDJCQUEyQlcsTUFBTVEsSUFBSSxFQUFFUixNQUFNUyxNQUFNO2dCQUMvRGIsYUFBYUw7Z0JBQ2JYLFlBQVk7Z0JBQ1pFLFlBQVk7Z0JBQ1osd0JBQXdCO2dCQUN4QixJQUFJZCxtQkFBbUJnQixPQUFPLEVBQUU7b0JBQzlCMEIsY0FBYzFDLG1CQUFtQmdCLE9BQU87b0JBQ3hDaEIsbUJBQW1CZ0IsT0FBTyxHQUFHO2dCQUMvQjtnQkFFQSxtRUFBbUU7Z0JBQ25FLElBQUlnQixNQUFNUSxJQUFJLEtBQUssTUFBTTtvQkFDdkI1QyxnQkFBZ0IsQ0FBQyw2QkFBNkIsRUFBRW9DLE1BQU1TLE1BQU0sSUFBSSxrQkFBa0I7Z0JBQ3BGO1lBQ0Y7UUFDRixFQUFFLE9BQU9oQixPQUFPO1lBQ2RMLFFBQVFLLEtBQUssQ0FBQyw2QkFBNkJBO1lBQzNDYixZQUFZO1lBQ1poQixnQkFBZ0I7WUFDaEJrQixZQUFZO1FBQ2Q7SUFDRjtJQUVBLE1BQU02QixzQkFBc0I7UUFDMUIsSUFBSW5ELE1BQU13QixPQUFPLEVBQUU7WUFDakJ4QixNQUFNd0IsT0FBTyxDQUFDVSxLQUFLLENBQUMsTUFBTTtZQUMxQmxDLE1BQU13QixPQUFPLEdBQUc7WUFDaEJKLFlBQVk7WUFDWkUsWUFBWTtZQUNaLHdCQUF3QjtZQUN4QixJQUFJZCxtQkFBbUJnQixPQUFPLEVBQUU7Z0JBQzlCMEIsY0FBYzFDLG1CQUFtQmdCLE9BQU87Z0JBQ3hDaEIsbUJBQW1CZ0IsT0FBTyxHQUFHO1lBQy9CO1lBQ0EsMENBQTBDO1lBQzFDLElBQUkxQixVQUFVMEIsT0FBTyxFQUFFO2dCQUNyQixNQUFNNEIsTUFBTXRELFVBQVUwQixPQUFPLENBQUM2QixVQUFVLENBQUM7Z0JBQ3pDRCxJQUFJRSxTQUFTLENBQUMsR0FBRyxHQUFHeEQsVUFBVTBCLE9BQU8sQ0FBQ2IsS0FBSyxFQUFFYixVQUFVMEIsT0FBTyxDQUFDWixNQUFNO1lBQ3ZFO1FBQ0Y7SUFDRjtJQUVBM0IsZ0RBQVNBO2tDQUFDO1lBQ1IsSUFBSSxDQUFDSyxXQUFXO2dCQUNkNkQ7Z0JBQ0E7WUFDRjtZQUVBOzBDQUFPO29CQUNMQTtnQkFDRjs7UUFDRjtpQ0FBRztRQUFDN0Q7S0FBVTtJQUVkLCtCQUErQjtJQUMvQixNQUFNZ0QseUJBQXlCO1FBQzdCLElBQUksQ0FBQ3pDLFNBQVMyQixPQUFPLElBQUksQ0FBQzFCLFVBQVUwQixPQUFPLElBQUksQ0FBQ1gsZ0JBQWdCLENBQUNiLE1BQU13QixPQUFPLEVBQUU7UUFFaEYsTUFBTStCLFFBQVExRCxTQUFTMkIsT0FBTztRQUM5QixNQUFNZ0MsU0FBUzFELFVBQVUwQixPQUFPO1FBQ2hDLE1BQU00QixNQUFNSSxPQUFPSCxVQUFVLENBQUM7UUFFOUIsZ0RBQWdEO1FBQ2hELElBQUlyRCxNQUFNd0IsT0FBTyxJQUFJeEIsTUFBTXdCLE9BQU8sQ0FBQ0MsVUFBVSxLQUFLQyxVQUFVQyxJQUFJLEVBQUU7WUFDaEUsZUFBZTtZQUNmeUIsSUFBSUUsU0FBUyxDQUFDLEdBQUcsR0FBR0UsT0FBTzdDLEtBQUssRUFBRTZDLE9BQU81QyxNQUFNO1lBRS9DLGlDQUFpQztZQUNqQ3dDLElBQUlLLElBQUk7WUFFUixvREFBb0Q7WUFDcERMLElBQUlNLFNBQVMsQ0FBQ0YsT0FBTzdDLEtBQUssRUFBRTtZQUM1QnlDLElBQUlPLEtBQUssQ0FBQyxDQUFDLEdBQUc7WUFFZCxnREFBZ0Q7WUFDaERQLElBQUlRLFNBQVMsQ0FBQ0wsT0FBTyxHQUFHLEdBQUdDLE9BQU83QyxLQUFLLEVBQUU2QyxPQUFPNUMsTUFBTTtZQUV0RCw0QkFBNEI7WUFDNUJ3QyxJQUFJUyxPQUFPO1lBRVgsMkNBQTJDO1lBQzNDTCxPQUFPTSxNQUFNLENBQUMsQ0FBQ0M7Z0JBQ2IsSUFBSUEsUUFBUS9ELE1BQU13QixPQUFPLElBQUl4QixNQUFNd0IsT0FBTyxDQUFDQyxVQUFVLEtBQUtDLFVBQVVDLElBQUksRUFBRTtvQkFDeEUsd0JBQXdCO29CQUN4QjNCLE1BQU13QixPQUFPLENBQUN3QyxJQUFJLENBQUNEO2dCQUNyQjtZQUNGLEdBQUcsY0FBYztRQUNuQjtJQUNGO0lBRUEsMEJBQTBCO0lBQzFCLE1BQU1sQixjQUFjLENBQUNvQjtRQUNuQixJQUFJLENBQUNuRSxVQUFVMEIsT0FBTyxJQUFJLENBQUN5QyxTQUFTO1FBRXBDLE1BQU1ULFNBQVMxRCxVQUFVMEIsT0FBTztRQUNoQyxNQUFNNEIsTUFBTUksT0FBT0gsVUFBVSxDQUFDO1FBRTlCLGlDQUFpQztRQUNqQyxJQUFJWSxRQUFRQyxZQUFZLElBQUl4RSxpQkFBaUI7WUFDM0MsTUFBTSxFQUFFeUUsQ0FBQyxFQUFFQyxDQUFDLEVBQUV6RCxLQUFLLEVBQUVDLE1BQU0sRUFBRSxHQUFHcUQsUUFBUUMsWUFBWTtZQUNwRGQsSUFBSWlCLFdBQVcsR0FBRztZQUNsQmpCLElBQUlrQixTQUFTLEdBQUc7WUFDaEJsQixJQUFJbUIsVUFBVSxDQUFDSixHQUFHQyxHQUFHekQsT0FBT0M7UUFDOUI7UUFFQSw4QkFBOEI7UUFDOUIsSUFBSXFELFFBQVFPLFNBQVMsSUFBSS9FLGNBQWM7WUFDckMsTUFBTSxFQUFFZ0YsS0FBSyxFQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRSxHQUFHVixRQUFRTyxTQUFTO1lBQzlDLCtCQUErQjtZQUMvQkksYUFBYXhCLEtBQUtJLFFBQVFpQixPQUFPQyxLQUFLQztRQUN4QztRQUVBLDhCQUE4QjtRQUM5QixJQUFJVixRQUFRWSxTQUFTLElBQUlsRixVQUFVO1lBQ2pDLE1BQU0sRUFBRW1GLE1BQU0sRUFBRSxHQUFHYixRQUFRWSxTQUFTO1lBQ3BDRSxhQUFhM0IsS0FBS0ksUUFBUXNCO1FBQzVCO1FBRUEsNkJBQTZCO1FBQzdCLElBQUlsRixnQkFBZ0I7WUFDbEJvRixlQUFlNUIsS0FBS0ksUUFBUVM7UUFDOUI7SUFDRjtJQUVBLHVDQUF1QztJQUN2QyxNQUFNZ0IsY0FBYztRQUNsQjdFLGdCQUFnQjtRQUNoQlUsZ0JBQWdCO1FBRWhCLElBQUk7WUFDRix5Q0FBeUM7WUFDekMsSUFBSSxPQUFPb0UsY0FBYyxlQUFlLENBQUNBLFVBQVVDLFlBQVksRUFBRTtnQkFDL0QsdUNBQXVDO2dCQUN2QyxJQUFJLE9BQU9ELGNBQWMsYUFBYTtvQkFDcENBLFVBQVVDLFlBQVksR0FBRyxDQUFDO2dCQUM1QjtnQkFFQSxzQ0FBc0M7Z0JBQ3RDLElBQUksQ0FBQ0QsVUFBVUMsWUFBWSxDQUFDQyxZQUFZLEVBQUU7b0JBQ3hDRixVQUFVQyxZQUFZLENBQUNDLFlBQVksR0FBRyxTQUFTQyxXQUFXO3dCQUN4RCx5REFBeUQ7d0JBQ3pELE1BQU1ELGVBQWVGLFVBQVVJLGtCQUFrQixJQUFJSixVQUFVSyxlQUFlO3dCQUU5RSxrRkFBa0Y7d0JBQ2xGLElBQUksQ0FBQ0gsY0FBYzs0QkFDakIsT0FBT0ksUUFBUUMsTUFBTSxDQUFDLElBQUlDLE1BQU07d0JBQ2xDO3dCQUVBLDRFQUE0RTt3QkFDNUUsT0FBTyxJQUFJRixRQUFRLFNBQVNHLE9BQU8sRUFBRUYsTUFBTTs0QkFDekNMLGFBQWFRLElBQUksQ0FBQ1YsV0FBV0csYUFBYU0sU0FBU0Y7d0JBQ3JEO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQSx1Q0FBdUM7WUFDdkMsTUFBTUksV0FBV0MsT0FBT0MsUUFBUSxDQUFDQyxRQUFRLEtBQUssWUFDOUJGLE9BQU9DLFFBQVEsQ0FBQ0UsUUFBUSxLQUFLLGVBQzdCSCxPQUFPQyxRQUFRLENBQUNFLFFBQVEsS0FBSyxlQUM3QkMsa0JBQXlCO1lBRXpDLElBQUksQ0FBQ0wsVUFBVTtnQkFDYixNQUFNLElBQUlILE1BQU07WUFDbEI7WUFFQTlELFFBQVFDLEdBQUcsQ0FBQztZQUVaLHFDQUFxQztZQUNyQyxNQUFNd0QsY0FBYyxNQUFNakcsOEdBQStCQTtZQUN6RHdDLFFBQVFDLEdBQUcsQ0FBQyw2QkFBNkJ3RDtZQUV6QyxNQUFNYyxjQUFjLE1BQU1qQixVQUFVQyxZQUFZLENBQUNDLFlBQVksQ0FBQztnQkFDNUQsR0FBR0MsV0FBVztnQkFDZGUsT0FBTztZQUNUO1lBRUF4RSxRQUFRQyxHQUFHLENBQUM7WUFDWjNCLFVBQVVpRztZQUVWLElBQUl0RyxTQUFTMkIsT0FBTyxFQUFFO2dCQUNwQjNCLFNBQVMyQixPQUFPLENBQUM2RSxXQUFXLEdBQUc7Z0JBQy9CeEcsU0FBUzJCLE9BQU8sQ0FBQzhFLEtBQUssR0FBRztnQkFDekJ6RyxTQUFTMkIsT0FBTyxDQUFDK0UsUUFBUSxHQUFHO2dCQUM1QjFHLFNBQVMyQixPQUFPLENBQUNnRixTQUFTLEdBQUdMO2dCQUU3QixJQUFJO29CQUNGLE1BQU10RyxTQUFTMkIsT0FBTyxDQUFDaUYsSUFBSTtvQkFDM0I3RSxRQUFRQyxHQUFHLENBQUM7b0JBQ1pmLGdCQUFnQjtvQkFFaEIsbURBQW1EO29CQUNuRCxJQUFJSyxhQUFhLGFBQWE7d0JBQzVCWCxtQkFBbUJnQixPQUFPLEdBQUdhLFlBQVlDLHdCQUF3QixLQUFLLFNBQVM7b0JBQ2pGO2dCQUNGLEVBQUUsT0FBT29FLFdBQVc7b0JBQ2xCOUUsUUFBUUssS0FBSyxDQUFDLHdCQUF3QnlFO29CQUN0Q3RHLGdCQUFnQjtnQkFDbEI7WUFDRjtRQUNGLEVBQUUsT0FBTzZCLE9BQU87WUFDZEwsUUFBUUssS0FBSyxDQUFDLHdCQUF3QkE7WUFDdEMsSUFBSTlCLGVBQWU7WUFFbkIsSUFBSThCLE1BQU0wRSxJQUFJLEtBQUssbUJBQW1CO2dCQUNwQ3hHLGdCQUFnQjtZQUNsQixPQUFPLElBQUk4QixNQUFNMEUsSUFBSSxLQUFLLGlCQUFpQjtnQkFDekN4RyxnQkFBZ0I7WUFDbEIsT0FBTyxJQUFJOEIsTUFBTTBFLElBQUksS0FBSyxvQkFBb0I7Z0JBQzVDeEcsZ0JBQWdCO1lBQ2xCLE9BQU8sSUFBSThCLE1BQU0wRSxJQUFJLEtBQUssd0JBQXdCO2dCQUNoRHhHLGdCQUFnQjtZQUNsQixPQUFPLElBQUk4QixNQUFNMkUsT0FBTyxLQUFLLG1EQUFtRDtnQkFDOUV6RyxnQkFBZ0I7WUFDbEIsT0FBTztnQkFDTEEsZ0JBQWdCOEIsTUFBTTJFLE9BQU8sSUFBSTtZQUNuQztZQUVBeEcsZ0JBQWdCRDtRQUNsQjtJQUNGO0lBRUEsTUFBTTBHLGFBQWE7UUFDakIsZ0NBQWdDO1FBQ2hDLElBQUk1RyxRQUFRO1lBQ1ZBLE9BQU82RyxTQUFTLEdBQUdDLE9BQU8sQ0FBQ0MsQ0FBQUEsUUFBU0EsTUFBTUMsSUFBSTtZQUM5Qy9HLFVBQVU7UUFDWjtRQUVBLHFCQUFxQjtRQUNyQixJQUFJTCxTQUFTMkIsT0FBTyxFQUFFO1lBQ3BCM0IsU0FBUzJCLE9BQU8sQ0FBQ2dGLFNBQVMsR0FBRztRQUMvQjtRQUVBLDRCQUE0QjtRQUM1QixJQUFJaEcsbUJBQW1CZ0IsT0FBTyxFQUFFO1lBQzlCMEIsY0FBYzFDLG1CQUFtQmdCLE9BQU87WUFDeENoQixtQkFBbUJnQixPQUFPLEdBQUc7UUFDL0I7UUFFQVYsZ0JBQWdCO0lBQ2xCO0lBRUEsdURBQXVEO0lBQ3ZEN0IsZ0RBQVNBO2tDQUFDO1lBQ1IsSUFBSUssV0FBVztnQkFDYjJGO1lBQ0YsT0FBTztnQkFDTDRCO1lBQ0Y7WUFFQTswQ0FBTztvQkFDTEE7Z0JBQ0Y7O1FBQ0Y7aUNBQUc7UUFBQ3ZIO0tBQVU7SUFFZCxvQkFBb0I7SUFDcEJMLGdEQUFTQTtrQ0FBQztZQUNSLElBQUksQ0FBQ0ssV0FBVztZQUVoQmlCLFlBQVlpQixPQUFPLEdBQUdhOzBDQUFZO29CQUNoQy9CO2tEQUFPNEcsQ0FBQUE7NEJBQ0wsOEJBQThCOzRCQUM5QixNQUFNQyxTQUFTQyxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBSyxNQUFNLElBQUksMkJBQTJCOzRCQUMvRSxPQUFPSDt3QkFDVDs7Z0JBQ0Y7eUNBQUc7WUFFSDswQ0FBTztvQkFDTCxJQUFJNUcsWUFBWWlCLE9BQU8sRUFBRTt3QkFDdkIwQixjQUFjM0MsWUFBWWlCLE9BQU87b0JBQ25DO29CQUNBLElBQUloQixtQkFBbUJnQixPQUFPLEVBQUU7d0JBQzlCMEIsY0FBYzFDLG1CQUFtQmdCLE9BQU87b0JBQzFDO2dCQUNGOztRQUNGO2lDQUFHO1FBQUNsQztLQUFVO0lBRWQsZ0RBQWdEO0lBQ2hETCxnREFBU0E7a0NBQUM7WUFDUixJQUFJLENBQUNLLFdBQVc7WUFFaEIsTUFBTWlJOzJEQUFtQjtvQkFDdkIsSUFBSXhILGFBQWF5QixPQUFPLEVBQUU7d0JBQ3hCLE1BQU0sRUFBRWIsS0FBSyxFQUFFQyxNQUFNLEVBQUUsR0FBR2IsYUFBYXlCLE9BQU8sQ0FBQ2dHLHFCQUFxQjt3QkFDcEU5RyxjQUFjOzRCQUFFQzs0QkFBT0M7d0JBQU87b0JBQ2hDO2dCQUNGOztZQUVBMkc7WUFDQXpCLE9BQU8yQixnQkFBZ0IsQ0FBQyxVQUFVRjtZQUNsQzswQ0FBTyxJQUFNekIsT0FBTzRCLG1CQUFtQixDQUFDLFVBQVVIOztRQUNwRDtpQ0FBRztRQUFDakk7S0FBVTtJQUVkLG1DQUFtQztJQUNuQ0wsZ0RBQVNBO2tDQUFDO1lBQ1IsSUFBSSxDQUFDSyxhQUFhLENBQUNPLFNBQVMyQixPQUFPLElBQUksQ0FBQ3ZCLFFBQVE7WUFFaEQsTUFBTXNELFFBQVExRCxTQUFTMkIsT0FBTztZQUU5QixNQUFNbUc7K0RBQXVCO29CQUMzQi9GLFFBQVFDLEdBQUcsQ0FBQztvQkFDWmYsZ0JBQWdCO29CQUVoQix1QkFBdUI7b0JBQ3ZCLE1BQU04RyxhQUFhckUsTUFBTXFFLFVBQVUsSUFBSTtvQkFDdkMsTUFBTUMsY0FBY3RFLE1BQU1zRSxXQUFXLElBQUk7b0JBRXpDakcsUUFBUUMsR0FBRyxDQUFDLENBQUMsa0JBQWtCLEVBQUUrRixXQUFXLENBQUMsRUFBRUMsYUFBYTtvQkFFNUQsOEJBQThCO29CQUM5QixJQUFJL0gsVUFBVTBCLE9BQU8sRUFBRTt3QkFDckIsc0NBQXNDO3dCQUN0QzFCLFVBQVUwQixPQUFPLENBQUNiLEtBQUssR0FBR2lIO3dCQUMxQjlILFVBQVUwQixPQUFPLENBQUNaLE1BQU0sR0FBR2lIO3dCQUUzQiw0Q0FBNEM7d0JBQzVDLE1BQU1DLGNBQWNGLGFBQWFDO3dCQUNqQyxNQUFNRSxpQkFBaUJ0SCxXQUFXRSxLQUFLO3dCQUN2QyxNQUFNcUgsa0JBQWtCRCxpQkFBaUJEO3dCQUV6Q2hJLFVBQVUwQixPQUFPLENBQUN5RyxLQUFLLENBQUN0SCxLQUFLLEdBQUcsR0FBR29ILGVBQWUsRUFBRSxDQUFDO3dCQUNyRGpJLFVBQVUwQixPQUFPLENBQUN5RyxLQUFLLENBQUNySCxNQUFNLEdBQUcsR0FBR29ILGdCQUFnQixFQUFFLENBQUM7b0JBQ3pEO29CQUVBLDBCQUEwQjtvQkFDMUJFO29CQUVBLCtDQUErQztvQkFDL0MsSUFBSTFJLGVBQWU7d0JBQ2pCQSxjQUFjOzRCQUNabUIsT0FBT2lIOzRCQUNQaEgsUUFBUWlIO3dCQUNWO29CQUNGO2dCQUNGOztZQUVBdEUsTUFBTWtFLGdCQUFnQixDQUFDLGtCQUFrQkU7WUFFekM7MENBQU87b0JBQ0xwRSxNQUFNbUUsbUJBQW1CLENBQUMsa0JBQWtCQztnQkFDOUM7O1FBQ0Y7aUNBQUc7UUFBQzFIO1FBQVFYO1FBQVdtQjtRQUFZakI7S0FBYztJQUVqRCxNQUFNMEksa0JBQWtCO1FBQ3RCLElBQUksQ0FBQ3BJLFVBQVUwQixPQUFPLElBQUksQ0FBQzNCLFNBQVMyQixPQUFPLElBQUksQ0FBQ1gsY0FBYztRQUU5RCxNQUFNMEMsUUFBUTFELFNBQVMyQixPQUFPO1FBQzlCLE1BQU1nQyxTQUFTMUQsVUFBVTBCLE9BQU87UUFDaEMsTUFBTTRCLE1BQU1JLE9BQU9ILFVBQVUsQ0FBQztRQUU5QixvQ0FBb0M7UUFDcEM3QyxtQkFBbUJnQixPQUFPLEdBQUdhLFlBQVk7WUFDdkMsSUFBSWtCLE1BQU05QixVQUFVLEtBQUssR0FBRztZQUU1QixlQUFlO1lBQ2YyQixJQUFJRSxTQUFTLENBQUMsR0FBRyxHQUFHRSxPQUFPN0MsS0FBSyxFQUFFNkMsT0FBTzVDLE1BQU07WUFFL0MsaUNBQWlDO1lBQ2pDd0MsSUFBSUssSUFBSTtZQUVSLG9EQUFvRDtZQUNwREwsSUFBSU0sU0FBUyxDQUFDRixPQUFPN0MsS0FBSyxFQUFFO1lBQzVCeUMsSUFBSU8sS0FBSyxDQUFDLENBQUMsR0FBRztZQUVkLGdEQUFnRDtZQUNoRFAsSUFBSVEsU0FBUyxDQUFDTCxPQUFPLEdBQUcsR0FBR0MsT0FBTzdDLEtBQUssRUFBRTZDLE9BQU81QyxNQUFNO1lBRXRELDRCQUE0QjtZQUM1QndDLElBQUlTLE9BQU87WUFFWCx3REFBd0Q7WUFDeEQsTUFBTXNFLGVBQWVmLEtBQUtFLE1BQU0sS0FBSztZQUVyQywrQ0FBK0M7WUFDL0MsSUFBSWEsY0FBYztnQkFDaEIsSUFBSXpJLGlCQUFpQjtvQkFDbkIwSSxnQkFBZ0JoRixLQUFLSTtnQkFDdkI7Z0JBRUEsSUFBSS9ELGNBQWM7b0JBQ2hCbUYsYUFBYXhCLEtBQUtJO2dCQUNwQjtnQkFFQSxJQUFJN0QsVUFBVTtvQkFDWm9GLGFBQWEzQixLQUFLSTtnQkFDcEI7WUFDRjtZQUVBLGdDQUFnQztZQUNoQyxJQUFJNUQsZ0JBQWdCO2dCQUNsQm9GLGVBQWU1QixLQUFLSSxRQUFRMkU7WUFDOUI7UUFDRixHQUFHLEtBQUssU0FBUztJQUNuQjtJQUVBLHVDQUF1QztJQUN2QyxNQUFNQyxrQkFBa0IsQ0FBQ2hGLEtBQUtJO1FBQzVCLE1BQU02RSxVQUFVN0UsT0FBTzdDLEtBQUssR0FBRztRQUMvQixNQUFNMkgsVUFBVTlFLE9BQU81QyxNQUFNLEdBQUc7UUFDaEMsTUFBTTJILFdBQVcvRSxPQUFPN0MsS0FBSyxHQUFHO1FBQ2hDLE1BQU02SCxZQUFZaEYsT0FBTzVDLE1BQU0sR0FBRztRQUVsQ3dDLElBQUlpQixXQUFXLEdBQUc7UUFDbEJqQixJQUFJa0IsU0FBUyxHQUFHO1FBQ2hCbEIsSUFBSW1CLFVBQVUsQ0FDWjhELFVBQVVFLFdBQVMsR0FDbkJELFVBQVVFLFlBQVUsR0FDcEJELFVBQ0FDO0lBRUo7SUFFQSx5Q0FBeUM7SUFDekMsTUFBTTVELGVBQWUsQ0FBQ3hCLEtBQUtJLFFBQVFpQixPQUFPQyxLQUFLQztRQUM3QyxNQUFNMEQsVUFBVTdFLE9BQU83QyxLQUFLLEdBQUc7UUFDL0IsTUFBTTJILFVBQVU5RSxPQUFPNUMsTUFBTSxHQUFHO1FBQ2hDLE1BQU02SCxPQUFPQyxLQUFLQyxHQUFHLEtBQUs7UUFDMUIsTUFBTUMsU0FBU3BGLE9BQU83QyxLQUFLLEdBQUc7UUFFOUIsZUFBZTtRQUNmeUMsSUFBSXlGLFNBQVM7UUFDYnpGLElBQUkwRixNQUFNLENBQUNULFNBQVNDO1FBQ3BCbEYsSUFBSTJGLE1BQU0sQ0FBQ1YsVUFBVU8sU0FBU3hCLEtBQUs0QixHQUFHLENBQUNQLE9BQU9IO1FBQzlDbEYsSUFBSWlCLFdBQVcsR0FBRztRQUNsQmpCLElBQUlrQixTQUFTLEdBQUc7UUFDaEJsQixJQUFJNkYsTUFBTTtRQUVWLGlCQUFpQjtRQUNqQjdGLElBQUl5RixTQUFTO1FBQ2J6RixJQUFJMEYsTUFBTSxDQUFDVCxTQUFTQztRQUNwQmxGLElBQUkyRixNQUFNLENBQUNWLFNBQVNDLFVBQVVNLFNBQVN4QixLQUFLNEIsR0FBRyxDQUFDUCxPQUFPO1FBQ3ZEckYsSUFBSWlCLFdBQVcsR0FBRztRQUNsQmpCLElBQUlrQixTQUFTLEdBQUc7UUFDaEJsQixJQUFJNkYsTUFBTTtRQUVWLGdCQUFnQjtRQUNoQjdGLElBQUl5RixTQUFTO1FBQ2J6RixJQUFJMEYsTUFBTSxDQUFDVCxTQUFTQztRQUNwQmxGLElBQUkyRixNQUFNLENBQ1JWLFVBQVVPLFNBQU8sSUFBSXhCLEtBQUs0QixHQUFHLENBQUNQLE9BQU8sSUFDckNILFVBQVVNLFNBQU8sSUFBSXhCLEtBQUs4QixHQUFHLENBQUNULE9BQU87UUFFdkNyRixJQUFJaUIsV0FBVyxHQUFHO1FBQ2xCakIsSUFBSWtCLFNBQVMsR0FBRztRQUNoQmxCLElBQUk2RixNQUFNO0lBQ1o7SUFFQSxvQ0FBb0M7SUFDcEMsTUFBTWxFLGVBQWUsQ0FBQzNCLEtBQUtJLFFBQVFzQjtRQUNqQyxNQUFNdUQsVUFBVTdFLE9BQU83QyxLQUFLLEdBQUc7UUFDL0IsTUFBTTJILFVBQVU5RSxPQUFPNUMsTUFBTSxHQUFHO1FBQ2hDLE1BQU11SSxTQUFTL0IsS0FBS2dDLEdBQUcsQ0FBQzVGLE9BQU83QyxLQUFLLEVBQUU2QyxPQUFPNUMsTUFBTSxJQUFJO1FBRXZELFlBQVk7UUFDWndDLElBQUlpRyxTQUFTLEdBQUc7UUFDaEJqRyxJQUFJeUYsU0FBUztRQUNiekYsSUFBSWtHLEdBQUcsQ0FBQ2pCLFNBQVNDLFNBQVNhLFFBQVEsR0FBRy9CLEtBQUttQyxFQUFFLEdBQUc7UUFDL0NuRyxJQUFJb0csSUFBSTtRQUVSLFlBQVk7UUFDWixNQUFNQyxZQUFZTixTQUFTO1FBQzNCLE1BQU1PLGFBQWFQLFNBQVM7UUFDNUIsTUFBTVEsYUFBYVIsU0FBUztRQUU1Qi9GLElBQUlpRyxTQUFTLEdBQUc7UUFFaEIsV0FBVztRQUNYakcsSUFBSXlGLFNBQVM7UUFDYnpGLElBQUlrRyxHQUFHLENBQUNqQixVQUFVcUIsWUFBWXBCLFVBQVVxQixZQUFZRixXQUFXLEdBQUdyQyxLQUFLbUMsRUFBRSxHQUFHO1FBQzVFbkcsSUFBSW9HLElBQUk7UUFFUixZQUFZO1FBQ1pwRyxJQUFJeUYsU0FBUztRQUNiekYsSUFBSWtHLEdBQUcsQ0FBQ2pCLFVBQVVxQixZQUFZcEIsVUFBVXFCLFlBQVlGLFdBQVcsR0FBR3JDLEtBQUttQyxFQUFFLEdBQUc7UUFDNUVuRyxJQUFJb0csSUFBSTtJQUNWO0lBRUEscUNBQXFDO0lBQ3JDLE1BQU14RSxpQkFBaUIsQ0FBQzVCLEtBQUtJLFFBQVEyRTtRQUNuQy9FLElBQUlpRyxTQUFTLEdBQUc7UUFDaEJqRyxJQUFJd0csUUFBUSxDQUFDLEdBQUdwRyxPQUFPNUMsTUFBTSxHQUFHLElBQUksS0FBSztRQUV6Q3dDLElBQUl5RyxJQUFJLEdBQUc7UUFDWHpHLElBQUlpRyxTQUFTLEdBQUc7UUFDaEJqRyxJQUFJMEcsUUFBUSxDQUFDLENBQUMsWUFBWSxFQUFFdEcsT0FBTzdDLEtBQUssQ0FBQyxDQUFDLEVBQUU2QyxPQUFPNUMsTUFBTSxFQUFFLEVBQUUsSUFBSTRDLE9BQU81QyxNQUFNLEdBQUc7UUFDakZ3QyxJQUFJMEcsUUFBUSxDQUFDLENBQUMsS0FBSyxFQUFFekosS0FBSyxFQUFFLElBQUltRCxPQUFPNUMsTUFBTSxHQUFHO1FBQ2hEd0MsSUFBSTBHLFFBQVEsQ0FBQyxDQUFDLE1BQU0sRUFBRTNCLGVBQWUsYUFBYSxnQkFBZ0IsRUFBRSxJQUFJM0UsT0FBTzVDLE1BQU0sR0FBRztJQUMxRjtJQUVBLElBQUksQ0FBQ3RCLFdBQVc7UUFDZCxPQUFPO0lBQ1Q7SUFFQSxxQkFDRSw4REFBQ3lLO1FBQ0NDLEtBQUtqSztRQUNMa0ksT0FBTztZQUNMZ0MsVUFBVTtZQUNWQyxLQUFLO1lBQ0xDLE1BQU07WUFDTkMsV0FBVztZQUNYekosT0FBTztZQUNQQyxRQUFRO1lBQ1J5SixpQkFBaUI7WUFDakJDLGNBQWM7WUFDZEMsV0FBVztZQUNYQyxVQUFVO1lBQ1ZDLFFBQVE7UUFDVjs7MEJBRUEsOERBQUNsSDtnQkFDQ3lHLEtBQUtuSztnQkFDTG9JLE9BQU87b0JBQ0x0SCxPQUFPO29CQUNQQyxRQUFRO29CQUNSOEosV0FBVztvQkFDWE4sV0FBVztvQkFDWE8sU0FBUztnQkFDWDtnQkFDQXRFLFdBQVc7Z0JBQ1hDLEtBQUs7Z0JBQ0xzRSxRQUFROzs7Ozs7MEJBRVYsOERBQUNwSDtnQkFDQ3dHLEtBQUtsSztnQkFDTG1JLE9BQU87b0JBQ0xnQyxVQUFVO29CQUNWQyxLQUFLO29CQUNMQyxNQUFNO29CQUNOeEosT0FBTztvQkFDUEMsUUFBUTtvQkFDUjZKLFFBQVE7b0JBQ1JJLGVBQWU7b0JBQ2ZDLFNBQVN6SixXQUFXLFVBQVUsT0FBTyw4QkFBOEI7Z0JBQ3JFOzs7Ozs7MEJBRUYsOERBQUMwSTtnQkFBSTlCLE9BQU87b0JBQ1ZnQyxVQUFVO29CQUNWQyxLQUFLO29CQUNMYSxPQUFPO29CQUNQRCxTQUFTO29CQUNURSxLQUFLO29CQUNMUCxRQUFRO2dCQUNWOztrQ0FDRSw4REFBQ1E7d0JBQ0NDLFNBQVMzTDt3QkFDVDBJLE9BQU87NEJBQ0xrRCxTQUFTOzRCQUNUZCxpQkFBaUI7NEJBQ2pCZSxPQUFPOzRCQUNQQyxRQUFROzRCQUNSZixjQUFjOzRCQUNkZ0IsUUFBUTs0QkFDUkMsWUFBWTt3QkFDZDtrQ0FDRDs7Ozs7O2tDQUlELDhEQUFDTjt3QkFDQ0MsU0FBUzs0QkFDUCxJQUFJN0osVUFBVTtnQ0FDWjhCOzRCQUNGLE9BQU87Z0NBQ0w1Qjs0QkFDRjt3QkFDRjt3QkFDQTBHLE9BQU87NEJBQ0xrRCxTQUFTOzRCQUNUZCxpQkFBaUJoSixXQUFXLHlCQUF5Qjs0QkFDckQrSixPQUFPOzRCQUNQQyxRQUFROzRCQUNSZixjQUFjOzRCQUNkZ0IsUUFBUTs0QkFDUkMsWUFBWTt3QkFDZDtrQ0FFQ2xLLFdBQVcsV0FBVzs7Ozs7Ozs7Ozs7O1lBSTFCRixhQUFhLHlCQUNaLDhEQUFDNEk7Z0JBQUk5QixPQUFPO29CQUNWZ0MsVUFBVTtvQkFDVkMsS0FBSztvQkFDTGEsT0FBTztvQkFDUEksU0FBUztvQkFDVGQsaUJBQWlCO29CQUNqQmUsT0FBTztvQkFDUGQsY0FBYztvQkFDZEcsUUFBUTtnQkFDVjs7b0JBQUc7b0JBQ2tCdEs7Ozs7Ozs7Ozs7Ozs7QUFLN0I7QUFFQSxpRUFBZWQsWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsiL2FwcC9wYWdlcy9jb2xsZWN0ZWQtZGF0YXNldC9jb21wb25lbnRzLWd1aS9jYW1lcmFBY2Nlc3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY2FtZXJhQWNjZXNzLmpzXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZ2V0SGlnaGVzdFJlc29sdXRpb25Db25zdHJhaW50cyB9IGZyb20gJy4uLy4uLy4uL2NvbXBvbmVudHMvY29sbGVjdGVkLWRhdGFzZXQvSGVscGVyL3NhdmVmaWxlJztcblxuY29uc3QgQ2FtZXJhQWNjZXNzID0gKHsgXG4gIGlzU2hvd2luZywgXG4gIG9uQ2xvc2UsIFxuICBvbkNhbWVyYVJlYWR5LFxuICBzaG93SGVhZFBvc2UgPSBmYWxzZSxcbiAgc2hvd0JvdW5kaW5nQm94ID0gZmFsc2UsXG4gIHNob3dNYXNrID0gZmFsc2UsXG4gIHNob3dQYXJhbWV0ZXJzID0gZmFsc2Vcbn0pID0+IHtcbiAgY29uc3QgdmlkZW9SZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGNhbnZhc1JlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgY29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCB3c1JlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgW3N0cmVhbSwgc2V0U3RyZWFtXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbZXJyb3JNZXNzYWdlLCBzZXRFcnJvck1lc3NhZ2VdID0gdXNlU3RhdGUoJycpO1xuICBjb25zdCBbZnBzLCBzZXRGcHNdID0gdXNlU3RhdGUoMCk7XG4gIGNvbnN0IGZwc1RpbWVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBwcm9jZXNzaW5nSW50ZXJ2YWwgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtkaW1lbnNpb25zLCBzZXREaW1lbnNpb25zXSA9IHVzZVN0YXRlKHsgd2lkdGg6IDAsIGhlaWdodDogMCB9KTtcbiAgY29uc3QgW2lzVmlkZW9SZWFkeSwgc2V0SXNWaWRlb1JlYWR5XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3Byb2Nlc3NpbmdSZXN1bHRzLCBzZXRQcm9jZXNzaW5nUmVzdWx0c10gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgZnJhbWVRdWV1ZSA9IHVzZVJlZihbXSk7XG4gIGNvbnN0IGlzUHJvY2Vzc2luZyA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IFt3c1N0YXR1cywgc2V0V3NTdGF0dXNdID0gdXNlU3RhdGUoJ2Rpc2Nvbm5lY3RlZCcpO1xuICBjb25zdCBbaXNMaW5rZWQsIHNldElzTGlua2VkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgXG4gIC8vIFdlYlNvY2tldCBjb25uZWN0aW9uXG4gIGNvbnN0IGNvbm5lY3RXZWJTb2NrZXQgPSAoKSA9PiB7XG4gICAgaWYgKHdzUmVmLmN1cnJlbnQgJiYgd3NSZWYuY3VycmVudC5yZWFkeVN0YXRlID09PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBhbHJlYWR5IGNvbm5lY3RlZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHNldFdzU3RhdHVzKCdjb25uZWN0aW5nJyk7XG4gICAgdHJ5IHtcbiAgICAgIC8vIENvbm5lY3QgdG8gRmFzdEFQSSBXZWJTb2NrZXQgZW5kcG9pbnRcbiAgICAgIGNvbnN0IHdzID0gbmV3IFdlYlNvY2tldCgnd3M6Ly9sb2NhbGhvc3Q6ODAwMC93cy92aWRlbycpO1xuICAgICAgd3NSZWYuY3VycmVudCA9IHdzO1xuXG4gICAgICAvLyBTZXQgYSBjb25uZWN0aW9uIHRpbWVvdXRcbiAgICAgIGNvbnN0IGNvbm5lY3Rpb25UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICh3cy5yZWFkeVN0YXRlICE9PSBXZWJTb2NrZXQuT1BFTikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1dlYlNvY2tldCBjb25uZWN0aW9uIHRpbWVvdXQnKTtcbiAgICAgICAgICB3cy5jbG9zZSgpO1xuICAgICAgICAgIHNldFdzU3RhdHVzKCdlcnJvcicpO1xuICAgICAgICAgIHNldEVycm9yTWVzc2FnZSgnQ29ubmVjdGlvbiB0aW1lb3V0LiBQbGVhc2UgY2hlY2sgaWYgdGhlIGJhY2tlbmQgc2VydmVyIGlzIHJ1bm5pbmcuJyk7XG4gICAgICAgICAgc2V0SXNMaW5rZWQoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9LCA1MDAwKTtcblxuICAgICAgd3Mub25vcGVuID0gKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnV2ViU29ja2V0IGNvbm5lY3RlZCB0byBGYXN0QVBJIGJhY2tlbmQnKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGNvbm5lY3Rpb25UaW1lb3V0KTtcbiAgICAgICAgc2V0V3NTdGF0dXMoJ2Nvbm5lY3RlZCcpO1xuICAgICAgICBzZXRFcnJvck1lc3NhZ2UoJycpO1xuICAgICAgICBzZXRJc0xpbmtlZCh0cnVlKTtcbiAgICAgICAgaWYgKGlzVmlkZW9SZWFkeSkge1xuICAgICAgICAgIHByb2Nlc3NpbmdJbnRlcnZhbC5jdXJyZW50ID0gc2V0SW50ZXJ2YWwoY2FwdHVyZUFuZFByb2Nlc3NGcmFtZSwgMzMpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB3cy5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgIHNldFByb2Nlc3NpbmdSZXN1bHRzKHJlc3VsdCk7XG4gICAgICAgICAgZHJhd1Jlc3VsdHMocmVzdWx0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIFdlYlNvY2tldCBtZXNzYWdlOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgd3Mub25lcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICBjbGVhclRpbWVvdXQoY29ubmVjdGlvblRpbWVvdXQpO1xuICAgICAgICBzZXRXc1N0YXR1cygnZXJyb3InKTtcbiAgICAgICAgc2V0RXJyb3JNZXNzYWdlKCdGYWlsZWQgdG8gY29ubmVjdCB0byBGYXN0QVBJIGJhY2tlbmQuIFBsZWFzZSBjaGVjayBpZiB0aGUgc2VydmVyIGlzIHJ1bm5pbmcuJyk7XG4gICAgICAgIHNldElzTGlua2VkKGZhbHNlKTtcbiAgICAgIH07XG5cbiAgICAgIHdzLm9uY2xvc2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBkaXNjb25uZWN0ZWQ6JywgZXZlbnQuY29kZSwgZXZlbnQucmVhc29uKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGNvbm5lY3Rpb25UaW1lb3V0KTtcbiAgICAgICAgc2V0V3NTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcpO1xuICAgICAgICBzZXRJc0xpbmtlZChmYWxzZSk7XG4gICAgICAgIC8vIFN0b3AgZnJhbWUgcHJvY2Vzc2luZ1xuICAgICAgICBpZiAocHJvY2Vzc2luZ0ludGVydmFsLmN1cnJlbnQpIHtcbiAgICAgICAgICBjbGVhckludGVydmFsKHByb2Nlc3NpbmdJbnRlcnZhbC5jdXJyZW50KTtcbiAgICAgICAgICBwcm9jZXNzaW5nSW50ZXJ2YWwuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIElmIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgZHVlIHRvIGFuIGVycm9yLCBzaG93IGVycm9yIG1lc3NhZ2VcbiAgICAgICAgaWYgKGV2ZW50LmNvZGUgIT09IDEwMDApIHsgLy8gMTAwMCBpcyBub3JtYWwgY2xvc3VyZVxuICAgICAgICAgIHNldEVycm9yTWVzc2FnZShgV2ViU29ja2V0IGNvbm5lY3Rpb24gY2xvc2VkOiAke2V2ZW50LnJlYXNvbiB8fCAnVW5rbm93biByZWFzb24nfWApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBXZWJTb2NrZXQ6JywgZXJyb3IpO1xuICAgICAgc2V0V3NTdGF0dXMoJ2Vycm9yJyk7XG4gICAgICBzZXRFcnJvck1lc3NhZ2UoJ0ZhaWxlZCB0byBjcmVhdGUgV2ViU29ja2V0IGNvbm5lY3Rpb24uIFBsZWFzZSBjaGVjayB5b3VyIG5ldHdvcmsgY29ubmVjdGlvbi4nKTtcbiAgICAgIHNldElzTGlua2VkKGZhbHNlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZGlzY29ubmVjdFdlYlNvY2tldCA9ICgpID0+IHtcbiAgICBpZiAod3NSZWYuY3VycmVudCkge1xuICAgICAgd3NSZWYuY3VycmVudC5jbG9zZSgxMDAwLCAnVXNlciByZXF1ZXN0ZWQgZGlzY29ubmVjdCcpO1xuICAgICAgd3NSZWYuY3VycmVudCA9IG51bGw7XG4gICAgICBzZXRXc1N0YXR1cygnZGlzY29ubmVjdGVkJyk7XG4gICAgICBzZXRJc0xpbmtlZChmYWxzZSk7XG4gICAgICAvLyBTdG9wIGZyYW1lIHByb2Nlc3NpbmdcbiAgICAgIGlmIChwcm9jZXNzaW5nSW50ZXJ2YWwuY3VycmVudCkge1xuICAgICAgICBjbGVhckludGVydmFsKHByb2Nlc3NpbmdJbnRlcnZhbC5jdXJyZW50KTtcbiAgICAgICAgcHJvY2Vzc2luZ0ludGVydmFsLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgLy8gQ2xlYXIgdGhlIGNhbnZhcyB0byByZW1vdmUgYW55IG92ZXJsYXlzXG4gICAgICBpZiAoY2FudmFzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzUmVmLmN1cnJlbnQuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXNSZWYuY3VycmVudC53aWR0aCwgY2FudmFzUmVmLmN1cnJlbnQuaGVpZ2h0KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzU2hvd2luZykge1xuICAgICAgZGlzY29ubmVjdFdlYlNvY2tldCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBkaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgfTtcbiAgfSwgW2lzU2hvd2luZ10pO1xuXG4gIC8vIEZyYW1lIGNhcHR1cmUgYW5kIHByb2Nlc3NpbmdcbiAgY29uc3QgY2FwdHVyZUFuZFByb2Nlc3NGcmFtZSA9ICgpID0+IHtcbiAgICBpZiAoIXZpZGVvUmVmLmN1cnJlbnQgfHwgIWNhbnZhc1JlZi5jdXJyZW50IHx8ICFpc1ZpZGVvUmVhZHkgfHwgIXdzUmVmLmN1cnJlbnQpIHJldHVybjtcblxuICAgIGNvbnN0IHZpZGVvID0gdmlkZW9SZWYuY3VycmVudDtcbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgIC8vIE9ubHkgZHJhdyBvbiBjYW52YXMgaWYgV2ViU29ja2V0IGlzIGNvbm5lY3RlZFxuICAgIGlmICh3c1JlZi5jdXJyZW50ICYmIHdzUmVmLmN1cnJlbnQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgIC8vIENsZWFyIGNhbnZhc1xuICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgICAvLyBTYXZlIHRoZSBjdXJyZW50IGNvbnRleHQgc3RhdGVcbiAgICAgIGN0eC5zYXZlKCk7XG5cbiAgICAgIC8vIEZsaXAgdGhlIGNvbnRleHQgaG9yaXpvbnRhbGx5IHRvIG1pcnJvciB0aGUgdmlkZW9cbiAgICAgIGN0eC50cmFuc2xhdGUoY2FudmFzLndpZHRoLCAwKTtcbiAgICAgIGN0eC5zY2FsZSgtMSwgMSk7XG5cbiAgICAgIC8vIERyYXcgdmlkZW8gZnJhbWUgdG8gY2FudmFzIGF0IGhpZ2ggcmVzb2x1dGlvblxuICAgICAgY3R4LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcblxuICAgICAgLy8gUmVzdG9yZSB0aGUgY29udGV4dCBzdGF0ZVxuICAgICAgY3R4LnJlc3RvcmUoKTtcblxuICAgICAgLy8gQ29udmVydCBjYW52YXMgdG8gYmxvYiB3aXRoIGhpZ2ggcXVhbGl0eVxuICAgICAgY2FudmFzLnRvQmxvYigoYmxvYikgPT4ge1xuICAgICAgICBpZiAoYmxvYiAmJiB3c1JlZi5jdXJyZW50ICYmIHdzUmVmLmN1cnJlbnQucmVhZHlTdGF0ZSA9PT0gV2ViU29ja2V0Lk9QRU4pIHtcbiAgICAgICAgICAvLyBTZW5kIGZyYW1lIHRvIGJhY2tlbmRcbiAgICAgICAgICB3c1JlZi5jdXJyZW50LnNlbmQoYmxvYik7XG4gICAgICAgIH1cbiAgICAgIH0sICdpbWFnZS9qcGVnJywgMC45NSk7XG4gICAgfVxuICB9O1xuXG4gIC8vIERyYXcgcHJvY2Vzc2luZyByZXN1bHRzXG4gIGNvbnN0IGRyYXdSZXN1bHRzID0gKHJlc3VsdHMpID0+IHtcbiAgICBpZiAoIWNhbnZhc1JlZi5jdXJyZW50IHx8ICFyZXN1bHRzKSByZXR1cm47XG5cbiAgICBjb25zdCBjYW52YXMgPSBjYW52YXNSZWYuY3VycmVudDtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgIC8vIERyYXcgYm91bmRpbmcgYm94IGlmIGF2YWlsYWJsZVxuICAgIGlmIChyZXN1bHRzLmJvdW5kaW5nX2JveCAmJiBzaG93Qm91bmRpbmdCb3gpIHtcbiAgICAgIGNvbnN0IHsgeCwgeSwgd2lkdGgsIGhlaWdodCB9ID0gcmVzdWx0cy5ib3VuZGluZ19ib3g7XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSAncmdiYSgyNTUsIDAsIDAsIDAuOCknO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IDI7XG4gICAgICBjdHguc3Ryb2tlUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG5cbiAgICAvLyBEcmF3IGhlYWQgcG9zZSBpZiBhdmFpbGFibGVcbiAgICBpZiAocmVzdWx0cy5oZWFkX3Bvc2UgJiYgc2hvd0hlYWRQb3NlKSB7XG4gICAgICBjb25zdCB7IHBpdGNoLCB5YXcsIHJvbGwgfSA9IHJlc3VsdHMuaGVhZF9wb3NlO1xuICAgICAgLy8gRHJhdyBoZWFkIHBvc2UgdmlzdWFsaXphdGlvblxuICAgICAgZHJhd0hlYWRQb3NlKGN0eCwgY2FudmFzLCBwaXRjaCwgeWF3LCByb2xsKTtcbiAgICB9XG5cbiAgICAvLyBEcmF3IGZhY2UgbWFzayBpZiBhdmFpbGFibGVcbiAgICBpZiAocmVzdWx0cy5mYWNlX21hc2sgJiYgc2hvd01hc2spIHtcbiAgICAgIGNvbnN0IHsgcG9pbnRzIH0gPSByZXN1bHRzLmZhY2VfbWFzaztcbiAgICAgIGRyYXdGYWNlTWFzayhjdHgsIGNhbnZhcywgcG9pbnRzKTtcbiAgICB9XG5cbiAgICAvLyBEcmF3IHBhcmFtZXRlcnMgaWYgZW5hYmxlZFxuICAgIGlmIChzaG93UGFyYW1ldGVycykge1xuICAgICAgZHJhd1BhcmFtZXRlcnMoY3R4LCBjYW52YXMsIHJlc3VsdHMpO1xuICAgIH1cbiAgfTtcblxuICAvLyBTdGFydCBjYW1lcmEgd2l0aCBoaWdoZXN0IHJlc29sdXRpb25cbiAgY29uc3Qgc3RhcnRDYW1lcmEgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0RXJyb3JNZXNzYWdlKCcnKTtcbiAgICBzZXRJc1ZpZGVvUmVhZHkoZmFsc2UpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIENoZWNrIGlmIE1lZGlhRGV2aWNlcyBBUEkgaXMgc3VwcG9ydGVkXG4gICAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvci5tZWRpYURldmljZXMpIHtcbiAgICAgICAgLy8gVHJ5IHRvIHBvbHlmaWxsIHRoZSBNZWRpYURldmljZXMgQVBJXG4gICAgICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGdldFVzZXJNZWRpYSBwb2x5ZmlsbCBpZiBuZWVkZWRcbiAgICAgICAgaWYgKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSkge1xuICAgICAgICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhID0gZnVuY3Rpb24oY29uc3RyYWludHMpIHtcbiAgICAgICAgICAgIC8vIEZpcnN0IGdldCBhaG9sZCBvZiB0aGUgbGVnYWN5IGdldFVzZXJNZWRpYSwgaWYgcHJlc2VudFxuICAgICAgICAgICAgY29uc3QgZ2V0VXNlck1lZGlhID0gbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSB8fCBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTb21lIGJyb3dzZXJzIGp1c3QgZG9uJ3QgaW1wbGVtZW50IGl0IC0gcmV0dXJuIGEgcmVqZWN0ZWQgcHJvbWlzZSB3aXRoIGFuIGVycm9yXG4gICAgICAgICAgICBpZiAoIWdldFVzZXJNZWRpYSkge1xuICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdnZXRVc2VyTWVkaWEgaXMgbm90IGltcGxlbWVudGVkIGluIHRoaXMgYnJvd3NlcicpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3cmFwIHRoZSBjYWxsIHRvIHRoZSBvbGQgbmF2aWdhdG9yLmdldFVzZXJNZWRpYSB3aXRoIGEgUHJvbWlzZVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICBnZXRVc2VyTWVkaWEuY2FsbChuYXZpZ2F0b3IsIGNvbnN0cmFpbnRzLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDaGVjayBpZiB3ZSdyZSBvbiBIVFRQUyBvciBsb2NhbGhvc3RcbiAgICAgIGNvbnN0IGlzU2VjdXJlID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyB8fCBcbiAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgPT09ICdsb2NhbGhvc3QnIHx8IFxuICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJzEyNy4wLjAuMScgfHxcbiAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JztcbiAgICAgIFxuICAgICAgaWYgKCFpc1NlY3VyZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbWVyYSBhY2Nlc3MgcmVxdWlyZXMgSFRUUFMgb3IgbG9jYWxob3N0LiBQbGVhc2UgdXNlIEhUVFBTIG9yIHJ1biB0aGUgYXBwbGljYXRpb24gb24gbG9jYWxob3N0LicpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgY2FtZXJhIGFjY2VzcyB3aXRoIGhpZ2hlc3QgcmVzb2x1dGlvbi4uLicpO1xuXG4gICAgICAvLyBHZXQgaGlnaGVzdCByZXNvbHV0aW9uIGNvbnN0cmFpbnRzXG4gICAgICBjb25zdCBjb25zdHJhaW50cyA9IGF3YWl0IGdldEhpZ2hlc3RSZXNvbHV0aW9uQ29uc3RyYWludHMoKTtcbiAgICAgIGNvbnNvbGUubG9nKCdVc2luZyBjYW1lcmEgY29uc3RyYWludHM6JywgY29uc3RyYWludHMpO1xuXG4gICAgICBjb25zdCBtZWRpYVN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHtcbiAgICAgICAgLi4uY29uc3RyYWludHMsXG4gICAgICAgIGF1ZGlvOiBmYWxzZVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnNvbGUubG9nKCdIaWdoIHJlc29sdXRpb24gY2FtZXJhIGFjY2VzcyBncmFudGVkIScpO1xuICAgICAgc2V0U3RyZWFtKG1lZGlhU3RyZWFtKTtcblxuICAgICAgaWYgKHZpZGVvUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgdmlkZW9SZWYuY3VycmVudC5wbGF5c0lubGluZSA9IHRydWU7XG4gICAgICAgIHZpZGVvUmVmLmN1cnJlbnQubXV0ZWQgPSB0cnVlO1xuICAgICAgICB2aWRlb1JlZi5jdXJyZW50LmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgdmlkZW9SZWYuY3VycmVudC5zcmNPYmplY3QgPSBtZWRpYVN0cmVhbTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHZpZGVvUmVmLmN1cnJlbnQucGxheSgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdWaWRlbyBwbGF5aW5nIHN1Y2Nlc3NmdWxseSEnKTtcbiAgICAgICAgICBzZXRJc1ZpZGVvUmVhZHkodHJ1ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gU3RhcnQgZnJhbWUgcHJvY2Vzc2luZyBpZiBXZWJTb2NrZXQgaXMgY29ubmVjdGVkXG4gICAgICAgICAgaWYgKHdzU3RhdHVzID09PSAnY29ubmVjdGVkJykge1xuICAgICAgICAgICAgcHJvY2Vzc2luZ0ludGVydmFsLmN1cnJlbnQgPSBzZXRJbnRlcnZhbChjYXB0dXJlQW5kUHJvY2Vzc0ZyYW1lLCAzMyk7IC8vIH4zMGZwc1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAocGxheUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGxheWluZyB2aWRlbzonLCBwbGF5RXJyb3IpO1xuICAgICAgICAgIHNldEVycm9yTWVzc2FnZSgnVW5hYmxlIHRvIHN0YXJ0IHZpZGVvIHN0cmVhbS4gUGxlYXNlIHRyeSBhZ2Fpbi4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDYW1lcmEgYWNjZXNzIGVycm9yOicsIGVycm9yKTtcbiAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnQ2FtZXJhIGVycm9yOiAnO1xuICAgICAgXG4gICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ05vdEFsbG93ZWRFcnJvcicpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlICs9ICdDYW1lcmEgYWNjZXNzIHdhcyBkZW5pZWQuIFBsZWFzZSBhbGxvdyBjYW1lcmEgYWNjZXNzIGluIHlvdXIgYnJvd3NlciBzZXR0aW5ncy4nO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnTm90Rm91bmRFcnJvcicpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlICs9ICdObyBjYW1lcmEgZm91bmQuIFBsZWFzZSBjb25uZWN0IGEgY2FtZXJhIGFuZCB0cnkgYWdhaW4uJztcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ05vdFJlYWRhYmxlRXJyb3InKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSArPSAnQ2FtZXJhIGlzIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYXBwbGljYXRpb24uJztcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubmFtZSA9PT0gJ092ZXJjb25zdHJhaW5lZEVycm9yJykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgKz0gJ0NhbWVyYSBkb2VzIG5vdCBzdXBwb3J0IHRoZSByZXF1ZXN0ZWQgcmVzb2x1dGlvbi4nO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlID09PSAnZ2V0VXNlck1lZGlhIGlzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGlzIGJyb3dzZXInKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSArPSAnWW91ciBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgY2FtZXJhIGFjY2Vzcy4gUGxlYXNlIHRyeSB1c2luZyBhIG1vZGVybiBicm93c2VyIGxpa2UgQ2hyb21lLCBGaXJlZm94LCBvciBFZGdlLic7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlcnJvck1lc3NhZ2UgKz0gZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcic7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHNldEVycm9yTWVzc2FnZShlcnJvck1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzdG9wQ2FtZXJhID0gKCkgPT4ge1xuICAgIC8vIFN0b3AgYWxsIHRyYWNrcyBpbiB0aGUgc3RyZWFtXG4gICAgaWYgKHN0cmVhbSkge1xuICAgICAgc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2godHJhY2sgPT4gdHJhY2suc3RvcCgpKTtcbiAgICAgIHNldFN0cmVhbShudWxsKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYXIgdmlkZW8gc291cmNlXG4gICAgaWYgKHZpZGVvUmVmLmN1cnJlbnQpIHtcbiAgICAgIHZpZGVvUmVmLmN1cnJlbnQuc3JjT2JqZWN0ID0gbnVsbDtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYXIgcHJvY2Vzc2luZyBpbnRlcnZhbFxuICAgIGlmIChwcm9jZXNzaW5nSW50ZXJ2YWwuY3VycmVudCkge1xuICAgICAgY2xlYXJJbnRlcnZhbChwcm9jZXNzaW5nSW50ZXJ2YWwuY3VycmVudCk7XG4gICAgICBwcm9jZXNzaW5nSW50ZXJ2YWwuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIHNldElzVmlkZW9SZWFkeShmYWxzZSk7XG4gIH07XG5cbiAgLy8gU3RhcnQgY2FtZXJhIG9uIGNvbXBvbmVudCBtb3VudCBpZiBpc1Nob3dpbmcgaXMgdHJ1ZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpc1Nob3dpbmcpIHtcbiAgICAgIHN0YXJ0Q2FtZXJhKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0b3BDYW1lcmEoKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHN0b3BDYW1lcmEoKTtcbiAgICB9O1xuICB9LCBbaXNTaG93aW5nXSk7XG5cbiAgLy8gU2V0dXAgRlBTIGNvdW50ZXJcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIWlzU2hvd2luZykgcmV0dXJuO1xuICAgIFxuICAgIGZwc1RpbWVyUmVmLmN1cnJlbnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBzZXRGcHMocHJldkZwcyA9PiB7XG4gICAgICAgIC8vIFNpbXBsZSBtb2NrIGZvciBmcHMgY291bnRlclxuICAgICAgICBjb25zdCBuZXdGcHMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAyNTsgLy8gUmFuZG9tIGJldHdlZW4gMjUtMzUgZnBzXG4gICAgICAgIHJldHVybiBuZXdGcHM7XG4gICAgICB9KTtcbiAgICB9LCAxMDAwKTtcbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGZwc1RpbWVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChmcHNUaW1lclJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIGlmIChwcm9jZXNzaW5nSW50ZXJ2YWwuY3VycmVudCkge1xuICAgICAgICBjbGVhckludGVydmFsKHByb2Nlc3NpbmdJbnRlcnZhbC5jdXJyZW50KTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbaXNTaG93aW5nXSk7XG5cbiAgLy8gVXBkYXRlIGRpbWVuc2lvbnMgd2hlbiBjb250YWluZXIgc2l6ZSBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFpc1Nob3dpbmcpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB1cGRhdGVEaW1lbnNpb25zID0gKCkgPT4ge1xuICAgICAgaWYgKGNvbnRhaW5lclJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gY29udGFpbmVyUmVmLmN1cnJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHNldERpbWVuc2lvbnMoeyB3aWR0aCwgaGVpZ2h0IH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB1cGRhdGVEaW1lbnNpb25zKCk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHVwZGF0ZURpbWVuc2lvbnMpO1xuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdXBkYXRlRGltZW5zaW9ucyk7XG4gIH0sIFtpc1Nob3dpbmddKTtcblxuICAvLyBIYW5kbGUgdmlkZW8gZWxlbWVudCByZWFkeSBzdGF0ZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghaXNTaG93aW5nIHx8ICF2aWRlb1JlZi5jdXJyZW50IHx8ICFzdHJlYW0pIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB2aWRlbyA9IHZpZGVvUmVmLmN1cnJlbnQ7XG4gICAgXG4gICAgY29uc3QgaGFuZGxlTG9hZGVkTWV0YWRhdGEgPSAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygnVmlkZW8gbWV0YWRhdGEgbG9hZGVkJyk7XG4gICAgICBzZXRJc1ZpZGVvUmVhZHkodHJ1ZSk7XG4gICAgICBcbiAgICAgIC8vIEdldCB2aWRlbyBkaW1lbnNpb25zXG4gICAgICBjb25zdCB2aWRlb1dpZHRoID0gdmlkZW8udmlkZW9XaWR0aCB8fCA2NDA7XG4gICAgICBjb25zdCB2aWRlb0hlaWdodCA9IHZpZGVvLnZpZGVvSGVpZ2h0IHx8IDQ4MDtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFZpZGVvIGRpbWVuc2lvbnM6ICR7dmlkZW9XaWR0aH14JHt2aWRlb0hlaWdodH1gKTtcbiAgICAgIFxuICAgICAgLy8gU2V0dXAgY2FudmFzIGZvciBwcm9jZXNzaW5nXG4gICAgICBpZiAoY2FudmFzUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgLy8gU3RvcmUgYWN0dWFsIGRpbWVuc2lvbnMgZm9yIGNhcHR1cmVcbiAgICAgICAgY2FudmFzUmVmLmN1cnJlbnQud2lkdGggPSB2aWRlb1dpZHRoO1xuICAgICAgICBjYW52YXNSZWYuY3VycmVudC5oZWlnaHQgPSB2aWRlb0hlaWdodDtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBkaXNwbGF5IHNpemUgdG8gbWFpbnRhaW4gYXNwZWN0IHJhdGlvXG4gICAgICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gdmlkZW9XaWR0aCAvIHZpZGVvSGVpZ2h0O1xuICAgICAgICBjb25zdCBjb250YWluZXJXaWR0aCA9IGRpbWVuc2lvbnMud2lkdGg7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckhlaWdodCA9IGNvbnRhaW5lcldpZHRoIC8gYXNwZWN0UmF0aW87XG4gICAgICAgIFxuICAgICAgICBjYW52YXNSZWYuY3VycmVudC5zdHlsZS53aWR0aCA9IGAke2NvbnRhaW5lcldpZHRofXB4YDtcbiAgICAgICAgY2FudmFzUmVmLmN1cnJlbnQuc3R5bGUuaGVpZ2h0ID0gYCR7Y29udGFpbmVySGVpZ2h0fXB4YDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gU3RhcnQgcHJvY2Vzc2luZyBmcmFtZXNcbiAgICAgIHN0YXJ0UHJvY2Vzc2luZygpO1xuICAgICAgXG4gICAgICAvLyBOb3RpZnkgcGFyZW50IGNvbXBvbmVudCB0aGF0IGNhbWVyYSBpcyByZWFkeVxuICAgICAgaWYgKG9uQ2FtZXJhUmVhZHkpIHtcbiAgICAgICAgb25DYW1lcmFSZWFkeSh7XG4gICAgICAgICAgd2lkdGg6IHZpZGVvV2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiB2aWRlb0hlaWdodFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBoYW5kbGVMb2FkZWRNZXRhZGF0YSk7XG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHZpZGVvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgaGFuZGxlTG9hZGVkTWV0YWRhdGEpO1xuICAgIH07XG4gIH0sIFtzdHJlYW0sIGlzU2hvd2luZywgZGltZW5zaW9ucywgb25DYW1lcmFSZWFkeV0pO1xuXG4gIGNvbnN0IHN0YXJ0UHJvY2Vzc2luZyA9ICgpID0+IHtcbiAgICBpZiAoIWNhbnZhc1JlZi5jdXJyZW50IHx8ICF2aWRlb1JlZi5jdXJyZW50IHx8ICFpc1ZpZGVvUmVhZHkpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCB2aWRlbyA9IHZpZGVvUmVmLmN1cnJlbnQ7XG4gICAgY29uc3QgY2FudmFzID0gY2FudmFzUmVmLmN1cnJlbnQ7XG4gICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgXG4gICAgLy8gU3RhcnQgcHJvY2Vzc2luZyBmcmFtZXMgYXQgfjMwZnBzXG4gICAgcHJvY2Vzc2luZ0ludGVydmFsLmN1cnJlbnQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAodmlkZW8ucmVhZHlTdGF0ZSAhPT0gNCkgcmV0dXJuO1xuICAgICAgXG4gICAgICAvLyBDbGVhciBjYW52YXNcbiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIFxuICAgICAgLy8gU2F2ZSB0aGUgY3VycmVudCBjb250ZXh0IHN0YXRlXG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgXG4gICAgICAvLyBGbGlwIHRoZSBjb250ZXh0IGhvcml6b250YWxseSB0byBtaXJyb3IgdGhlIHZpZGVvXG4gICAgICBjdHgudHJhbnNsYXRlKGNhbnZhcy53aWR0aCwgMCk7XG4gICAgICBjdHguc2NhbGUoLTEsIDEpO1xuICAgICAgXG4gICAgICAvLyBEcmF3IHZpZGVvIGZyYW1lIHRvIGNhbnZhcyBhdCBoaWdoIHJlc29sdXRpb25cbiAgICAgIGN0eC5kcmF3SW1hZ2UodmlkZW8sIDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICBcbiAgICAgIC8vIFJlc3RvcmUgdGhlIGNvbnRleHQgc3RhdGVcbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIGZhY2UgZGV0ZWN0aW9uICg5MCUgY2hhbmNlIG9mIGZhY2UgZGV0ZWN0ZWQpXG4gICAgICBjb25zdCBmYWNlRGV0ZWN0ZWQgPSBNYXRoLnJhbmRvbSgpID4gMC4xO1xuICAgICAgXG4gICAgICAvLyBEcmF3IHZpc3VhbGl6YXRpb25zIGJhc2VkIG9uIGVuYWJsZWQgb3B0aW9uc1xuICAgICAgaWYgKGZhY2VEZXRlY3RlZCkge1xuICAgICAgICBpZiAoc2hvd0JvdW5kaW5nQm94KSB7XG4gICAgICAgICAgZHJhd0JvdW5kaW5nQm94KGN0eCwgY2FudmFzKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHNob3dIZWFkUG9zZSkge1xuICAgICAgICAgIGRyYXdIZWFkUG9zZShjdHgsIGNhbnZhcyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChzaG93TWFzaykge1xuICAgICAgICAgIGRyYXdGYWNlTWFzayhjdHgsIGNhbnZhcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRGlzcGxheSBwYXJhbWV0ZXJzIGlmIGVuYWJsZWRcbiAgICAgIGlmIChzaG93UGFyYW1ldGVycykge1xuICAgICAgICBkcmF3UGFyYW1ldGVycyhjdHgsIGNhbnZhcywgZmFjZURldGVjdGVkKTtcbiAgICAgIH1cbiAgICB9LCAzMyk7IC8vIH4zMGZwc1xuICB9O1xuICBcbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGRyYXcgYm91bmRpbmcgYm94XG4gIGNvbnN0IGRyYXdCb3VuZGluZ0JveCA9IChjdHgsIGNhbnZhcykgPT4ge1xuICAgIGNvbnN0IGNlbnRlclggPSBjYW52YXMud2lkdGggLyAyO1xuICAgIGNvbnN0IGNlbnRlclkgPSBjYW52YXMuaGVpZ2h0IC8gMjtcbiAgICBjb25zdCBib3hXaWR0aCA9IGNhbnZhcy53aWR0aCAqIDAuNjtcbiAgICBjb25zdCBib3hIZWlnaHQgPSBjYW52YXMuaGVpZ2h0ICogMC44O1xuICAgIFxuICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZ2JhKDI1NSwgMjU1LCAwLCAwLjcpJztcbiAgICBjdHgubGluZVdpZHRoID0gMjtcbiAgICBjdHguc3Ryb2tlUmVjdChcbiAgICAgIGNlbnRlclggLSBib3hXaWR0aC8yLCBcbiAgICAgIGNlbnRlclkgLSBib3hIZWlnaHQvMiwgXG4gICAgICBib3hXaWR0aCwgXG4gICAgICBib3hIZWlnaHRcbiAgICApO1xuICB9O1xuICBcbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGRyYXcgaGVhZCBwb3NlIGF4ZXNcbiAgY29uc3QgZHJhd0hlYWRQb3NlID0gKGN0eCwgY2FudmFzLCBwaXRjaCwgeWF3LCByb2xsKSA9PiB7XG4gICAgY29uc3QgY2VudGVyWCA9IGNhbnZhcy53aWR0aCAvIDI7XG4gICAgY29uc3QgY2VudGVyWSA9IGNhbnZhcy5oZWlnaHQgLyAyO1xuICAgIGNvbnN0IHRpbWUgPSBEYXRlLm5vdygpIC8gMTAwMDtcbiAgICBjb25zdCBsZW5ndGggPSBjYW52YXMud2lkdGggKiAwLjE7XG4gICAgXG4gICAgLy8gWCBheGlzIChyZWQpXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8oY2VudGVyWCwgY2VudGVyWSk7XG4gICAgY3R4LmxpbmVUbyhjZW50ZXJYICsgbGVuZ3RoICogTWF0aC5zaW4odGltZSksIGNlbnRlclkpO1xuICAgIGN0eC5zdHJva2VTdHlsZSA9ICdyZWQnO1xuICAgIGN0eC5saW5lV2lkdGggPSAzO1xuICAgIGN0eC5zdHJva2UoKTtcbiAgICBcbiAgICAvLyBZIGF4aXMgKGdyZWVuKVxuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgubW92ZVRvKGNlbnRlclgsIGNlbnRlclkpO1xuICAgIGN0eC5saW5lVG8oY2VudGVyWCwgY2VudGVyWSArIGxlbmd0aCAqIE1hdGguc2luKHRpbWUgKyAxKSk7XG4gICAgY3R4LnN0cm9rZVN0eWxlID0gJ2dyZWVuJztcbiAgICBjdHgubGluZVdpZHRoID0gMztcbiAgICBjdHguc3Ryb2tlKCk7XG4gICAgXG4gICAgLy8gWiBheGlzIChibHVlKVxuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgubW92ZVRvKGNlbnRlclgsIGNlbnRlclkpO1xuICAgIGN0eC5saW5lVG8oXG4gICAgICBjZW50ZXJYICsgbGVuZ3RoLzIgKiBNYXRoLnNpbih0aW1lICsgMiksIFxuICAgICAgY2VudGVyWSAtIGxlbmd0aC8yICogTWF0aC5jb3ModGltZSArIDIpXG4gICAgKTtcbiAgICBjdHguc3Ryb2tlU3R5bGUgPSAnYmx1ZSc7XG4gICAgY3R4LmxpbmVXaWR0aCA9IDM7XG4gICAgY3R4LnN0cm9rZSgpO1xuICB9O1xuICBcbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGRyYXcgZmFjZSBtYXNrXG4gIGNvbnN0IGRyYXdGYWNlTWFzayA9IChjdHgsIGNhbnZhcywgcG9pbnRzKSA9PiB7XG4gICAgY29uc3QgY2VudGVyWCA9IGNhbnZhcy53aWR0aCAvIDI7XG4gICAgY29uc3QgY2VudGVyWSA9IGNhbnZhcy5oZWlnaHQgLyAyO1xuICAgIGNvbnN0IHJhZGl1cyA9IE1hdGgubWluKGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCkgKiAwLjI7XG4gICAgXG4gICAgLy8gRHJhdyBtYXNrXG4gICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDAsIDI1NSwgMjU1LCAwLjIpJztcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4LmFyYyhjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXMsIDAsIE1hdGguUEkgKiAyKTtcbiAgICBjdHguZmlsbCgpO1xuICAgIFxuICAgIC8vIERyYXcgZXllc1xuICAgIGNvbnN0IGV5ZVJhZGl1cyA9IHJhZGl1cyAqIDAuMjtcbiAgICBjb25zdCBleWVPZmZzZXRYID0gcmFkaXVzICogMC4zO1xuICAgIGNvbnN0IGV5ZU9mZnNldFkgPSByYWRpdXMgKiAwLjE7XG4gICAgXG4gICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyknO1xuICAgIFxuICAgIC8vIExlZnQgZXllXG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5hcmMoY2VudGVyWCAtIGV5ZU9mZnNldFgsIGNlbnRlclkgLSBleWVPZmZzZXRZLCBleWVSYWRpdXMsIDAsIE1hdGguUEkgKiAyKTtcbiAgICBjdHguZmlsbCgpO1xuICAgIFxuICAgIC8vIFJpZ2h0IGV5ZVxuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHguYXJjKGNlbnRlclggKyBleWVPZmZzZXRYLCBjZW50ZXJZIC0gZXllT2Zmc2V0WSwgZXllUmFkaXVzLCAwLCBNYXRoLlBJICogMik7XG4gICAgY3R4LmZpbGwoKTtcbiAgfTtcbiAgXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBkcmF3IHBhcmFtZXRlcnNcbiAgY29uc3QgZHJhd1BhcmFtZXRlcnMgPSAoY3R4LCBjYW52YXMsIGZhY2VEZXRlY3RlZCkgPT4ge1xuICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAwLCAwLCAwLjcpJztcbiAgICBjdHguZmlsbFJlY3QoNSwgY2FudmFzLmhlaWdodCAtIDYwLCAxNTAsIDUwKTtcbiAgICBcbiAgICBjdHguZm9udCA9ICcxMnB4IEFyaWFsJztcbiAgICBjdHguZmlsbFN0eWxlID0gJ3doaXRlJztcbiAgICBjdHguZmlsbFRleHQoYFJlc29sdXRpb246ICR7Y2FudmFzLndpZHRofXgke2NhbnZhcy5oZWlnaHR9YCwgMTAsIGNhbnZhcy5oZWlnaHQgLSA0MCk7XG4gICAgY3R4LmZpbGxUZXh0KGBGUFM6ICR7ZnBzfWAsIDEwLCBjYW52YXMuaGVpZ2h0IC0gMjUpO1xuICAgIGN0eC5maWxsVGV4dChgRmFjZTogJHtmYWNlRGV0ZWN0ZWQgPyAnRGV0ZWN0ZWQnIDogJ05vdCBEZXRlY3RlZCd9YCwgMTAsIGNhbnZhcy5oZWlnaHQgLSAxMCk7XG4gIH07XG5cbiAgaWYgKCFpc1Nob3dpbmcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPGRpdiBcbiAgICAgIHJlZj17Y29udGFpbmVyUmVmfVxuICAgICAgc3R5bGU9e3sgXG4gICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgICB0b3A6ICc1MCUnLFxuICAgICAgICBsZWZ0OiAnNTAlJyxcbiAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKC01MCUsIC01MCUpJyxcbiAgICAgICAgd2lkdGg6ICczMHZ3JyxcbiAgICAgICAgaGVpZ2h0OiAnMzB2aCcsXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnOHB4JyxcbiAgICAgICAgYm94U2hhZG93OiAnMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4yKScsXG4gICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgICAgekluZGV4OiAxMDAwXG4gICAgICB9fVxuICAgID5cbiAgICAgIDx2aWRlb1xuICAgICAgICByZWY9e3ZpZGVvUmVmfVxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgb2JqZWN0Rml0OiAnY292ZXInLFxuICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlWCgtMSknLFxuICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgfX1cbiAgICAgICAgcGxheXNJbmxpbmVcbiAgICAgICAgbXV0ZWRcbiAgICAgICAgYXV0b1BsYXlcbiAgICAgIC8+XG4gICAgICA8Y2FudmFzXG4gICAgICAgIHJlZj17Y2FudmFzUmVmfVxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgekluZGV4OiAxLFxuICAgICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJyxcbiAgICAgICAgICBkaXNwbGF5OiBpc0xpbmtlZCA/ICdibG9jaycgOiAnbm9uZScgLy8gSGlkZSBjYW52YXMgd2hlbiBub3QgbGlua2VkXG4gICAgICAgIH19XG4gICAgICAvPlxuICAgICAgPGRpdiBzdHlsZT17e1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgdG9wOiAnMTBweCcsXG4gICAgICAgIHJpZ2h0OiAnMTBweCcsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgZ2FwOiAnMTBweCcsXG4gICAgICAgIHpJbmRleDogMlxuICAgICAgfX0+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXtvbkNsb3NlfVxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICBwYWRkaW5nOiAnOHB4IDEycHgnLFxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLCAwLCAwLCAwLjUpJyxcbiAgICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiAnYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UnXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIENsb3NlXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICBcbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0xpbmtlZCkge1xuICAgICAgICAgICAgICBkaXNjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25uZWN0V2ViU29ja2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfX1cbiAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgcGFkZGluZzogJzhweCAxMnB4JyxcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogaXNMaW5rZWQgPyAncmdiYSgyNTUsIDAsIDAsIDAuNyknIDogJ3JnYmEoMCwgMjU1LCAwLCAwLjcpJyxcbiAgICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiAnYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UnXG4gICAgICAgICAgfX1cbiAgICAgICAgPlxuICAgICAgICAgIHtpc0xpbmtlZCA/ICdVbmxpbmsnIDogJ0xpbmsnfVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICB7d3NTdGF0dXMgPT09ICdlcnJvcicgJiYgKFxuICAgICAgICA8ZGl2IHN0eWxlPXt7XG4gICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgdG9wOiAnNTBweCcsXG4gICAgICAgICAgcmlnaHQ6ICcxMHB4JyxcbiAgICAgICAgICBwYWRkaW5nOiAnOHB4IDEycHgnLFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjU1LCAwLCAwLCAwLjcpJyxcbiAgICAgICAgICBjb2xvcjogJ3doaXRlJyxcbiAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLFxuICAgICAgICAgIHpJbmRleDogMlxuICAgICAgICB9fT5cbiAgICAgICAgICBDb25uZWN0aW9uIEVycm9yOiB7ZXJyb3JNZXNzYWdlfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDYW1lcmFBY2Nlc3M7Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJnZXRIaWdoZXN0UmVzb2x1dGlvbkNvbnN0cmFpbnRzIiwiQ2FtZXJhQWNjZXNzIiwiaXNTaG93aW5nIiwib25DbG9zZSIsIm9uQ2FtZXJhUmVhZHkiLCJzaG93SGVhZFBvc2UiLCJzaG93Qm91bmRpbmdCb3giLCJzaG93TWFzayIsInNob3dQYXJhbWV0ZXJzIiwidmlkZW9SZWYiLCJjYW52YXNSZWYiLCJjb250YWluZXJSZWYiLCJ3c1JlZiIsInN0cmVhbSIsInNldFN0cmVhbSIsImVycm9yTWVzc2FnZSIsInNldEVycm9yTWVzc2FnZSIsImZwcyIsInNldEZwcyIsImZwc1RpbWVyUmVmIiwicHJvY2Vzc2luZ0ludGVydmFsIiwiZGltZW5zaW9ucyIsInNldERpbWVuc2lvbnMiLCJ3aWR0aCIsImhlaWdodCIsImlzVmlkZW9SZWFkeSIsInNldElzVmlkZW9SZWFkeSIsInByb2Nlc3NpbmdSZXN1bHRzIiwic2V0UHJvY2Vzc2luZ1Jlc3VsdHMiLCJmcmFtZVF1ZXVlIiwiaXNQcm9jZXNzaW5nIiwid3NTdGF0dXMiLCJzZXRXc1N0YXR1cyIsImlzTGlua2VkIiwic2V0SXNMaW5rZWQiLCJjb25uZWN0V2ViU29ja2V0IiwiY3VycmVudCIsInJlYWR5U3RhdGUiLCJXZWJTb2NrZXQiLCJPUEVOIiwiY29uc29sZSIsImxvZyIsIndzIiwiY29ubmVjdGlvblRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiZXJyb3IiLCJjbG9zZSIsIm9ub3BlbiIsImNsZWFyVGltZW91dCIsInNldEludGVydmFsIiwiY2FwdHVyZUFuZFByb2Nlc3NGcmFtZSIsIm9ubWVzc2FnZSIsImV2ZW50IiwicmVzdWx0IiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsImRyYXdSZXN1bHRzIiwib25lcnJvciIsIm9uY2xvc2UiLCJjb2RlIiwicmVhc29uIiwiY2xlYXJJbnRlcnZhbCIsImRpc2Nvbm5lY3RXZWJTb2NrZXQiLCJjdHgiLCJnZXRDb250ZXh0IiwiY2xlYXJSZWN0IiwidmlkZW8iLCJjYW52YXMiLCJzYXZlIiwidHJhbnNsYXRlIiwic2NhbGUiLCJkcmF3SW1hZ2UiLCJyZXN0b3JlIiwidG9CbG9iIiwiYmxvYiIsInNlbmQiLCJyZXN1bHRzIiwiYm91bmRpbmdfYm94IiwieCIsInkiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsInN0cm9rZVJlY3QiLCJoZWFkX3Bvc2UiLCJwaXRjaCIsInlhdyIsInJvbGwiLCJkcmF3SGVhZFBvc2UiLCJmYWNlX21hc2siLCJwb2ludHMiLCJkcmF3RmFjZU1hc2siLCJkcmF3UGFyYW1ldGVycyIsInN0YXJ0Q2FtZXJhIiwibmF2aWdhdG9yIiwibWVkaWFEZXZpY2VzIiwiZ2V0VXNlck1lZGlhIiwiY29uc3RyYWludHMiLCJ3ZWJraXRHZXRVc2VyTWVkaWEiLCJtb3pHZXRVc2VyTWVkaWEiLCJQcm9taXNlIiwicmVqZWN0IiwiRXJyb3IiLCJyZXNvbHZlIiwiY2FsbCIsImlzU2VjdXJlIiwid2luZG93IiwibG9jYXRpb24iLCJwcm90b2NvbCIsImhvc3RuYW1lIiwicHJvY2VzcyIsIm1lZGlhU3RyZWFtIiwiYXVkaW8iLCJwbGF5c0lubGluZSIsIm11dGVkIiwiYXV0b3BsYXkiLCJzcmNPYmplY3QiLCJwbGF5IiwicGxheUVycm9yIiwibmFtZSIsIm1lc3NhZ2UiLCJzdG9wQ2FtZXJhIiwiZ2V0VHJhY2tzIiwiZm9yRWFjaCIsInRyYWNrIiwic3RvcCIsInByZXZGcHMiLCJuZXdGcHMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ1cGRhdGVEaW1lbnNpb25zIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVMb2FkZWRNZXRhZGF0YSIsInZpZGVvV2lkdGgiLCJ2aWRlb0hlaWdodCIsImFzcGVjdFJhdGlvIiwiY29udGFpbmVyV2lkdGgiLCJjb250YWluZXJIZWlnaHQiLCJzdHlsZSIsInN0YXJ0UHJvY2Vzc2luZyIsImZhY2VEZXRlY3RlZCIsImRyYXdCb3VuZGluZ0JveCIsImNlbnRlclgiLCJjZW50ZXJZIiwiYm94V2lkdGgiLCJib3hIZWlnaHQiLCJ0aW1lIiwiRGF0ZSIsIm5vdyIsImxlbmd0aCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsInNpbiIsInN0cm9rZSIsImNvcyIsInJhZGl1cyIsIm1pbiIsImZpbGxTdHlsZSIsImFyYyIsIlBJIiwiZmlsbCIsImV5ZVJhZGl1cyIsImV5ZU9mZnNldFgiLCJleWVPZmZzZXRZIiwiZmlsbFJlY3QiLCJmb250IiwiZmlsbFRleHQiLCJkaXYiLCJyZWYiLCJwb3NpdGlvbiIsInRvcCIsImxlZnQiLCJ0cmFuc2Zvcm0iLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJSYWRpdXMiLCJib3hTaGFkb3ciLCJvdmVyZmxvdyIsInpJbmRleCIsIm9iamVjdEZpdCIsIm9wYWNpdHkiLCJhdXRvUGxheSIsInBvaW50ZXJFdmVudHMiLCJkaXNwbGF5IiwicmlnaHQiLCJnYXAiLCJidXR0b24iLCJvbkNsaWNrIiwicGFkZGluZyIsImNvbG9yIiwiYm9yZGVyIiwiY3Vyc29yIiwidHJhbnNpdGlvbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./pages/collected-dataset/components-gui/cameraAccess.js\n");

/***/ })

};
;