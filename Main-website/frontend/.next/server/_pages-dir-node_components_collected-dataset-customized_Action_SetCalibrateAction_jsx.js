"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "_pages-dir-node_components_collected-dataset-customized_Action_SetCalibrateAction_jsx";
exports.ids = ["_pages-dir-node_components_collected-dataset-customized_Action_SetCalibrateAction_jsx"];
exports.modules = {

/***/ "(pages-dir-node)/./components/collected-dataset-customized/Action/SetCalibrateAction.jsx":
/*!*******************************************************************************!*\
  !*** ./components/collected-dataset-customized/Action/SetCalibrateAction.jsx ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _CalibratePoints_jsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CalibratePoints.jsx */ \"(pages-dir-node)/./components/collected-dataset-customized/Action/CalibratePoints.jsx\");\n/* harmony import */ var _countSave_jsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./countSave.jsx */ \"(pages-dir-node)/./components/collected-dataset-customized/Action/countSave.jsx\");\n/* harmony import */ var _Helper_savefile__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../Helper/savefile */ \"(pages-dir-node)/./components/collected-dataset-customized/Helper/savefile.js\");\n// SetCalibrateAction.jsx\n// Handles the calibration sequence functionality\n\n\n\n\nclass SetCalibrateAction {\n    constructor(config){\n        // Main function to handle calibration sequence\n        this.handleSetCalibrate = async ()=>{\n            // Hide the TopBar before starting calibration\n            if (typeof this.toggleTopBar === 'function') {\n                this.toggleTopBar(false);\n            } else if (false) {}\n            this.setIsCapturing(true);\n            this.setProcessStatus('Starting calibration sequence...');\n            // Update parent component if available\n            if (this.onStatusUpdate) {\n                this.onStatusUpdate({\n                    processStatus: 'Starting calibration sequence...',\n                    isCapturing: true\n                });\n            }\n            // Give the component time to update\n            setTimeout(async ()=>{\n                try {\n                    const canvas = await this.waitForCanvas();\n                    if (!canvas) {\n                        throw new Error(\"Canvas not available\");\n                    }\n                    // Use canvas management system to enter fullscreen\n                    this.enterFullscreen();\n                    // Generate calibration points based on canvas size\n                    const points = (0,_CalibratePoints_jsx__WEBPACK_IMPORTED_MODULE_1__.generateCalibrationPoints)(canvas.width, canvas.height);\n                    if (!points || points.length === 0) {\n                        throw new Error(\"Failed to generate calibration points\");\n                    }\n                    // Create status indicator\n                    const statusIndicator = document.createElement('div');\n                    statusIndicator.className = 'calibrate-status-indicator';\n                    statusIndicator.style.cssText = `\n          position: fixed;\n          top: 20px;\n          right: 20px;\n          background-color: rgba(0, 102, 204, 0.9);\n          color: white;\n          font-size: 16px;\n          font-weight: bold;\n          padding: 10px 15px;\n          border-radius: 8px;\n          z-index: 10000;\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n        `;\n                    statusIndicator.textContent = 'Calibration: Initializing...';\n                    document.body.appendChild(statusIndicator);\n                    // Process each calibration point\n                    let successCount = 0;\n                    for(let i = 0; i < points.length; i++){\n                        const point = points[i];\n                        // Update status displays\n                        statusIndicator.textContent = `Calibration: Point ${i + 1}/${points.length}`;\n                        this.setProcessStatus(`Processing calibration point ${i + 1}/${points.length}`);\n                        // Clear canvas with white background using canvas management system\n                        this.clearCanvas();\n                        // Draw the calibration point using canvas management system\n                        const radius = 12; // Standard size for consistency\n                        this.drawDot(point.x, point.y, radius);\n                        // Create redraw interval to ensure dot stays visible\n                        const redrawInterval = setInterval(()=>{\n                            this.drawDot(point.x, point.y, radius);\n                        }, 200);\n                        // Remove any existing countdown elements\n                        const existingCountdowns = document.querySelectorAll('.dot-countdown, .calibrate-countdown');\n                        existingCountdowns.forEach((el)=>{\n                            if (el.parentNode) el.parentNode.removeChild(el);\n                        });\n                        // Create custom countdown element positioned at the same location as the dot\n                        const countdownElement = document.createElement('div');\n                        countdownElement.className = 'dot-countdown';\n                        countdownElement.style.cssText = `\n            position: fixed;\n            left: ${point.x}px;\n            top: ${point.y}px;\n            transform: translate(-50%, -50%);\n            color: red;\n            font-size: 24px;\n            font-weight: bold;\n            text-shadow: 0 0 10px white, 0 0 20px white;\n            z-index: 10000;\n            background-color: rgba(255, 255, 255, 0.9);\n            border: 2px solid red;\n            border-radius: 50%;\n            width: 48px;\n            height: 48px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);\n          `;\n                        document.body.appendChild(countdownElement);\n                        try {\n                            // Manual countdown\n                            for(let count = 3; count > 0; count--){\n                                countdownElement.textContent = count;\n                                this.setProcessStatus(`Point ${i + 1}/${points.length}: Countdown ${count}`);\n                                // Force redraw to ensure dot stays visible\n                                this.drawDot(point.x, point.y, radius);\n                                await new Promise((resolve)=>setTimeout(resolve, 800));\n                                // Redraw again halfway through the wait\n                                this.drawDot(point.x, point.y, radius);\n                            }\n                            // Show checkmark\n                            countdownElement.textContent = \"âœ“\";\n                            this.drawDot(point.x, point.y, radius);\n                            // Remove countdown element immediately\n                            if (countdownElement.parentNode) {\n                                countdownElement.parentNode.removeChild(countdownElement);\n                            }\n                            // Make sure dot is still visible\n                            this.drawDot(point.x, point.y, radius);\n                            // Capture images at this point\n                            console.log(`Capturing calibration point ${i + 1}/${points.length} at (${point.x}, ${point.y})`);\n                            const captureResult = await (0,_Helper_savefile__WEBPACK_IMPORTED_MODULE_3__.captureImagesAtPoint)({\n                                point: point,\n                                captureCount: this.captureCounter,\n                                canvasRef: {\n                                    current: canvas\n                                },\n                                setCaptureCount: this.setCaptureCounter,\n                                showCapturePreview: _countSave_jsx__WEBPACK_IMPORTED_MODULE_2__.showCapturePreview\n                            });\n                            if (captureResult && (captureResult.screenImage || captureResult.success)) {\n                                successCount++;\n                            }\n                            // Wait a moment before clearing to ensure capture is complete\n                            await new Promise((resolve)=>setTimeout(resolve, 500));\n                            // Clear the dot after capture using canvas management system\n                            this.clearCanvas();\n                            // Wait between points\n                            await new Promise((resolve)=>setTimeout(resolve, 1200));\n                        } catch (error) {\n                            console.error(`Error processing calibration point ${i + 1}:`, error);\n                        } finally{\n                            // Clean up countdown if it still exists\n                            if (countdownElement.parentNode) {\n                                countdownElement.parentNode.removeChild(countdownElement);\n                            }\n                            // Clear redraw interval\n                            clearInterval(redrawInterval);\n                        }\n                    }\n                    // Calibration complete\n                    if (statusIndicator) {\n                        statusIndicator.textContent = `Calibration complete: ${successCount}/${points.length} points`;\n                    }\n                    this.setProcessStatus(`Calibration completed: ${successCount}/${points.length} points captured`);\n                    // Remove status indicator after delay\n                    setTimeout(()=>{\n                        if (statusIndicator.parentNode) {\n                            statusIndicator.parentNode.removeChild(statusIndicator);\n                        }\n                    }, 3000);\n                } catch (error) {\n                    console.error(\"Calibration error:\", error);\n                    this.setProcessStatus(`Calibration error: ${error.message}`);\n                } finally{\n                    // Exit fullscreen and restore canvas using canvas management system\n                    this.exitFullscreen();\n                    this.setIsCapturing(false);\n                    // Show TopBar again after a delay\n                    setTimeout(()=>{\n                        if (typeof this.toggleTopBar === 'function') {\n                            this.toggleTopBar(true);\n                        } else if (false) {}\n                    }, 1000);\n                }\n            }, 200);\n        };\n        // Required properties\n        this.canvasRef = config.canvasRef;\n        this.toggleTopBar = config.toggleTopBar;\n        this.setIsCapturing = config.setIsCapturing;\n        this.setProcessStatus = config.setProcessStatus;\n        this.setCurrentDot = config.setCurrentDot;\n        this.triggerCameraAccess = config.triggerCameraAccess;\n        this.onStatusUpdate = config.onStatusUpdate;\n        this.saveImageToServer = config.saveImageToServer;\n        this.setCaptureCounter = config.setCaptureCounter;\n        this.captureCounter = config.captureCounter;\n        // Get canvas manager and utilities from global scope (from actionButton.js)\n        this.canvasManager =  false ? 0 : null;\n        this.canvasUtils =  false ? 0 : null;\n    }\n    // Get or create canvas using the canvas management system from actionButton.js\n    getCanvas() {\n        // First try to use canvasUtils from actionButton.js\n        if (this.canvasUtils && typeof this.canvasUtils.getCanvas === 'function') {\n            return this.canvasUtils.getCanvas();\n        }\n        // Fallback to canvasManager\n        if (this.canvasManager && typeof this.canvasManager.getCanvas === 'function') {\n            return this.canvasManager.getCanvas() || this.canvasManager.createCanvas();\n        }\n        // Fallback to canvasRef if canvasManager not available\n        return this.canvasRef?.current || document.querySelector('#tracking-canvas');\n    }\n    // Enter fullscreen using the canvas management system\n    enterFullscreen() {\n        if (this.canvasUtils && typeof this.canvasUtils.enterFullscreen === 'function') {\n            return this.canvasUtils.enterFullscreen();\n        }\n        if (this.canvasManager && typeof this.canvasManager.enterFullscreen === 'function') {\n            this.canvasManager.enterFullscreen();\n            return this.canvasManager.getCanvas();\n        }\n        // Fallback: manually enter fullscreen\n        const canvas = this.getCanvas();\n        if (canvas) {\n            document.body.appendChild(canvas);\n            canvas.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        z-index: 99999;\n        background-color: white;\n        border: none;\n        display: block;\n        opacity: 1;\n        pointer-events: auto;\n        margin: 0;\n        padding: 0;\n        box-sizing: border-box;\n      `;\n            canvas.width = window.innerWidth;\n            canvas.height = window.innerHeight;\n            // Clear with white background\n            const ctx = canvas.getContext('2d');\n            ctx.fillStyle = 'white';\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n        }\n        return canvas;\n    }\n    // Exit fullscreen using the canvas management system\n    exitFullscreen() {\n        if (this.canvasUtils && typeof this.canvasUtils.exitFullscreen === 'function') {\n            return this.canvasUtils.exitFullscreen();\n        }\n        if (this.canvasManager && typeof this.canvasManager.exitFullscreen === 'function') {\n            this.canvasManager.exitFullscreen();\n            return this.canvasManager.getCanvas();\n        }\n        // Fallback: manually exit fullscreen\n        const canvas = this.getCanvas();\n        if (canvas) {\n            const container = document.querySelector('.canvas-container') || document.querySelector('.main-content') || document.body;\n            container.appendChild(canvas);\n            canvas.style.position = 'relative';\n            canvas.style.top = '';\n            canvas.style.left = '';\n            canvas.style.width = '100%';\n            canvas.style.height = '100%';\n            canvas.style.zIndex = '';\n            canvas.style.backgroundColor = 'white';\n        }\n        return canvas;\n    }\n    // Clear canvas using the canvas management system\n    clearCanvas() {\n        if (this.canvasUtils && typeof this.canvasUtils.clear === 'function') {\n            this.canvasUtils.clear();\n            return;\n        }\n        if (this.canvasManager && typeof this.canvasManager.clear === 'function') {\n            this.canvasManager.clear();\n            return;\n        }\n        // Fallback: manually clear canvas\n        const canvas = this.getCanvas();\n        if (canvas) {\n            const ctx = canvas.getContext('2d');\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            ctx.fillStyle = 'white';\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n        }\n    }\n    // Draw dot using the canvas management system\n    drawDot(x, y, radius = 12) {\n        if (this.canvasUtils && typeof this.canvasUtils.drawDot === 'function') {\n            return this.canvasUtils.drawDot(x, y, radius);\n        }\n        // Fallback: manually draw dot\n        const canvas = this.getCanvas();\n        if (canvas) {\n            const ctx = canvas.getContext('2d');\n            (0,_countSave_jsx__WEBPACK_IMPORTED_MODULE_2__.drawRedDot)(ctx, x, y, radius, false);\n            return true;\n        }\n        return false;\n    }\n    // Wait until canvas is fully ready\n    async waitForCanvas(maxTries = 20, interval = 100) {\n        for(let i = 0; i < maxTries; i++){\n            const canvas = this.getCanvas();\n            if (canvas && canvas.width > 0 && canvas.height > 0) {\n                return canvas;\n            }\n            await new Promise((resolve)=>setTimeout(resolve, interval));\n        }\n        throw new Error(\"Canvas not ready after multiple attempts\");\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SetCalibrateAction);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1ub2RlKS8uL2NvbXBvbmVudHMvY29sbGVjdGVkLWRhdGFzZXQtY3VzdG9taXplZC9BY3Rpb24vU2V0Q2FsaWJyYXRlQWN0aW9uLmpzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSx5QkFBeUI7QUFDekIsaURBQWlEO0FBRXZCO0FBQ3dDO0FBQ2E7QUFDckI7QUFFMUQsTUFBTU07SUFDSkMsWUFBWUMsTUFBTSxDQUFFO1FBMkpwQiwrQ0FBK0M7YUFDL0NDLHFCQUFxQjtZQUNuQiw4Q0FBOEM7WUFDOUMsSUFBSSxPQUFPLElBQUksQ0FBQ0MsWUFBWSxLQUFLLFlBQVk7Z0JBQzNDLElBQUksQ0FBQ0EsWUFBWSxDQUFDO1lBQ3BCLE9BQU8sSUFBSSxLQUFvRCxFQUFFLEVBRWhFO1lBRUQsSUFBSSxDQUFDRSxjQUFjLENBQUM7WUFDcEIsSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQztZQUV0Qix1Q0FBdUM7WUFDdkMsSUFBSSxJQUFJLENBQUNDLGNBQWMsRUFBRTtnQkFDdkIsSUFBSSxDQUFDQSxjQUFjLENBQUM7b0JBQ2xCQyxlQUFlO29CQUNmQyxhQUFhO2dCQUNmO1lBQ0Y7WUFFQSxvQ0FBb0M7WUFDcENDLFdBQVc7Z0JBQ1QsSUFBSTtvQkFDRixNQUFNQyxTQUFTLE1BQU0sSUFBSSxDQUFDQyxhQUFhO29CQUN2QyxJQUFJLENBQUNELFFBQVE7d0JBQ1gsTUFBTSxJQUFJRSxNQUFNO29CQUNsQjtvQkFFQSxtREFBbUQ7b0JBQ25ELElBQUksQ0FBQ0MsZUFBZTtvQkFFcEIsbURBQW1EO29CQUNuRCxNQUFNQyxTQUFTckIsK0VBQXlCQSxDQUFDaUIsT0FBT0ssS0FBSyxFQUFFTCxPQUFPTSxNQUFNO29CQUVwRSxJQUFJLENBQUNGLFVBQVVBLE9BQU9HLE1BQU0sS0FBSyxHQUFHO3dCQUNsQyxNQUFNLElBQUlMLE1BQU07b0JBQ2xCO29CQUVBLDBCQUEwQjtvQkFDMUIsTUFBTU0sa0JBQWtCQyxTQUFTQyxhQUFhLENBQUM7b0JBQy9DRixnQkFBZ0JH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QU8sSUFBSSxDQUFDQSxXQUFXLENBQUNsQyxPQUFPLEtBQUssWUFBWTtZQUN0RSxPQUFPLElBQUksQ0FBQ2tDLFdBQVcsQ0FBQ2xDLE9BQU8sQ0FBQ0MsR0FBR0MsR0FBR0g7UUFDeEM7UUFFQSw4QkFBOEI7UUFDOUIsTUFBTXJCLFNBQVMsSUFBSSxDQUFDeUQsU0FBUztRQUM3QixJQUFJekQsUUFBUTtZQUNWLE1BQU04RCxNQUFNOUQsT0FBTytELFVBQVUsQ0FBQztZQUM5Qi9FLDBEQUFVQSxDQUFDOEUsS0FBS3ZDLEdBQUdDLEdBQUdILFFBQVE7WUFDOUIsT0FBTztRQUNUO1FBQ0EsT0FBTztJQUNUO0lBRUEsbUNBQW1DO0lBQ25DLE1BQU1wQixjQUFjeUUsV0FBVyxFQUFFLEVBQUVDLFdBQVcsR0FBRyxFQUFFO1FBQ2pELElBQUssSUFBSXpELElBQUksR0FBR0EsSUFBSXdELFVBQVV4RCxJQUFLO1lBQ2pDLE1BQU1sQixTQUFTLElBQUksQ0FBQ3lELFNBQVM7WUFDN0IsSUFBSXpELFVBQVVBLE9BQU9LLEtBQUssR0FBRyxLQUFLTCxPQUFPTSxNQUFNLEdBQUcsR0FBRztnQkFDbkQsT0FBT047WUFDVDtZQUNBLE1BQU0sSUFBSW1DLFFBQVFDLENBQUFBLFVBQVdyQyxXQUFXcUMsU0FBU3VDO1FBQ25EO1FBQ0EsTUFBTSxJQUFJekUsTUFBTTtJQUNsQjtBQWdORjtBQUVBLGlFQUFlZCxrQkFBa0JBLEVBQUMiLCJzb3VyY2VzIjpbIi9hcHAvY29tcG9uZW50cy9jb2xsZWN0ZWQtZGF0YXNldC1jdXN0b21pemVkL0FjdGlvbi9TZXRDYWxpYnJhdGVBY3Rpb24uanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFNldENhbGlicmF0ZUFjdGlvbi5qc3hcbi8vIEhhbmRsZXMgdGhlIGNhbGlicmF0aW9uIHNlcXVlbmNlIGZ1bmN0aW9uYWxpdHlcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IGdlbmVyYXRlQ2FsaWJyYXRpb25Qb2ludHMgfSBmcm9tICcuL0NhbGlicmF0ZVBvaW50cy5qc3gnO1xuaW1wb3J0IHsgZHJhd1JlZERvdCwgcnVuQ291bnRkb3duLCBzaG93Q2FwdHVyZVByZXZpZXcgfSBmcm9tICcuL2NvdW50U2F2ZS5qc3gnO1xuaW1wb3J0IHsgY2FwdHVyZUltYWdlc0F0UG9pbnQgfSBmcm9tICcuLi9IZWxwZXIvc2F2ZWZpbGUnO1xuXG5jbGFzcyBTZXRDYWxpYnJhdGVBY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAvLyBSZXF1aXJlZCBwcm9wZXJ0aWVzXG4gICAgdGhpcy5jYW52YXNSZWYgPSBjb25maWcuY2FudmFzUmVmO1xuICAgIHRoaXMudG9nZ2xlVG9wQmFyID0gY29uZmlnLnRvZ2dsZVRvcEJhcjtcbiAgICB0aGlzLnNldElzQ2FwdHVyaW5nID0gY29uZmlnLnNldElzQ2FwdHVyaW5nO1xuICAgIHRoaXMuc2V0UHJvY2Vzc1N0YXR1cyA9IGNvbmZpZy5zZXRQcm9jZXNzU3RhdHVzO1xuICAgIHRoaXMuc2V0Q3VycmVudERvdCA9IGNvbmZpZy5zZXRDdXJyZW50RG90O1xuICAgIHRoaXMudHJpZ2dlckNhbWVyYUFjY2VzcyA9IGNvbmZpZy50cmlnZ2VyQ2FtZXJhQWNjZXNzO1xuICAgIHRoaXMub25TdGF0dXNVcGRhdGUgPSBjb25maWcub25TdGF0dXNVcGRhdGU7XG4gICAgdGhpcy5zYXZlSW1hZ2VUb1NlcnZlciA9IGNvbmZpZy5zYXZlSW1hZ2VUb1NlcnZlcjtcbiAgICB0aGlzLnNldENhcHR1cmVDb3VudGVyID0gY29uZmlnLnNldENhcHR1cmVDb3VudGVyO1xuICAgIHRoaXMuY2FwdHVyZUNvdW50ZXIgPSBjb25maWcuY2FwdHVyZUNvdW50ZXI7XG4gICAgXG4gICAgLy8gR2V0IGNhbnZhcyBtYW5hZ2VyIGFuZCB1dGlsaXRpZXMgZnJvbSBnbG9iYWwgc2NvcGUgKGZyb20gYWN0aW9uQnV0dG9uLmpzKVxuICAgIHRoaXMuY2FudmFzTWFuYWdlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmNhbnZhc01hbmFnZXIgOiBudWxsO1xuICAgIHRoaXMuY2FudmFzVXRpbHMgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5jYW52YXNVdGlscyA6IG51bGw7XG4gIH1cblxuICAvLyBHZXQgb3IgY3JlYXRlIGNhbnZhcyB1c2luZyB0aGUgY2FudmFzIG1hbmFnZW1lbnQgc3lzdGVtIGZyb20gYWN0aW9uQnV0dG9uLmpzXG4gIGdldENhbnZhcygpIHtcbiAgICAvLyBGaXJzdCB0cnkgdG8gdXNlIGNhbnZhc1V0aWxzIGZyb20gYWN0aW9uQnV0dG9uLmpzXG4gICAgaWYgKHRoaXMuY2FudmFzVXRpbHMgJiYgdHlwZW9mIHRoaXMuY2FudmFzVXRpbHMuZ2V0Q2FudmFzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYW52YXNVdGlscy5nZXRDYW52YXMoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgdG8gY2FudmFzTWFuYWdlclxuICAgIGlmICh0aGlzLmNhbnZhc01hbmFnZXIgJiYgdHlwZW9mIHRoaXMuY2FudmFzTWFuYWdlci5nZXRDYW52YXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhbnZhc01hbmFnZXIuZ2V0Q2FudmFzKCkgfHwgdGhpcy5jYW52YXNNYW5hZ2VyLmNyZWF0ZUNhbnZhcygpO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjayB0byBjYW52YXNSZWYgaWYgY2FudmFzTWFuYWdlciBub3QgYXZhaWxhYmxlXG4gICAgcmV0dXJuIHRoaXMuY2FudmFzUmVmPy5jdXJyZW50IHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0cmFja2luZy1jYW52YXMnKTtcbiAgfVxuXG4gIC8vIEVudGVyIGZ1bGxzY3JlZW4gdXNpbmcgdGhlIGNhbnZhcyBtYW5hZ2VtZW50IHN5c3RlbVxuICBlbnRlckZ1bGxzY3JlZW4oKSB7XG4gICAgaWYgKHRoaXMuY2FudmFzVXRpbHMgJiYgdHlwZW9mIHRoaXMuY2FudmFzVXRpbHMuZW50ZXJGdWxsc2NyZWVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYW52YXNVdGlscy5lbnRlckZ1bGxzY3JlZW4oKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMuY2FudmFzTWFuYWdlciAmJiB0eXBlb2YgdGhpcy5jYW52YXNNYW5hZ2VyLmVudGVyRnVsbHNjcmVlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5jYW52YXNNYW5hZ2VyLmVudGVyRnVsbHNjcmVlbigpO1xuICAgICAgcmV0dXJuIHRoaXMuY2FudmFzTWFuYWdlci5nZXRDYW52YXMoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2s6IG1hbnVhbGx5IGVudGVyIGZ1bGxzY3JlZW5cbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLmdldENhbnZhcygpO1xuICAgIGlmIChjYW52YXMpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKTtcbiAgICAgIGNhbnZhcy5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgd2lkdGg6IDEwMHZ3O1xuICAgICAgICBoZWlnaHQ6IDEwMHZoO1xuICAgICAgICB6LWluZGV4OiA5OTk5OTtcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG4gICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIHBhZGRpbmc6IDA7XG4gICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICBgO1xuICAgICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBjYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgXG4gICAgICAvLyBDbGVhciB3aXRoIHdoaXRlIGJhY2tncm91bmRcbiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgY3R4LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICBjdHguZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbnZhcztcbiAgfVxuXG4gIC8vIEV4aXQgZnVsbHNjcmVlbiB1c2luZyB0aGUgY2FudmFzIG1hbmFnZW1lbnQgc3lzdGVtXG4gIGV4aXRGdWxsc2NyZWVuKCkge1xuICAgIGlmICh0aGlzLmNhbnZhc1V0aWxzICYmIHR5cGVvZiB0aGlzLmNhbnZhc1V0aWxzLmV4aXRGdWxsc2NyZWVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYW52YXNVdGlscy5leGl0RnVsbHNjcmVlbigpO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5jYW52YXNNYW5hZ2VyICYmIHR5cGVvZiB0aGlzLmNhbnZhc01hbmFnZXIuZXhpdEZ1bGxzY3JlZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuY2FudmFzTWFuYWdlci5leGl0RnVsbHNjcmVlbigpO1xuICAgICAgcmV0dXJuIHRoaXMuY2FudmFzTWFuYWdlci5nZXRDYW52YXMoKTtcbiAgICB9XG4gICAgXG4gICAgLy8gRmFsbGJhY2s6IG1hbnVhbGx5IGV4aXQgZnVsbHNjcmVlblxuICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZ2V0Q2FudmFzKCk7XG4gICAgaWYgKGNhbnZhcykge1xuICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbnZhcy1jb250YWluZXInKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWNvbnRlbnQnKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keTtcbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xuICAgICAgY2FudmFzLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgIGNhbnZhcy5zdHlsZS50b3AgPSAnJztcbiAgICAgIGNhbnZhcy5zdHlsZS5sZWZ0ID0gJyc7XG4gICAgICBjYW52YXMuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICBjYW52YXMuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgY2FudmFzLnN0eWxlLnpJbmRleCA9ICcnO1xuICAgICAgY2FudmFzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd3aGl0ZSc7XG4gICAgfVxuICAgIHJldHVybiBjYW52YXM7XG4gIH1cblxuICAvLyBDbGVhciBjYW52YXMgdXNpbmcgdGhlIGNhbnZhcyBtYW5hZ2VtZW50IHN5c3RlbVxuICBjbGVhckNhbnZhcygpIHtcbiAgICBpZiAodGhpcy5jYW52YXNVdGlscyAmJiB0eXBlb2YgdGhpcy5jYW52YXNVdGlscy5jbGVhciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhpcy5jYW52YXNVdGlscy5jbGVhcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5jYW52YXNNYW5hZ2VyICYmIHR5cGVvZiB0aGlzLmNhbnZhc01hbmFnZXIuY2xlYXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMuY2FudmFzTWFuYWdlci5jbGVhcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjazogbWFudWFsbHkgY2xlYXIgY2FudmFzXG4gICAgY29uc3QgY2FudmFzID0gdGhpcy5nZXRDYW52YXMoKTtcbiAgICBpZiAoY2FudmFzKSB7XG4gICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgfVxuICB9XG5cbiAgLy8gRHJhdyBkb3QgdXNpbmcgdGhlIGNhbnZhcyBtYW5hZ2VtZW50IHN5c3RlbVxuICBkcmF3RG90KHgsIHksIHJhZGl1cyA9IDEyKSB7XG4gICAgaWYgKHRoaXMuY2FudmFzVXRpbHMgJiYgdHlwZW9mIHRoaXMuY2FudmFzVXRpbHMuZHJhd0RvdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHRoaXMuY2FudmFzVXRpbHMuZHJhd0RvdCh4LCB5LCByYWRpdXMpO1xuICAgIH1cbiAgICBcbiAgICAvLyBGYWxsYmFjazogbWFudWFsbHkgZHJhdyBkb3RcbiAgICBjb25zdCBjYW52YXMgPSB0aGlzLmdldENhbnZhcygpO1xuICAgIGlmIChjYW52YXMpIHtcbiAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgZHJhd1JlZERvdChjdHgsIHgsIHksIHJhZGl1cywgZmFsc2UpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFdhaXQgdW50aWwgY2FudmFzIGlzIGZ1bGx5IHJlYWR5XG4gIGFzeW5jIHdhaXRGb3JDYW52YXMobWF4VHJpZXMgPSAyMCwgaW50ZXJ2YWwgPSAxMDApIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heFRyaWVzOyBpKyspIHtcbiAgICAgIGNvbnN0IGNhbnZhcyA9IHRoaXMuZ2V0Q2FudmFzKCk7XG4gICAgICBpZiAoY2FudmFzICYmIGNhbnZhcy53aWR0aCA+IDAgJiYgY2FudmFzLmhlaWdodCA+IDApIHtcbiAgICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBpbnRlcnZhbCkpO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW52YXMgbm90IHJlYWR5IGFmdGVyIG11bHRpcGxlIGF0dGVtcHRzXCIpO1xuICB9XG5cbiAgLy8gTWFpbiBmdW5jdGlvbiB0byBoYW5kbGUgY2FsaWJyYXRpb24gc2VxdWVuY2VcbiAgaGFuZGxlU2V0Q2FsaWJyYXRlID0gYXN5bmMgKCkgPT4ge1xuICAgIC8vIEhpZGUgdGhlIFRvcEJhciBiZWZvcmUgc3RhcnRpbmcgY2FsaWJyYXRpb25cbiAgICBpZiAodHlwZW9mIHRoaXMudG9nZ2xlVG9wQmFyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzLnRvZ2dsZVRvcEJhcihmYWxzZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cudG9nZ2xlVG9wQmFyKSB7XG4gICAgICB3aW5kb3cudG9nZ2xlVG9wQmFyKGZhbHNlKTtcbiAgICB9XG4gICAgXG4gICAgdGhpcy5zZXRJc0NhcHR1cmluZyh0cnVlKTtcbiAgICB0aGlzLnNldFByb2Nlc3NTdGF0dXMoJ1N0YXJ0aW5nIGNhbGlicmF0aW9uIHNlcXVlbmNlLi4uJyk7XG4gICAgXG4gICAgLy8gVXBkYXRlIHBhcmVudCBjb21wb25lbnQgaWYgYXZhaWxhYmxlXG4gICAgaWYgKHRoaXMub25TdGF0dXNVcGRhdGUpIHtcbiAgICAgIHRoaXMub25TdGF0dXNVcGRhdGUoe1xuICAgICAgICBwcm9jZXNzU3RhdHVzOiAnU3RhcnRpbmcgY2FsaWJyYXRpb24gc2VxdWVuY2UuLi4nLFxuICAgICAgICBpc0NhcHR1cmluZzogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEdpdmUgdGhlIGNvbXBvbmVudCB0aW1lIHRvIHVwZGF0ZVxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gYXdhaXQgdGhpcy53YWl0Rm9yQ2FudmFzKCk7XG4gICAgICAgIGlmICghY2FudmFzKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FudmFzIG5vdCBhdmFpbGFibGVcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVc2UgY2FudmFzIG1hbmFnZW1lbnQgc3lzdGVtIHRvIGVudGVyIGZ1bGxzY3JlZW5cbiAgICAgICAgdGhpcy5lbnRlckZ1bGxzY3JlZW4oKTtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBjYWxpYnJhdGlvbiBwb2ludHMgYmFzZWQgb24gY2FudmFzIHNpemVcbiAgICAgICAgY29uc3QgcG9pbnRzID0gZ2VuZXJhdGVDYWxpYnJhdGlvblBvaW50cyhjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFwb2ludHMgfHwgcG9pbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZW5lcmF0ZSBjYWxpYnJhdGlvbiBwb2ludHNcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgc3RhdHVzIGluZGljYXRvclxuICAgICAgICBjb25zdCBzdGF0dXNJbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgc3RhdHVzSW5kaWNhdG9yLmNsYXNzTmFtZSA9ICdjYWxpYnJhdGUtc3RhdHVzLWluZGljYXRvcic7XG4gICAgICAgIHN0YXR1c0luZGljYXRvci5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICB0b3A6IDIwcHg7XG4gICAgICAgICAgcmlnaHQ6IDIwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAxMDIsIDIwNCwgMC45KTtcbiAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHggMTVweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgICAgICAgei1pbmRleDogMTAwMDA7XG4gICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTJweCByZ2JhKDAsIDAsIDAsIDAuMyk7XG4gICAgICAgIGA7XG4gICAgICAgIHN0YXR1c0luZGljYXRvci50ZXh0Q29udGVudCA9ICdDYWxpYnJhdGlvbjogSW5pdGlhbGl6aW5nLi4uJztcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzdGF0dXNJbmRpY2F0b3IpO1xuXG4gICAgICAgIC8vIFByb2Nlc3MgZWFjaCBjYWxpYnJhdGlvbiBwb2ludFxuICAgICAgICBsZXQgc3VjY2Vzc0NvdW50ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBwb2ludCA9IHBvaW50c1tpXTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBVcGRhdGUgc3RhdHVzIGRpc3BsYXlzXG4gICAgICAgICAgc3RhdHVzSW5kaWNhdG9yLnRleHRDb250ZW50ID0gYENhbGlicmF0aW9uOiBQb2ludCAke2kgKyAxfS8ke3BvaW50cy5sZW5ndGh9YDtcbiAgICAgICAgICB0aGlzLnNldFByb2Nlc3NTdGF0dXMoYFByb2Nlc3NpbmcgY2FsaWJyYXRpb24gcG9pbnQgJHtpICsgMX0vJHtwb2ludHMubGVuZ3RofWApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENsZWFyIGNhbnZhcyB3aXRoIHdoaXRlIGJhY2tncm91bmQgdXNpbmcgY2FudmFzIG1hbmFnZW1lbnQgc3lzdGVtXG4gICAgICAgICAgdGhpcy5jbGVhckNhbnZhcygpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIERyYXcgdGhlIGNhbGlicmF0aW9uIHBvaW50IHVzaW5nIGNhbnZhcyBtYW5hZ2VtZW50IHN5c3RlbVxuICAgICAgICAgIGNvbnN0IHJhZGl1cyA9IDEyOyAvLyBTdGFuZGFyZCBzaXplIGZvciBjb25zaXN0ZW5jeVxuICAgICAgICAgIHRoaXMuZHJhd0RvdChwb2ludC54LCBwb2ludC55LCByYWRpdXMpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWF0ZSByZWRyYXcgaW50ZXJ2YWwgdG8gZW5zdXJlIGRvdCBzdGF5cyB2aXNpYmxlXG4gICAgICAgICAgY29uc3QgcmVkcmF3SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRyYXdEb3QocG9pbnQueCwgcG9pbnQueSwgcmFkaXVzKTtcbiAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFJlbW92ZSBhbnkgZXhpc3RpbmcgY291bnRkb3duIGVsZW1lbnRzXG4gICAgICAgICAgY29uc3QgZXhpc3RpbmdDb3VudGRvd25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmRvdC1jb3VudGRvd24sIC5jYWxpYnJhdGUtY291bnRkb3duJyk7XG4gICAgICAgICAgZXhpc3RpbmdDb3VudGRvd25zLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgaWYgKGVsLnBhcmVudE5vZGUpIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENyZWF0ZSBjdXN0b20gY291bnRkb3duIGVsZW1lbnQgcG9zaXRpb25lZCBhdCB0aGUgc2FtZSBsb2NhdGlvbiBhcyB0aGUgZG90XG4gICAgICAgICAgY29uc3QgY291bnRkb3duRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIGNvdW50ZG93bkVsZW1lbnQuY2xhc3NOYW1lID0gJ2RvdC1jb3VudGRvd24nO1xuICAgICAgICAgIGNvdW50ZG93bkVsZW1lbnQuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgICAgIGxlZnQ6ICR7cG9pbnQueH1weDtcbiAgICAgICAgICAgIHRvcDogJHtwb2ludC55fXB4O1xuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XG4gICAgICAgICAgICBjb2xvcjogcmVkO1xuICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgICAgICAgICB0ZXh0LXNoYWRvdzogMCAwIDEwcHggd2hpdGUsIDAgMCAyMHB4IHdoaXRlO1xuICAgICAgICAgICAgei1pbmRleDogMTAwMDA7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuOSk7XG4gICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCByZWQ7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgICB3aWR0aDogNDhweDtcbiAgICAgICAgICAgIGhlaWdodDogNDhweDtcbiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMTVweCByZ2JhKDAsIDAsIDAsIDAuNCk7XG4gICAgICAgICAgYDtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvdW50ZG93bkVsZW1lbnQpO1xuICAgICAgICAgIFxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBNYW51YWwgY291bnRkb3duXG4gICAgICAgICAgICBmb3IgKGxldCBjb3VudCA9IDM7IGNvdW50ID4gMDsgY291bnQtLSkge1xuICAgICAgICAgICAgICBjb3VudGRvd25FbGVtZW50LnRleHRDb250ZW50ID0gY291bnQ7XG4gICAgICAgICAgICAgIHRoaXMuc2V0UHJvY2Vzc1N0YXR1cyhgUG9pbnQgJHtpKzF9LyR7cG9pbnRzLmxlbmd0aH06IENvdW50ZG93biAke2NvdW50fWApO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRm9yY2UgcmVkcmF3IHRvIGVuc3VyZSBkb3Qgc3RheXMgdmlzaWJsZVxuICAgICAgICAgICAgICB0aGlzLmRyYXdEb3QocG9pbnQueCwgcG9pbnQueSwgcmFkaXVzKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA4MDApKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIFJlZHJhdyBhZ2FpbiBoYWxmd2F5IHRocm91Z2ggdGhlIHdhaXRcbiAgICAgICAgICAgICAgdGhpcy5kcmF3RG90KHBvaW50LngsIHBvaW50LnksIHJhZGl1cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNob3cgY2hlY2ttYXJrXG4gICAgICAgICAgICBjb3VudGRvd25FbGVtZW50LnRleHRDb250ZW50ID0gXCLinJNcIjtcbiAgICAgICAgICAgIHRoaXMuZHJhd0RvdChwb2ludC54LCBwb2ludC55LCByYWRpdXMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZW1vdmUgY291bnRkb3duIGVsZW1lbnQgaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGlmIChjb3VudGRvd25FbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgY291bnRkb3duRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNvdW50ZG93bkVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgZG90IGlzIHN0aWxsIHZpc2libGVcbiAgICAgICAgICAgIHRoaXMuZHJhd0RvdChwb2ludC54LCBwb2ludC55LCByYWRpdXMpO1xuXG4gICAgICAgICAgICAvLyBDYXB0dXJlIGltYWdlcyBhdCB0aGlzIHBvaW50XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgQ2FwdHVyaW5nIGNhbGlicmF0aW9uIHBvaW50ICR7aSsxfS8ke3BvaW50cy5sZW5ndGh9IGF0ICgke3BvaW50Lnh9LCAke3BvaW50Lnl9KWApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjYXB0dXJlUmVzdWx0ID0gYXdhaXQgY2FwdHVyZUltYWdlc0F0UG9pbnQoe1xuICAgICAgICAgICAgICBwb2ludDogcG9pbnQsXG4gICAgICAgICAgICAgIGNhcHR1cmVDb3VudDogdGhpcy5jYXB0dXJlQ291bnRlcixcbiAgICAgICAgICAgICAgY2FudmFzUmVmOiB7IGN1cnJlbnQ6IGNhbnZhcyB9LFxuICAgICAgICAgICAgICBzZXRDYXB0dXJlQ291bnQ6IHRoaXMuc2V0Q2FwdHVyZUNvdW50ZXIsXG4gICAgICAgICAgICAgIHNob3dDYXB0dXJlUHJldmlld1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChjYXB0dXJlUmVzdWx0ICYmIChjYXB0dXJlUmVzdWx0LnNjcmVlbkltYWdlIHx8IGNhcHR1cmVSZXN1bHQuc3VjY2VzcykpIHtcbiAgICAgICAgICAgICAgc3VjY2Vzc0NvdW50Kys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFdhaXQgYSBtb21lbnQgYmVmb3JlIGNsZWFyaW5nIHRvIGVuc3VyZSBjYXB0dXJlIGlzIGNvbXBsZXRlXG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENsZWFyIHRoZSBkb3QgYWZ0ZXIgY2FwdHVyZSB1c2luZyBjYW52YXMgbWFuYWdlbWVudCBzeXN0ZW1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJDYW52YXMoKTtcblxuICAgICAgICAgICAgLy8gV2FpdCBiZXR3ZWVuIHBvaW50c1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEyMDApKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIGNhbGlicmF0aW9uIHBvaW50ICR7aSsxfTpgLCBlcnJvcik7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIC8vIENsZWFuIHVwIGNvdW50ZG93biBpZiBpdCBzdGlsbCBleGlzdHNcbiAgICAgICAgICAgIGlmIChjb3VudGRvd25FbGVtZW50LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgICAgY291bnRkb3duRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNvdW50ZG93bkVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDbGVhciByZWRyYXcgaW50ZXJ2YWxcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocmVkcmF3SW50ZXJ2YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ2FsaWJyYXRpb24gY29tcGxldGVcbiAgICAgICAgaWYgKHN0YXR1c0luZGljYXRvcikge1xuICAgICAgICAgIHN0YXR1c0luZGljYXRvci50ZXh0Q29udGVudCA9IGBDYWxpYnJhdGlvbiBjb21wbGV0ZTogJHtzdWNjZXNzQ291bnR9LyR7cG9pbnRzLmxlbmd0aH0gcG9pbnRzYDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFByb2Nlc3NTdGF0dXMoYENhbGlicmF0aW9uIGNvbXBsZXRlZDogJHtzdWNjZXNzQ291bnR9LyR7cG9pbnRzLmxlbmd0aH0gcG9pbnRzIGNhcHR1cmVkYCk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgc3RhdHVzIGluZGljYXRvciBhZnRlciBkZWxheVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAoc3RhdHVzSW5kaWNhdG9yLnBhcmVudE5vZGUpIHtcbiAgICAgICAgICAgIHN0YXR1c0luZGljYXRvci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0YXR1c0luZGljYXRvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiQ2FsaWJyYXRpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgICAgICAgdGhpcy5zZXRQcm9jZXNzU3RhdHVzKGBDYWxpYnJhdGlvbiBlcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8gRXhpdCBmdWxsc2NyZWVuIGFuZCByZXN0b3JlIGNhbnZhcyB1c2luZyBjYW52YXMgbWFuYWdlbWVudCBzeXN0ZW1cbiAgICAgICAgdGhpcy5leGl0RnVsbHNjcmVlbigpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXRJc0NhcHR1cmluZyhmYWxzZSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaG93IFRvcEJhciBhZ2FpbiBhZnRlciBhIGRlbGF5XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy50b2dnbGVUb3BCYXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlVG9wQmFyKHRydWUpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnRvZ2dsZVRvcEJhcikge1xuICAgICAgICAgICAgd2luZG93LnRvZ2dsZVRvcEJhcih0cnVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgfVxuICAgIH0sIDIwMCk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IFNldENhbGlicmF0ZUFjdGlvbjsgIl0sIm5hbWVzIjpbIlJlYWN0IiwiZ2VuZXJhdGVDYWxpYnJhdGlvblBvaW50cyIsImRyYXdSZWREb3QiLCJydW5Db3VudGRvd24iLCJzaG93Q2FwdHVyZVByZXZpZXciLCJjYXB0dXJlSW1hZ2VzQXRQb2ludCIsIlNldENhbGlicmF0ZUFjdGlvbiIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwiaGFuZGxlU2V0Q2FsaWJyYXRlIiwidG9nZ2xlVG9wQmFyIiwid2luZG93Iiwic2V0SXNDYXB0dXJpbmciLCJzZXRQcm9jZXNzU3RhdHVzIiwib25TdGF0dXNVcGRhdGUiLCJwcm9jZXNzU3RhdHVzIiwiaXNDYXB0dXJpbmciLCJzZXRUaW1lb3V0IiwiY2FudmFzIiwid2FpdEZvckNhbnZhcyIsIkVycm9yIiwiZW50ZXJGdWxsc2NyZWVuIiwicG9pbnRzIiwid2lkdGgiLCJoZWlnaHQiLCJsZW5ndGgiLCJzdGF0dXNJbmRpY2F0b3IiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJzdHlsZSIsImNzc1RleHQiLCJ0ZXh0Q29udGVudCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInN1Y2Nlc3NDb3VudCIsImkiLCJwb2ludCIsImNsZWFyQ2FudmFzIiwicmFkaXVzIiwiZHJhd0RvdCIsIngiLCJ5IiwicmVkcmF3SW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImV4aXN0aW5nQ291bnRkb3ducyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWwiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJjb3VudGRvd25FbGVtZW50IiwiY291bnQiLCJQcm9taXNlIiwicmVzb2x2ZSIsImNvbnNvbGUiLCJsb2ciLCJjYXB0dXJlUmVzdWx0IiwiY2FwdHVyZUNvdW50IiwiY2FwdHVyZUNvdW50ZXIiLCJjYW52YXNSZWYiLCJjdXJyZW50Iiwic2V0Q2FwdHVyZUNvdW50Iiwic2V0Q2FwdHVyZUNvdW50ZXIiLCJzY3JlZW5JbWFnZSIsInN1Y2Nlc3MiLCJlcnJvciIsImNsZWFySW50ZXJ2YWwiLCJtZXNzYWdlIiwiZXhpdEZ1bGxzY3JlZW4iLCJzZXRDdXJyZW50RG90IiwidHJpZ2dlckNhbWVyYUFjY2VzcyIsInNhdmVJbWFnZVRvU2VydmVyIiwiY2FudmFzTWFuYWdlciIsImNhbnZhc1V0aWxzIiwiZ2V0Q2FudmFzIiwiY3JlYXRlQ2FudmFzIiwicXVlcnlTZWxlY3RvciIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsImN0eCIsImdldENvbnRleHQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImNvbnRhaW5lciIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsInpJbmRleCIsImJhY2tncm91bmRDb2xvciIsImNsZWFyIiwiY2xlYXJSZWN0IiwibWF4VHJpZXMiLCJpbnRlcnZhbCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-node)/./components/collected-dataset-customized/Action/SetCalibrateAction.jsx\n");

/***/ })

};
;