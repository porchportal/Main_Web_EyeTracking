"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/for-process-folder/process-status-api";
exports.ids = ["pages/api/for-process-folder/process-status-api"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffor-process-folder%2Fprocess-status-api&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffor-process-folder%2Fprocess-status-api.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffor-process-folder%2Fprocess-status-api&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffor-process-folder%2Fprocess-status-api.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_for_process_folder_process_status_api_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/for-process-folder/process-status-api.js */ \"(api-node)/./pages/api/for-process-folder/process-status-api.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_for_process_folder_process_status_api_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_for_process_folder_process_status_api_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/for-process-folder/process-status-api\",\n        pathname: \"/api/for-process-folder/process-status-api\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_for_process_folder_process_status_api_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZm9yLXByb2Nlc3MtZm9sZGVyJTJGcHJvY2Vzcy1zdGF0dXMtYXBpJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZmb3ItcHJvY2Vzcy1mb2xkZXIlMkZwcm9jZXNzLXN0YXR1cy1hcGkuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDaUY7QUFDakY7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGdGQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxnRkFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9mb3ItcHJvY2Vzcy1mb2xkZXIvcHJvY2Vzcy1zdGF0dXMtYXBpLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9mb3ItcHJvY2Vzcy1mb2xkZXIvcHJvY2Vzcy1zdGF0dXMtYXBpXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZm9yLXByb2Nlc3MtZm9sZGVyL3Byb2Nlc3Mtc3RhdHVzLWFwaVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffor-process-folder%2Fprocess-status-api&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffor-process-folder%2Fprocess-status-api.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/for-process-folder/process-status-api.js":
/*!************************************************************!*\
  !*** ./pages/api/for-process-folder/process-status-api.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! util */ \"util\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! node-fetch */ \"node-fetch\");\n/* harmony import */ var node_fetch__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(node_fetch__WEBPACK_IMPORTED_MODULE_4__);\n// pages/api/process-status-api.js - API to handle process status checks and triggers\n\n\n\n\n\n// Convert exec to Promise-based\nconst execPromise = util__WEBPACK_IMPORTED_MODULE_3___default().promisify(child_process__WEBPACK_IMPORTED_MODULE_2__.exec);\n// Function to process files via the FastAPI backend\nasync function processFilesViaBackend(setNumbers) {\n    try {\n        // Get the backend URL from environment variable or use default\n        const backendUrl = process.env.BACKEND_URL || 'http://localhost:8000';\n        const apiKey = process.env.API_KEY || 'A1B2C3D4-E5F6-7890-GHIJ-KLMNOPQRSTUV';\n        // Call the FastAPI backend to process the files\n        const response = await node_fetch__WEBPACK_IMPORTED_MODULE_4___default()(`${backendUrl}/process-batch`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-API-Key': apiKey\n            },\n            body: JSON.stringify({\n                set_numbers: setNumbers,\n                show_head_pose: true,\n                show_bounding_box: true,\n                show_mask: false,\n                show_parameters: false\n            })\n        });\n        // Check if the request was successful\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error('Backend processing error:', errorText);\n            return {\n                success: false,\n                error: `Backend error: ${response.status} ${response.statusText}`\n            };\n        }\n        // Parse the response\n        const result = await response.json();\n        return result;\n    } catch (error) {\n        console.error('Error calling backend for processing:', error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\n// Function to process files directly in Node.js\nasync function processFilesDirectly(setNumbers, captureDir, enhancePath, progressFilePath) {\n    try {\n        // Get current progress or initialize\n        let progress = {\n            currentSet: 0,\n            totalSets: setNumbers.length,\n            processedSets: [],\n            startTime: new Date().toISOString(),\n            lastUpdateTime: new Date().toISOString()\n        };\n        // Process each set\n        for (const setNumber of setNumbers){\n            try {\n                progress.currentSet = setNumber;\n                fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(progressFilePath, JSON.stringify(progress, null, 2));\n                // Process webcam image\n                const webcamSrcPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(captureDir, `webcam_${setNumber}.jpg`);\n                const webcamDestPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(enhancePath, `webcam_enhance_${setNumber}.jpg`);\n                if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(webcamSrcPath)) {\n                    // Simple copy for the enhancement demonstration\n                    fs__WEBPACK_IMPORTED_MODULE_0___default().copyFileSync(webcamSrcPath, webcamDestPath);\n                }\n                // Process screen image if it exists\n                const screenSrcPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(captureDir, `screen_${setNumber}.jpg`);\n                const screenDestPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(enhancePath, `screen_enhance_${setNumber}.jpg`);\n                if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(screenSrcPath)) {\n                    fs__WEBPACK_IMPORTED_MODULE_0___default().copyFileSync(screenSrcPath, screenDestPath);\n                }\n                // Process parameters file if it exists (try both parameter and parameters naming)\n                const paramFileNames = [\n                    `parameters_${setNumber}.csv`,\n                    `parameter_${setNumber}.csv`\n                ];\n                for (const paramFileName of paramFileNames){\n                    const paramSrcPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(captureDir, paramFileName);\n                    if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(paramSrcPath)) {\n                        const paramDestPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(enhancePath, paramFileName.replace('parameter', 'parameter_enhance'));\n                        fs__WEBPACK_IMPORTED_MODULE_0___default().copyFileSync(paramSrcPath, paramDestPath);\n                        break; // Found and copied one parameter file, no need to check the other\n                    }\n                }\n                // Update progress\n                progress.processedSets.push(setNumber);\n                progress.lastUpdateTime = new Date().toISOString();\n                fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(progressFilePath, JSON.stringify(progress, null, 2));\n                // Add a small delay to prevent overwhelming the system\n                await new Promise((resolve)=>setTimeout(resolve, 500));\n            } catch (err) {\n                console.error(`Error processing set ${setNumber}:`, err);\n            }\n        }\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error('Error in direct processing:', error);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\nasync function handler(req, res) {\n    // Handle GET request to check processing status\n    if (req.method === 'GET') {\n        try {\n            const capturesPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures', 'eye_tracking_captures');\n            const enhancePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures', 'enhance');\n            // Create captures directory if it doesn't exist\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures'))) {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures'), {\n                    recursive: true\n                });\n            }\n            // Create capture directory if it doesn't exist\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(capturesPath)) {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(capturesPath, {\n                    recursive: true\n                });\n            }\n            // Create enhance directory if it doesn't exist\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(enhancePath)) {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(enhancePath, {\n                    recursive: true\n                });\n            }\n            // Check if there's a processing.lock file (indicating processing is in progress)\n            const lockFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures', 'processing.lock');\n            const isProcessing = fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(lockFilePath);\n            // Check for progress information file\n            const progressFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures', 'processing_progress.json');\n            let progressInfo = {\n                currentSet: 0,\n                totalSets: 0,\n                processedSets: [],\n                startTime: null,\n                lastUpdateTime: null\n            };\n            if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(progressFilePath)) {\n                try {\n                    const progressData = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(progressFilePath, 'utf8');\n                    progressInfo = JSON.parse(progressData);\n                } catch (err) {\n                    console.error(\"Error reading progress file:\", err);\n                }\n            }\n            // Count files in each directory\n            const captureFiles = fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(capturesPath) ? fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(capturesPath).filter((file)=>file.startsWith('webcam_') && file.endsWith('.jpg')).length : 0;\n            const enhanceFiles = fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(enhancePath) ? fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(enhancePath).filter((file)=>file.startsWith('webcam_enhance_') && file.endsWith('.jpg')).length : 0;\n            return res.status(200).json({\n                success: true,\n                isProcessing,\n                captureCount: captureFiles,\n                enhanceCount: enhanceFiles,\n                needsProcessing: captureFiles > enhanceFiles,\n                progress: progressInfo\n            });\n        } catch (error) {\n            console.error('Error checking process status:', error);\n            return res.status(500).json({\n                success: false,\n                error: error.message\n            });\n        }\n    } else if (req.method === 'POST') {\n        try {\n            // Get list of files to process from request body\n            const { setNumbers } = req.body;\n            if (!setNumbers || !Array.isArray(setNumbers) || setNumbers.length === 0) {\n                return res.status(400).json({\n                    success: false,\n                    error: 'No set numbers provided for processing'\n                });\n            }\n            // Make sure the directory exists before creating the lock file\n            const capturesDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures');\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(capturesDir)) {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(capturesDir, {\n                    recursive: true\n                });\n            }\n            // Create enhance directory if it doesn't exist\n            const enhancePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures', 'enhance');\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(enhancePath)) {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(enhancePath, {\n                    recursive: true\n                });\n            }\n            // Create lock file to indicate processing is in progress\n            const lockFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(capturesDir, 'processing.lock');\n            try {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(lockFilePath, new Date().toISOString());\n                console.log(`Created lock file at ${lockFilePath}`);\n            } catch (err) {\n                console.error(`Error creating lock file: ${err.message}`);\n                return res.status(500).json({\n                    success: false,\n                    error: `Failed to create lock file: ${err.message}`\n                });\n            }\n            // Create initial progress file\n            const progressFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(capturesDir, 'processing_progress.json');\n            const progressInfo = {\n                currentSet: 0,\n                totalSets: setNumbers.length,\n                processedSets: [],\n                startTime: new Date().toISOString(),\n                lastUpdateTime: new Date().toISOString()\n            };\n            try {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(progressFilePath, JSON.stringify(progressInfo, null, 2));\n            } catch (err) {\n                console.error(`Error creating progress file: ${err.message}`);\n            }\n            // Define paths for processing\n            const captureDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures', 'eye_tracking_captures');\n            // Determine which processing method to use\n            const useBackend = process.env.USE_PYTHON_BACKEND === 'true';\n            if (useBackend) {\n                console.log(`Starting backend processing of ${setNumbers.length} sets...`);\n                // Start processing with the Python backend\n                processFilesViaBackend(setNumbers).then((result)=>{\n                    console.log('Backend processing completed with result:', result);\n                    // Clean up the lock file when done\n                    if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(lockFilePath)) {\n                        fs__WEBPACK_IMPORTED_MODULE_0___default().unlinkSync(lockFilePath);\n                    }\n                }).catch((err)=>{\n                    console.error('Backend processing failed:', err);\n                    // Clean up the lock file on error\n                    if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(lockFilePath)) {\n                        fs__WEBPACK_IMPORTED_MODULE_0___default().unlinkSync(lockFilePath);\n                    }\n                });\n                return res.status(200).json({\n                    success: true,\n                    message: 'Processing started',\n                    setsToProcess: setNumbers.length,\n                    processingMethod: 'python-backend'\n                });\n            } else {\n                console.log(`Starting direct processing of ${setNumbers.length} sets...`);\n                // Start processing in the background using direct Node.js processing\n                processFilesDirectly(setNumbers, captureDir, enhancePath, progressFilePath).then((result)=>{\n                    console.log('Processing completed with result:', result);\n                    // Clean up the lock file when done\n                    if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(lockFilePath)) {\n                        fs__WEBPACK_IMPORTED_MODULE_0___default().unlinkSync(lockFilePath);\n                    }\n                }).catch((err)=>{\n                    console.error('Processing failed:', err);\n                    // Clean up the lock file on error\n                    if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(lockFilePath)) {\n                        fs__WEBPACK_IMPORTED_MODULE_0___default().unlinkSync(lockFilePath);\n                    }\n                });\n                return res.status(200).json({\n                    success: true,\n                    message: 'Processing started',\n                    setsToProcess: setNumbers.length,\n                    processingMethod: 'direct'\n                });\n            }\n        } catch (error) {\n            console.error('Error triggering processing:', error);\n            // If there's an error, make sure to delete the lock file\n            const lockFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures', 'processing.lock');\n            if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(lockFilePath)) {\n                try {\n                    fs__WEBPACK_IMPORTED_MODULE_0___default().unlinkSync(lockFilePath);\n                } catch (e) {\n                    console.error('Error removing lock file:', e);\n                }\n            }\n            return res.status(500).json({\n                success: false,\n                error: error.message\n            });\n        }\n    } else {\n        return res.status(405).json({\n            success: false,\n            error: 'Method not allowed'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9mb3ItcHJvY2Vzcy1mb2xkZXIvcHJvY2Vzcy1zdGF0dXMtYXBpLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQUEscUZBQXFGO0FBQ2pFO0FBQ0k7QUFDYTtBQUNiO0FBQ087QUFFL0IsZ0NBQWdDO0FBQ2hDLE1BQU1LLGNBQWNGLHFEQUFjLENBQUNELCtDQUFJQTtBQUV2QyxvREFBb0Q7QUFDcEQsZUFBZUssdUJBQXVCQyxVQUFVO0lBQzlDLElBQUk7UUFDRiwrREFBK0Q7UUFDL0QsTUFBTUMsYUFBYUMsUUFBUUMsR0FBRyxDQUFDQyxXQUFXLElBQUk7UUFDOUMsTUFBTUMsU0FBU0gsUUFBUUMsR0FBRyxDQUFDRyxPQUFPLElBQUk7UUFFdEMsZ0RBQWdEO1FBQ2hELE1BQU1DLFdBQVcsTUFBTVgsaURBQUtBLENBQUMsR0FBR0ssV0FBVyxjQUFjLENBQUMsRUFBRTtZQUMxRE8sUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIsYUFBYUo7WUFDZjtZQUNBSyxNQUFNQyxLQUFLQyxTQUFTLENBQUM7Z0JBQ25CQyxhQUFhYjtnQkFDYmMsZ0JBQWdCO2dCQUNoQkMsbUJBQW1CO2dCQUNuQkMsV0FBVztnQkFDWEMsaUJBQWlCO1lBQ25CO1FBQ0Y7UUFFQSxzQ0FBc0M7UUFDdEMsSUFBSSxDQUFDVixTQUFTVyxFQUFFLEVBQUU7WUFDaEIsTUFBTUMsWUFBWSxNQUFNWixTQUFTYSxJQUFJO1lBQ3JDQyxRQUFRQyxLQUFLLENBQUMsNkJBQTZCSDtZQUMzQyxPQUFPO2dCQUFFSSxTQUFTO2dCQUFPRCxPQUFPLENBQUMsZUFBZSxFQUFFZixTQUFTaUIsTUFBTSxDQUFDLENBQUMsRUFBRWpCLFNBQVNrQixVQUFVLEVBQUU7WUFBQztRQUM3RjtRQUVBLHFCQUFxQjtRQUNyQixNQUFNQyxTQUFTLE1BQU1uQixTQUFTb0IsSUFBSTtRQUNsQyxPQUFPRDtJQUNULEVBQUUsT0FBT0osT0FBTztRQUNkRCxRQUFRQyxL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QUFBQTtvQkFDSkwsUUFBUWtFLEdBQUcsQ0FBQyxxQ0FBcUM3RDtvQkFDakQsbUNBQW1DO29CQUNuQyxJQUFJbEMsb0RBQWEsQ0FBQzRFLGVBQWU7d0JBQy9CNUUsb0RBQWEsQ0FBQzRFO29CQUNoQjtnQkFDRixHQUNDd0IsS0FBSyxDQUFDaEMsQ0FBQUE7b0JBQ0x2QyxRQUFRQyxLQUFLLENBQUMsc0JBQXNCc0M7b0JBQ3BDLGtDQUFrQztvQkFDbEMsSUFBSXBFLG9EQUFhLENBQUM0RSxlQUFlO3dCQUMvQjVFLG9EQUFhLENBQUM0RTtvQkFDaEI7Z0JBQ0Y7Z0JBRUYsT0FBT0wsSUFBSXZDLE1BQU0sQ0FBQyxLQUFLRyxJQUFJLENBQUM7b0JBQzFCSixTQUFTO29CQUNUSyxTQUFTO29CQUNUaUUsZUFBZTdGLFdBQVdvQyxNQUFNO29CQUNoQzBELGtCQUFrQjtnQkFDcEI7WUFDRjtRQUNGLEVBQUUsT0FBT3hFLE9BQU87WUFDZEQsUUFBUUMsS0FBSyxDQUFDLGdDQUFnQ0E7WUFFOUMseURBQXlEO1lBQ3pELE1BQU04QyxlQUFlM0UsZ0RBQVMsQ0FBQ1MsUUFBUStELEdBQUcsSUFBSSxVQUFVLFlBQVk7WUFDcEUsSUFBSXpFLG9EQUFhLENBQUM0RSxlQUFlO2dCQUMvQixJQUFJO29CQUNGNUUsb0RBQWEsQ0FBQzRFO2dCQUNoQixFQUFFLE9BQU8yQixHQUFHO29CQUNWMUUsUUFBUUMsS0FBSyxDQUFDLDZCQUE2QnlFO2dCQUM3QztZQUNGO1lBRUEsT0FBT2hDLElBQUl2QyxNQUFNLENBQUMsS0FBS0csSUFBSSxDQUFDO2dCQUMxQkosU0FBUztnQkFDVEQsT0FBT0EsTUFBTU0sT0FBTztZQUN0QjtRQUNGO0lBQ0YsT0FDSztRQUNILE9BQU9tQyxJQUFJdkMsTUFBTSxDQUFDLEtBQUtHLElBQUksQ0FBQztZQUMxQkosU0FBUztZQUNURCxPQUFPO1FBQ1Q7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvcG9yY2hwb3J0YWwyL0Rlc2t0b3Av8J+UpWV2ZXJ5dGhpbmcvTWFpbl9XZWJfRXllVHJhY2tpbmcvbWFpbi13ZWIvZnJvbnRlbmQvcGFnZXMvYXBpL2Zvci1wcm9jZXNzLWZvbGRlci9wcm9jZXNzLXN0YXR1cy1hcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL3Byb2Nlc3Mtc3RhdHVzLWFwaS5qcyAtIEFQSSB0byBoYW5kbGUgcHJvY2VzcyBzdGF0dXMgY2hlY2tzIGFuZCB0cmlnZ2Vyc1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0IHV0aWwgZnJvbSAndXRpbCc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnbm9kZS1mZXRjaCc7XG5cbi8vIENvbnZlcnQgZXhlYyB0byBQcm9taXNlLWJhc2VkXG5jb25zdCBleGVjUHJvbWlzZSA9IHV0aWwucHJvbWlzaWZ5KGV4ZWMpO1xuXG4vLyBGdW5jdGlvbiB0byBwcm9jZXNzIGZpbGVzIHZpYSB0aGUgRmFzdEFQSSBiYWNrZW5kXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzRmlsZXNWaWFCYWNrZW5kKHNldE51bWJlcnMpIHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgdGhlIGJhY2tlbmQgVVJMIGZyb20gZW52aXJvbm1lbnQgdmFyaWFibGUgb3IgdXNlIGRlZmF1bHRcbiAgICBjb25zdCBiYWNrZW5kVXJsID0gcHJvY2Vzcy5lbnYuQkFDS0VORF9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCc7XG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuQVBJX0tFWSB8fCAnQTFCMkMzRDQtRTVGNi03ODkwLUdISUotS0xNTk9QUVJTVFVWJztcbiAgICBcbiAgICAvLyBDYWxsIHRoZSBGYXN0QVBJIGJhY2tlbmQgdG8gcHJvY2VzcyB0aGUgZmlsZXNcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke2JhY2tlbmRVcmx9L3Byb2Nlc3MtYmF0Y2hgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgJ1gtQVBJLUtleSc6IGFwaUtleVxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgXG4gICAgICAgIHNldF9udW1iZXJzOiBzZXROdW1iZXJzLFxuICAgICAgICBzaG93X2hlYWRfcG9zZTogdHJ1ZSxcbiAgICAgICAgc2hvd19ib3VuZGluZ19ib3g6IHRydWUsXG4gICAgICAgIHNob3dfbWFzazogZmFsc2UsXG4gICAgICAgIHNob3dfcGFyYW1ldGVyczogZmFsc2VcbiAgICAgIH0pXG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHJlcXVlc3Qgd2FzIHN1Y2Nlc3NmdWxcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICBjb25zb2xlLmVycm9yKCdCYWNrZW5kIHByb2Nlc3NpbmcgZXJyb3I6JywgZXJyb3JUZXh0KTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogYEJhY2tlbmQgZXJyb3I6ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBQYXJzZSB0aGUgcmVzcG9uc2VcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxsaW5nIGJhY2tlbmQgZm9yIHByb2Nlc3Npbmc6JywgZXJyb3IpO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9O1xuICB9XG59XG5cbi8vIEZ1bmN0aW9uIHRvIHByb2Nlc3MgZmlsZXMgZGlyZWN0bHkgaW4gTm9kZS5qc1xuYXN5bmMgZnVuY3Rpb24gcHJvY2Vzc0ZpbGVzRGlyZWN0bHkoc2V0TnVtYmVycywgY2FwdHVyZURpciwgZW5oYW5jZVBhdGgsIHByb2dyZXNzRmlsZVBhdGgpIHtcbiAgdHJ5IHtcbiAgICAvLyBHZXQgY3VycmVudCBwcm9ncmVzcyBvciBpbml0aWFsaXplXG4gICAgbGV0IHByb2dyZXNzID0ge1xuICAgICAgY3VycmVudFNldDogMCxcbiAgICAgIHRvdGFsU2V0czogc2V0TnVtYmVycy5sZW5ndGgsXG4gICAgICBwcm9jZXNzZWRTZXRzOiBbXSxcbiAgICAgIHN0YXJ0VGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgbGFzdFVwZGF0ZVRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgIH07XG4gICAgXG4gICAgLy8gUHJvY2VzcyBlYWNoIHNldFxuICAgIGZvciAoY29uc3Qgc2V0TnVtYmVyIG9mIHNldE51bWJlcnMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHByb2dyZXNzLmN1cnJlbnRTZXQgPSBzZXROdW1iZXI7XG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMocHJvZ3Jlc3NGaWxlUGF0aCwgSlNPTi5zdHJpbmdpZnkocHJvZ3Jlc3MsIG51bGwsIDIpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFByb2Nlc3Mgd2ViY2FtIGltYWdlXG4gICAgICAgIGNvbnN0IHdlYmNhbVNyY1BhdGggPSBwYXRoLmpvaW4oY2FwdHVyZURpciwgYHdlYmNhbV8ke3NldE51bWJlcn0uanBnYCk7XG4gICAgICAgIGNvbnN0IHdlYmNhbURlc3RQYXRoID0gcGF0aC5qb2luKGVuaGFuY2VQYXRoLCBgd2ViY2FtX2VuaGFuY2VfJHtzZXROdW1iZXJ9LmpwZ2ApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMod2ViY2FtU3JjUGF0aCkpIHtcbiAgICAgICAgICAvLyBTaW1wbGUgY29weSBmb3IgdGhlIGVuaGFuY2VtZW50IGRlbW9uc3RyYXRpb25cbiAgICAgICAgICBmcy5jb3B5RmlsZVN5bmMod2ViY2FtU3JjUGF0aCwgd2ViY2FtRGVzdFBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBQcm9jZXNzIHNjcmVlbiBpbWFnZSBpZiBpdCBleGlzdHNcbiAgICAgICAgY29uc3Qgc2NyZWVuU3JjUGF0aCA9IHBhdGguam9pbihjYXB0dXJlRGlyLCBgc2NyZWVuXyR7c2V0TnVtYmVyfS5qcGdgKTtcbiAgICAgICAgY29uc3Qgc2NyZWVuRGVzdFBhdGggPSBwYXRoLmpvaW4oZW5oYW5jZVBhdGgsIGBzY3JlZW5fZW5oYW5jZV8ke3NldE51bWJlcn0uanBnYCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhzY3JlZW5TcmNQYXRoKSkge1xuICAgICAgICAgIGZzLmNvcHlGaWxlU3luYyhzY3JlZW5TcmNQYXRoLCBzY3JlZW5EZXN0UGF0aCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFByb2Nlc3MgcGFyYW1ldGVycyBmaWxlIGlmIGl0IGV4aXN0cyAodHJ5IGJvdGggcGFyYW1ldGVyIGFuZCBwYXJhbWV0ZXJzIG5hbWluZylcbiAgICAgICAgY29uc3QgcGFyYW1GaWxlTmFtZXMgPSBbXG4gICAgICAgICAgYHBhcmFtZXRlcnNfJHtzZXROdW1iZXJ9LmNzdmAsXG4gICAgICAgICAgYHBhcmFtZXRlcl8ke3NldE51bWJlcn0uY3N2YFxuICAgICAgICBdO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBwYXJhbUZpbGVOYW1lIG9mIHBhcmFtRmlsZU5hbWVzKSB7XG4gICAgICAgICAgY29uc3QgcGFyYW1TcmNQYXRoID0gcGF0aC5qb2luKGNhcHR1cmVEaXIsIHBhcmFtRmlsZU5hbWUpO1xuICAgICAgICAgIGlmIChmcy5leGlzdHNTeW5jKHBhcmFtU3JjUGF0aCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtRGVzdFBhdGggPSBwYXRoLmpvaW4oZW5oYW5jZVBhdGgsIHBhcmFtRmlsZU5hbWUucmVwbGFjZSgncGFyYW1ldGVyJywgJ3BhcmFtZXRlcl9lbmhhbmNlJykpO1xuICAgICAgICAgICAgZnMuY29weUZpbGVTeW5jKHBhcmFtU3JjUGF0aCwgcGFyYW1EZXN0UGF0aCk7XG4gICAgICAgICAgICBicmVhazsgLy8gRm91bmQgYW5kIGNvcGllZCBvbmUgcGFyYW1ldGVyIGZpbGUsIG5vIG5lZWQgdG8gY2hlY2sgdGhlIG90aGVyXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgcHJvZ3Jlc3NcbiAgICAgICAgcHJvZ3Jlc3MucHJvY2Vzc2VkU2V0cy5wdXNoKHNldE51bWJlcik7XG4gICAgICAgIHByb2dyZXNzLmxhc3RVcGRhdGVUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKHByb2dyZXNzRmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KHByb2dyZXNzLCBudWxsLCAyKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgYSBzbWFsbCBkZWxheSB0byBwcmV2ZW50IG92ZXJ3aGVsbWluZyB0aGUgc3lzdGVtXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDApKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIHNldCAke3NldE51bWJlcn06YCwgZXJyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGRpcmVjdCBwcm9jZXNzaW5nOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIC8vIEhhbmRsZSBHRVQgcmVxdWVzdCB0byBjaGVjayBwcm9jZXNzaW5nIHN0YXR1c1xuICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2FwdHVyZXNQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnY2FwdHVyZXMnLCAnZXllX3RyYWNraW5nX2NhcHR1cmVzJyk7XG4gICAgICBjb25zdCBlbmhhbmNlUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2NhcHR1cmVzJywgJ2VuaGFuY2UnKTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGNhcHR1cmVzIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnY2FwdHVyZXMnKSkpIHtcbiAgICAgICAgZnMubWtkaXJTeW5jKHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2NhcHR1cmVzJyksIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgY2FwdHVyZSBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxuICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGNhcHR1cmVzUGF0aCkpIHtcbiAgICAgICAgZnMubWtkaXJTeW5jKGNhcHR1cmVzUGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBlbmhhbmNlIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZW5oYW5jZVBhdGgpKSB7XG4gICAgICAgIGZzLm1rZGlyU3luYyhlbmhhbmNlUGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSBwcm9jZXNzaW5nLmxvY2sgZmlsZSAoaW5kaWNhdGluZyBwcm9jZXNzaW5nIGlzIGluIHByb2dyZXNzKVxuICAgICAgY29uc3QgbG9ja0ZpbGVQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnY2FwdHVyZXMnLCAncHJvY2Vzc2luZy5sb2NrJyk7XG4gICAgICBjb25zdCBpc1Byb2Nlc3NpbmcgPSBmcy5leGlzdHNTeW5jKGxvY2tGaWxlUGF0aCk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBwcm9ncmVzcyBpbmZvcm1hdGlvbiBmaWxlXG4gICAgICBjb25zdCBwcm9ncmVzc0ZpbGVQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnY2FwdHVyZXMnLCAncHJvY2Vzc2luZ19wcm9ncmVzcy5qc29uJyk7XG4gICAgICBsZXQgcHJvZ3Jlc3NJbmZvID0geyBcbiAgICAgICAgY3VycmVudFNldDogMCxcbiAgICAgICAgdG90YWxTZXRzOiAwLFxuICAgICAgICBwcm9jZXNzZWRTZXRzOiBbXSxcbiAgICAgICAgc3RhcnRUaW1lOiBudWxsLFxuICAgICAgICBsYXN0VXBkYXRlVGltZTogbnVsbFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgaWYgKGZzLmV4aXN0c1N5bmMocHJvZ3Jlc3NGaWxlUGF0aCkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBwcm9ncmVzc0RhdGEgPSBmcy5yZWFkRmlsZVN5bmMocHJvZ3Jlc3NGaWxlUGF0aCwgJ3V0ZjgnKTtcbiAgICAgICAgICBwcm9ncmVzc0luZm8gPSBKU09OLnBhcnNlKHByb2dyZXNzRGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZWFkaW5nIHByb2dyZXNzIGZpbGU6XCIsIGVycik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ291bnQgZmlsZXMgaW4gZWFjaCBkaXJlY3RvcnlcbiAgICAgIGNvbnN0IGNhcHR1cmVGaWxlcyA9IGZzLmV4aXN0c1N5bmMoY2FwdHVyZXNQYXRoKSBcbiAgICAgICAgPyBmcy5yZWFkZGlyU3luYyhjYXB0dXJlc1BhdGgpLmZpbHRlcihmaWxlID0+IFxuICAgICAgICAgICAgZmlsZS5zdGFydHNXaXRoKCd3ZWJjYW1fJykgJiYgZmlsZS5lbmRzV2l0aCgnLmpwZycpKS5sZW5ndGhcbiAgICAgICAgOiAwO1xuICAgICAgICBcbiAgICAgIGNvbnN0IGVuaGFuY2VGaWxlcyA9IGZzLmV4aXN0c1N5bmMoZW5oYW5jZVBhdGgpXG4gICAgICAgID8gZnMucmVhZGRpclN5bmMoZW5oYW5jZVBhdGgpLmZpbHRlcihmaWxlID0+IFxuICAgICAgICAgICAgZmlsZS5zdGFydHNXaXRoKCd3ZWJjYW1fZW5oYW5jZV8nKSAmJiBmaWxlLmVuZHNXaXRoKCcuanBnJykpLmxlbmd0aFxuICAgICAgICA6IDA7XG4gICAgICBcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGlzUHJvY2Vzc2luZyxcbiAgICAgICAgY2FwdHVyZUNvdW50OiBjYXB0dXJlRmlsZXMsXG4gICAgICAgIGVuaGFuY2VDb3VudDogZW5oYW5jZUZpbGVzLFxuICAgICAgICBuZWVkc1Byb2Nlc3Npbmc6IGNhcHR1cmVGaWxlcyA+IGVuaGFuY2VGaWxlcyxcbiAgICAgICAgcHJvZ3Jlc3M6IHByb2dyZXNzSW5mb1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIHByb2Nlc3Mgc3RhdHVzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8vIEhhbmRsZSBQT1NUIHJlcXVlc3QgdG8gdHJpZ2dlciBwcm9jZXNzaW5nXG4gIGVsc2UgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgbGlzdCBvZiBmaWxlcyB0byBwcm9jZXNzIGZyb20gcmVxdWVzdCBib2R5XG4gICAgICBjb25zdCB7IHNldE51bWJlcnMgfSA9IHJlcS5ib2R5O1xuICAgICAgXG4gICAgICBpZiAoIXNldE51bWJlcnMgfHwgIUFycmF5LmlzQXJyYXkoc2V0TnVtYmVycykgfHwgc2V0TnVtYmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ05vIHNldCBudW1iZXJzIHByb3ZpZGVkIGZvciBwcm9jZXNzaW5nJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTWFrZSBzdXJlIHRoZSBkaXJlY3RvcnkgZXhpc3RzIGJlZm9yZSBjcmVhdGluZyB0aGUgbG9jayBmaWxlXG4gICAgICBjb25zdCBjYXB0dXJlc0RpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2NhcHR1cmVzJyk7XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoY2FwdHVyZXNEaXIpKSB7XG4gICAgICAgIGZzLm1rZGlyU3luYyhjYXB0dXJlc0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBlbmhhbmNlIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICBjb25zdCBlbmhhbmNlUGF0aCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ2NhcHR1cmVzJywgJ2VuaGFuY2UnKTtcbiAgICAgIGlmICghZnMuZXhpc3RzU3luYyhlbmhhbmNlUGF0aCkpIHtcbiAgICAgICAgZnMubWtkaXJTeW5jKGVuaGFuY2VQYXRoLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGxvY2sgZmlsZSB0byBpbmRpY2F0ZSBwcm9jZXNzaW5nIGlzIGluIHByb2dyZXNzXG4gICAgICBjb25zdCBsb2NrRmlsZVBhdGggPSBwYXRoLmpvaW4oY2FwdHVyZXNEaXIsICdwcm9jZXNzaW5nLmxvY2snKTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgZnMud3JpdGVGaWxlU3luYyhsb2NrRmlsZVBhdGgsIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGBDcmVhdGVkIGxvY2sgZmlsZSBhdCAke2xvY2tGaWxlUGF0aH1gKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyBsb2NrIGZpbGU6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGBGYWlsZWQgdG8gY3JlYXRlIGxvY2sgZmlsZTogJHtlcnIubWVzc2FnZX1gXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgaW5pdGlhbCBwcm9ncmVzcyBmaWxlXG4gICAgICBjb25zdCBwcm9ncmVzc0ZpbGVQYXRoID0gcGF0aC5qb2luKGNhcHR1cmVzRGlyLCAncHJvY2Vzc2luZ19wcm9ncmVzcy5qc29uJyk7XG4gICAgICBjb25zdCBwcm9ncmVzc0luZm8gPSB7XG4gICAgICAgIGN1cnJlbnRTZXQ6IDAsXG4gICAgICAgIHRvdGFsU2V0czogc2V0TnVtYmVycy5sZW5ndGgsXG4gICAgICAgIHByb2Nlc3NlZFNldHM6IFtdLFxuICAgICAgICBzdGFydFRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgbGFzdFVwZGF0ZVRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgZnMud3JpdGVGaWxlU3luYyhwcm9ncmVzc0ZpbGVQYXRoLCBKU09OLnN0cmluZ2lmeShwcm9ncmVzc0luZm8sIG51bGwsIDIpKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyBwcm9ncmVzcyBmaWxlOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBEZWZpbmUgcGF0aHMgZm9yIHByb2Nlc3NpbmdcbiAgICAgIGNvbnN0IGNhcHR1cmVEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICdjYXB0dXJlcycsICdleWVfdHJhY2tpbmdfY2FwdHVyZXMnKTtcbiAgICAgIFxuICAgICAgLy8gRGV0ZXJtaW5lIHdoaWNoIHByb2Nlc3NpbmcgbWV0aG9kIHRvIHVzZVxuICAgICAgY29uc3QgdXNlQmFja2VuZCA9IHByb2Nlc3MuZW52LlVTRV9QWVRIT05fQkFDS0VORCA9PT0gJ3RydWUnO1xuICAgICAgXG4gICAgICBpZiAodXNlQmFja2VuZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgU3RhcnRpbmcgYmFja2VuZCBwcm9jZXNzaW5nIG9mICR7c2V0TnVtYmVycy5sZW5ndGh9IHNldHMuLi5gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN0YXJ0IHByb2Nlc3Npbmcgd2l0aCB0aGUgUHl0aG9uIGJhY2tlbmRcbiAgICAgICAgcHJvY2Vzc0ZpbGVzVmlhQmFja2VuZChzZXROdW1iZXJzKVxuICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQmFja2VuZCBwcm9jZXNzaW5nIGNvbXBsZXRlZCB3aXRoIHJlc3VsdDonLCByZXN1bHQpO1xuICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIGxvY2sgZmlsZSB3aGVuIGRvbmVcbiAgICAgICAgICAgIGlmIChmcy5leGlzdHNTeW5jKGxvY2tGaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgZnMudW5saW5rU3luYyhsb2NrRmlsZVBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCYWNrZW5kIHByb2Nlc3NpbmcgZmFpbGVkOicsIGVycik7XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgbG9jayBmaWxlIG9uIGVycm9yXG4gICAgICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhsb2NrRmlsZVBhdGgpKSB7XG4gICAgICAgICAgICAgIGZzLnVubGlua1N5bmMobG9ja0ZpbGVQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnUHJvY2Vzc2luZyBzdGFydGVkJyxcbiAgICAgICAgICBzZXRzVG9Qcm9jZXNzOiBzZXROdW1iZXJzLmxlbmd0aCxcbiAgICAgICAgICBwcm9jZXNzaW5nTWV0aG9kOiAncHl0aG9uLWJhY2tlbmQnXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coYFN0YXJ0aW5nIGRpcmVjdCBwcm9jZXNzaW5nIG9mICR7c2V0TnVtYmVycy5sZW5ndGh9IHNldHMuLi5gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN0YXJ0IHByb2Nlc3NpbmcgaW4gdGhlIGJhY2tncm91bmQgdXNpbmcgZGlyZWN0IE5vZGUuanMgcHJvY2Vzc2luZ1xuICAgICAgICBwcm9jZXNzRmlsZXNEaXJlY3RseShzZXROdW1iZXJzLCBjYXB0dXJlRGlyLCBlbmhhbmNlUGF0aCwgcHJvZ3Jlc3NGaWxlUGF0aClcbiAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgY29tcGxldGVkIHdpdGggcmVzdWx0OicsIHJlc3VsdCk7XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgbG9jayBmaWxlIHdoZW4gZG9uZVxuICAgICAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMobG9ja0ZpbGVQYXRoKSkge1xuICAgICAgICAgICAgICBmcy51bmxpbmtTeW5jKGxvY2tGaWxlUGF0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Byb2Nlc3NpbmcgZmFpbGVkOicsIGVycik7XG4gICAgICAgICAgICAvLyBDbGVhbiB1cCB0aGUgbG9jayBmaWxlIG9uIGVycm9yXG4gICAgICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhsb2NrRmlsZVBhdGgpKSB7XG4gICAgICAgICAgICAgIGZzLnVubGlua1N5bmMobG9ja0ZpbGVQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBtZXNzYWdlOiAnUHJvY2Vzc2luZyBzdGFydGVkJyxcbiAgICAgICAgICBzZXRzVG9Qcm9jZXNzOiBzZXROdW1iZXJzLmxlbmd0aCxcbiAgICAgICAgICBwcm9jZXNzaW5nTWV0aG9kOiAnZGlyZWN0J1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHJpZ2dlcmluZyBwcm9jZXNzaW5nOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlcmUncyBhbiBlcnJvciwgbWFrZSBzdXJlIHRvIGRlbGV0ZSB0aGUgbG9jayBmaWxlXG4gICAgICBjb25zdCBsb2NrRmlsZVBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICdjYXB0dXJlcycsICdwcm9jZXNzaW5nLmxvY2snKTtcbiAgICAgIGlmIChmcy5leGlzdHNTeW5jKGxvY2tGaWxlUGF0aCkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmcy51bmxpbmtTeW5jKGxvY2tGaWxlUGF0aCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW1vdmluZyBsb2NrIGZpbGU6JywgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgXG4gICAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiZXhlYyIsInV0aWwiLCJmZXRjaCIsImV4ZWNQcm9taXNlIiwicHJvbWlzaWZ5IiwicHJvY2Vzc0ZpbGVzVmlhQmFja2VuZCIsInNldE51bWJlcnMiLCJiYWNrZW5kVXJsIiwicHJvY2VzcyIsImVudiIsIkJBQ0tFTkRfVVJMIiwiYXBpS2V5IiwiQVBJX0tFWSIsInJlc3BvbnNlIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwic2V0X251bWJlcnMiLCJzaG93X2hlYWRfcG9zZSIsInNob3dfYm91bmRpbmdfYm94Iiwic2hvd19tYXNrIiwic2hvd19wYXJhbWV0ZXJzIiwib2siLCJlcnJvclRleHQiLCJ0ZXh0IiwiY29uc29sZSIsImVycm9yIiwic3VjY2VzcyIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJyZXN1bHQiLCJqc29uIiwibWVzc2FnZSIsInByb2Nlc3NGaWxlc0RpcmVjdGx5IiwiY2FwdHVyZURpciIsImVuaGFuY2VQYXRoIiwicHJvZ3Jlc3NGaWxlUGF0aCIsInByb2dyZXNzIiwiY3VycmVudFNldCIsInRvdGFsU2V0cyIsImxlbmd0aCIsInByb2Nlc3NlZFNldHMiLCJzdGFydFRpbWUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJsYXN0VXBkYXRlVGltZSIsInNldE51bWJlciIsIndyaXRlRmlsZVN5bmMiLCJ3ZWJjYW1TcmNQYXRoIiwiam9pbiIsIndlYmNhbURlc3RQYXRoIiwiZXhpc3RzU3luYyIsImNvcHlGaWxlU3luYyIsInNjcmVlblNyY1BhdGgiLCJzY3JlZW5EZXN0UGF0aCIsInBhcmFtRmlsZU5hbWVzIiwicGFyYW1GaWxlTmFtZSIsInBhcmFtU3JjUGF0aCIsInBhcmFtRGVzdFBhdGgiLCJyZXBsYWNlIiwicHVzaCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImVyciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJjYXB0dXJlc1BhdGgiLCJjd2QiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJsb2NrRmlsZVBhdGgiLCJpc1Byb2Nlc3NpbmciLCJwcm9ncmVzc0luZm8iLCJwcm9ncmVzc0RhdGEiLCJyZWFkRmlsZVN5bmMiLCJwYXJzZSIsImNhcHR1cmVGaWxlcyIsInJlYWRkaXJTeW5jIiwiZmlsdGVyIiwiZmlsZSIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsImVuaGFuY2VGaWxlcyIsImNhcHR1cmVDb3VudCIsImVuaGFuY2VDb3VudCIsIm5lZWRzUHJvY2Vzc2luZyIsIkFycmF5IiwiaXNBcnJheSIsImNhcHR1cmVzRGlyIiwibG9nIiwidXNlQmFja2VuZCIsIlVTRV9QWVRIT05fQkFDS0VORCIsInRoZW4iLCJ1bmxpbmtTeW5jIiwiY2F0Y2giLCJzZXRzVG9Qcm9jZXNzIiwicHJvY2Vzc2luZ01ldGhvZCIsImUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/for-process-folder/process-status-api.js\n");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "node-fetch":
/*!*****************************!*\
  !*** external "node-fetch" ***!
  \*****************************/
/***/ ((module) => {

module.exports = require("node-fetch");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffor-process-folder%2Fprocess-status-api&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffor-process-folder%2Fprocess-status-api.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();