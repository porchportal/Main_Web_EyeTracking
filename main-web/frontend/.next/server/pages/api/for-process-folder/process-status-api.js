"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/for-process-folder/process-status-api";
exports.ids = ["pages/api/for-process-folder/process-status-api"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffor-process-folder%2Fprocess-status-api&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffor-process-folder%2Fprocess-status-api.js&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffor-process-folder%2Fprocess-status-api&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffor-process-folder%2Fprocess-status-api.js&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_for_process_folder_process_status_api_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/for-process-folder/process-status-api.js */ \"(api-node)/./pages/api/for-process-folder/process-status-api.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_for_process_folder_process_status_api_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_for_process_folder_process_status_api_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/for-process-folder/process-status-api\",\n        pathname: \"/api/for-process-folder/process-status-api\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_for_process_folder_process_status_api_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGZm9yLXByb2Nlc3MtZm9sZGVyJTJGcHJvY2Vzcy1zdGF0dXMtYXBpJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZmb3ItcHJvY2Vzcy1mb2xkZXIlMkZwcm9jZXNzLXN0YXR1cy1hcGkuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDaUY7QUFDakY7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGdGQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxnRkFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9mb3ItcHJvY2Vzcy1mb2xkZXIvcHJvY2Vzcy1zdGF0dXMtYXBpLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9mb3ItcHJvY2Vzcy1mb2xkZXIvcHJvY2Vzcy1zdGF0dXMtYXBpXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZm9yLXByb2Nlc3MtZm9sZGVyL3Byb2Nlc3Mtc3RhdHVzLWFwaVwiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6ICcnLFxuICAgICAgICBmaWxlbmFtZTogJydcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffor-process-folder%2Fprocess-status-api&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffor-process-folder%2Fprocess-status-api.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/for-process-folder/process-status-api.js":
/*!************************************************************!*\
  !*** ./pages/api/for-process-folder/process-status-api.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! util */ \"util\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_3__);\n// pages/api/process-status-api.js - API to handle process status checks and triggers\n\n\n\n\n// Convert exec to Promise-based\nconst execPromise = util__WEBPACK_IMPORTED_MODULE_3___default().promisify(child_process__WEBPACK_IMPORTED_MODULE_2__.exec);\nasync function handler(req, res) {\n    // Handle GET request to check processing status\n    if (req.method === 'GET') {\n        try {\n            const capturesPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures', 'eye_tracking_captures');\n            const enhancePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures', 'enhance');\n            // Create captures directory if it doesn't exist\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures'))) {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures'), {\n                    recursive: true\n                });\n            }\n            // Create enhance directory if it doesn't exist\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(enhancePath)) {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(enhancePath, {\n                    recursive: true\n                });\n            }\n            // Check if there's a processing.lock file (indicating processing is in progress)\n            const lockFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures', 'processing.lock');\n            const isProcessing = fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(lockFilePath);\n            // Count files in each directory\n            const captureFiles = fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(capturesPath) ? fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(capturesPath).filter((file)=>file.startsWith('webcam_') && file.endsWith('.jpg')).length : 0;\n            const enhanceFiles = fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(enhancePath) ? fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(enhancePath).filter((file)=>file.startsWith('webcam_enhance_') && file.endsWith('.jpg')).length : 0;\n            return res.status(200).json({\n                success: true,\n                isProcessing,\n                captureCount: captureFiles,\n                enhanceCount: enhanceFiles,\n                needsProcessing: captureFiles > enhanceFiles\n            });\n        } catch (error) {\n            console.error('Error checking process status:', error);\n            return res.status(500).json({\n                success: false,\n                error: error.message\n            });\n        }\n    } else if (req.method === 'POST') {\n        try {\n            // Get list of files to process from request body\n            const { setNumbers } = req.body;\n            if (!setNumbers || !Array.isArray(setNumbers) || setNumbers.length === 0) {\n                return res.status(400).json({\n                    success: false,\n                    error: 'No set numbers provided for processing'\n                });\n            }\n            // Make sure the directory exists before creating the lock file\n            const capturesDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures');\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(capturesDir)) {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(capturesDir, {\n                    recursive: true\n                });\n            }\n            // Create lock file to indicate processing is in progress\n            const lockFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(capturesDir, 'processing.lock');\n            try {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(lockFilePath, new Date().toISOString());\n                console.log(`Created lock file at ${lockFilePath}`);\n            } catch (err) {\n                console.error(`Error creating lock file: ${err.message}`);\n                return res.status(500).json({\n                    success: false,\n                    error: `Failed to create lock file: ${err.message}`\n                });\n            }\n            // Create a command to run the Python script with absolute paths\n            const pythonScript = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'backend', 'process_images.py');\n            const setsParam = setNumbers.join(',');\n            // Check if Python script exists and log paths for debugging\n            console.log('Checking for Python script at:', pythonScript);\n            console.log('Current working directory:', process.cwd());\n            console.log('Directory listing for backend folder:');\n            try {\n                const backendDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'backend');\n                if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(backendDir)) {\n                    console.log('Files in backend directory:');\n                    console.log(fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(backendDir));\n                } else {\n                    console.log('Backend directory does not exist at:', backendDir);\n                }\n            } catch (err) {\n                console.error('Error listing backend directory:', err);\n            }\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(pythonScript)) {\n                console.error(`Python script not found at: ${pythonScript}`);\n                // Try alternative locations\n                const altLocations = [\n                    path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'process_images.py'),\n                    path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), '..', 'backend', 'process_images.py')\n                ];\n                let scriptFound = false;\n                for (const loc of altLocations){\n                    console.log('Checking alternative location:', loc);\n                    if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(loc)) {\n                        console.log('Found script at alternative location:', loc);\n                        scriptFound = true;\n                        break;\n                    }\n                }\n                if (!scriptFound) {\n                    // Clean up lock file if script not found\n                    if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(lockFilePath)) {\n                        fs__WEBPACK_IMPORTED_MODULE_0___default().unlinkSync(lockFilePath);\n                    }\n                    return res.status(500).json({\n                        success: false,\n                        error: 'Processing script not found. Checked locations: ' + [\n                            pythonScript,\n                            ...altLocations\n                        ].join(', ')\n                    });\n                }\n            }\n            // Determine Python executable (python3 or python)\n            const pythonCmd = process.platform === 'win32' ? 'python' : 'python3';\n            // Execute the Python script with full path arguments\n            const cmd = `${pythonCmd} \"${pythonScript}\" --sets ${setsParam} --lock \"${lockFilePath}\" --root \"${process.cwd()}\"`;\n            console.log(`Executing command: ${cmd}`);\n            // Execute the Python script asynchronously\n            (0,child_process__WEBPACK_IMPORTED_MODULE_2__.exec)(cmd, (error, stdout, stderr)=>{\n                console.log('Python process started');\n                if (error) {\n                    console.error(`Exec error: ${error}`);\n                    // If there's an error, delete the lock file\n                    try {\n                        if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(lockFilePath)) {\n                            fs__WEBPACK_IMPORTED_MODULE_0___default().unlinkSync(lockFilePath);\n                        }\n                    } catch (e) {\n                        console.error('Error removing lock file:', e);\n                    }\n                    return;\n                }\n                console.log(`Python script output: ${stdout}`);\n                if (stderr) {\n                    console.error(`Python script error: ${stderr}`);\n                }\n            });\n            // Return success immediately, since the processing is happening asynchronously\n            return res.status(200).json({\n                success: true,\n                message: 'Processing started',\n                setsToProcess: setNumbers.length,\n                command: cmd\n            });\n        } catch (error) {\n            console.error('Error triggering processing:', error);\n            // If there's an error, make sure to delete the lock file\n            const lockFilePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), 'public', 'captures', 'processing.lock');\n            if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(lockFilePath)) {\n                try {\n                    fs__WEBPACK_IMPORTED_MODULE_0___default().unlinkSync(lockFilePath);\n                } catch (e) {\n                    console.error('Error removing lock file:', e);\n                }\n            }\n            return res.status(500).json({\n                success: false,\n                error: error.message\n            });\n        }\n    } else {\n        return res.status(405).json({\n            success: false,\n            error: 'Method not allowed'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9mb3ItcHJvY2Vzcy1mb2xkZXIvcHJvY2Vzcy1zdGF0dXMtYXBpLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBLHFGQUFxRjtBQUNqRTtBQUNJO0FBQ2E7QUFDYjtBQUV4QixnQ0FBZ0M7QUFDaEMsTUFBTUksY0FBY0QscURBQWMsQ0FBQ0QsK0NBQUlBO0FBRXhCLGVBQWVJLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxnREFBZ0Q7SUFDaEQsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU87UUFDeEIsSUFBSTtZQUNGLE1BQU1DLGVBQWVULGdEQUFTLENBQUNXLFFBQVFDLEdBQUcsSUFBSSxVQUFVLFlBQVk7WUFDcEUsTUFBTUMsY0FBY2IsZ0RBQVMsQ0FBQ1csUUFBUUMsR0FBRyxJQUFJLFVBQVUsWUFBWTtZQUVuRSxnREFBZ0Q7WUFDaEQsSUFBSSxDQUFDYixvREFBYSxDQUFDQyxnREFBUyxDQUFDVyxRQUFRQyxHQUFHLElBQUksVUFBVSxjQUFjO2dCQUNsRWIsbURBQVksQ0FBQ0MsZ0RBQVMsQ0FBQ1csUUFBUUMsR0FBRyxJQUFJLFVBQVUsYUFBYTtvQkFBRUksV0FBVztnQkFBSztZQUNqRjtZQUVBLCtDQUErQztZQUMvQyxJQUFJLENBQUNqQixvREFBYSxDQUFDYyxjQUFjO2dCQUMvQmQsbURBQVksQ0FBQ2MsYUFBYTtvQkFBRUcsV0FBVztnQkFBSztZQUM5QztZQUVBLGlGQUFpRjtZQUNqRixNQUFNQyxlQUFlakIsZ0RBQVMsQ0FBQ1csUUFBUUMsR0FBRyxJQUFJLFVBQVUsWUFBWTtZQUNwRSxNQUFNTSxlQUFlbkIsb0RBQWEsQ0FBQ2tCO1lBRW5DLGdDQUFnQztZQUNoQyxNQUFNRSxlQUFlcEIsb0RBQWEsQ0FBQ1UsZ0JBQy9CVixxREFBYyxDQUFDVSxjQUFjWSxNQUFNLENBQUNDLENBQUFBLE9BQ2xDQSxLQUFLQyxVQUFVLENBQUMsY0FBY0QsS0FBS0UsUUFBUSxDQUFDLFNBQVNDLE1BQU0sR0FD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a0I7d0JBQ2hCO29CQUNGLEVBQUUsT0FBT3lDLEdBQUc7d0JBQ1Z4QixRQUFRRCxLQUFLLENBQUMsNkJBQTZCeUI7b0JBQzdDO29CQUNBO2dCQUNGO2dCQUNBeEIsUUFBUVUsR0FBRyxDQUFDLENBQUMsc0JBQXNCLEVBQUVZLFFBQVE7Z0JBQzdDLElBQUlDLFFBQVE7b0JBQ1Z2QixRQUFRRCxLQUFLLENBQUMsQ0FBQyxxQkFBcUIsRUFBRXdCLFFBQVE7Z0JBQ2hEO1lBQ0Y7WUFFQSwrRUFBK0U7WUFDL0UsT0FBT2xELElBQUlvQixNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQkMsU0FBUztnQkFDVE0sU0FBUztnQkFDVHdCLGVBQWV2QixXQUFXWCxNQUFNO2dCQUNoQ21DLFNBQVNMO1lBQ1g7UUFDRixFQUFFLE9BQU90QixPQUFPO1lBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0NBO1lBRTlDLHlEQUF5RDtZQUN6RCxNQUFNaEIsZUFBZWpCLGdEQUFTLENBQUNXLFFBQVFDLEdBQUcsSUFBSSxVQUFVLFlBQVk7WUFDcEUsSUFBSWIsb0RBQWEsQ0FBQ2tCLGVBQWU7Z0JBQy9CLElBQUk7b0JBQ0ZsQixvREFBYSxDQUFDa0I7Z0JBQ2hCLEVBQUUsT0FBT3lDLEdBQUc7b0JBQ1Z4QixRQUFRRCxLQUFLLENBQUMsNkJBQTZCeUI7Z0JBQzdDO1lBQ0Y7WUFFQSxPQUFPbkQsSUFBSW9CLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxTQUFTO2dCQUNUSSxPQUFPQSxNQUFNRSxPQUFPO1lBQ3RCO1FBQ0Y7SUFDRixPQUNLO1FBQ0gsT0FBTzVCLElBQUlvQixNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxTQUFTO1lBQ1RJLE9BQU87UUFDVDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9wb3JjaHBvcnRhbDIvRGVza3RvcC/wn5SlZXZlcnl0aGluZy9NYWluX1dlYl9FeWVUcmFja2luZy9tYWluLXdlYi9mcm9udGVuZC9wYWdlcy9hcGkvZm9yLXByb2Nlc3MtZm9sZGVyL3Byb2Nlc3Mtc3RhdHVzLWFwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9hcGkvcHJvY2Vzcy1zdGF0dXMtYXBpLmpzIC0gQVBJIHRvIGhhbmRsZSBwcm9jZXNzIHN0YXR1cyBjaGVja3MgYW5kIHRyaWdnZXJzXG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBleGVjIH0gZnJvbSAnY2hpbGRfcHJvY2Vzcyc7XG5pbXBvcnQgdXRpbCBmcm9tICd1dGlsJztcblxuLy8gQ29udmVydCBleGVjIHRvIFByb21pc2UtYmFzZWRcbmNvbnN0IGV4ZWNQcm9taXNlID0gdXRpbC5wcm9taXNpZnkoZXhlYyk7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgLy8gSGFuZGxlIEdFVCByZXF1ZXN0IHRvIGNoZWNrIHByb2Nlc3Npbmcgc3RhdHVzXG4gIGlmIChyZXEubWV0aG9kID09PSAnR0VUJykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYXB0dXJlc1BhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICdjYXB0dXJlcycsICdleWVfdHJhY2tpbmdfY2FwdHVyZXMnKTtcbiAgICAgIGNvbnN0IGVuaGFuY2VQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnY2FwdHVyZXMnLCAnZW5oYW5jZScpO1xuICAgICAgXG4gICAgICAvLyBDcmVhdGUgY2FwdHVyZXMgZGlyZWN0b3J5IGlmIGl0IGRvZXNuJ3QgZXhpc3RcbiAgICAgIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICdjYXB0dXJlcycpKSkge1xuICAgICAgICBmcy5ta2RpclN5bmMocGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnY2FwdHVyZXMnKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBlbmhhbmNlIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XG4gICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZW5oYW5jZVBhdGgpKSB7XG4gICAgICAgIGZzLm1rZGlyU3luYyhlbmhhbmNlUGF0aCwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSBwcm9jZXNzaW5nLmxvY2sgZmlsZSAoaW5kaWNhdGluZyBwcm9jZXNzaW5nIGlzIGluIHByb2dyZXNzKVxuICAgICAgY29uc3QgbG9ja0ZpbGVQYXRoID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAnY2FwdHVyZXMnLCAncHJvY2Vzc2luZy5sb2NrJyk7XG4gICAgICBjb25zdCBpc1Byb2Nlc3NpbmcgPSBmcy5leGlzdHNTeW5jKGxvY2tGaWxlUGF0aCk7XG4gICAgICBcbiAgICAgIC8vIENvdW50IGZpbGVzIGluIGVhY2ggZGlyZWN0b3J5XG4gICAgICBjb25zdCBjYXB0dXJlRmlsZXMgPSBmcy5leGlzdHNTeW5jKGNhcHR1cmVzUGF0aCkgXG4gICAgICAgID8gZnMucmVhZGRpclN5bmMoY2FwdHVyZXNQYXRoKS5maWx0ZXIoZmlsZSA9PiBcbiAgICAgICAgICAgIGZpbGUuc3RhcnRzV2l0aCgnd2ViY2FtXycpICYmIGZpbGUuZW5kc1dpdGgoJy5qcGcnKSkubGVuZ3RoXG4gICAgICAgIDogMDtcbiAgICAgICAgXG4gICAgICBjb25zdCBlbmhhbmNlRmlsZXMgPSBmcy5leGlzdHNTeW5jKGVuaGFuY2VQYXRoKVxuICAgICAgICA/IGZzLnJlYWRkaXJTeW5jKGVuaGFuY2VQYXRoKS5maWx0ZXIoZmlsZSA9PiBcbiAgICAgICAgICAgIGZpbGUuc3RhcnRzV2l0aCgnd2ViY2FtX2VuaGFuY2VfJykgJiYgZmlsZS5lbmRzV2l0aCgnLmpwZycpKS5sZW5ndGhcbiAgICAgICAgOiAwO1xuICAgICAgXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBpc1Byb2Nlc3NpbmcsXG4gICAgICAgIGNhcHR1cmVDb3VudDogY2FwdHVyZUZpbGVzLFxuICAgICAgICBlbmhhbmNlQ291bnQ6IGVuaGFuY2VGaWxlcyxcbiAgICAgICAgbmVlZHNQcm9jZXNzaW5nOiBjYXB0dXJlRmlsZXMgPiBlbmhhbmNlRmlsZXNcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBwcm9jZXNzIHN0YXR1czonLCBlcnJvcik7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvLyBIYW5kbGUgUE9TVCByZXF1ZXN0IHRvIHRyaWdnZXIgcHJvY2Vzc2luZ1xuICBlbHNlIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGxpc3Qgb2YgZmlsZXMgdG8gcHJvY2VzcyBmcm9tIHJlcXVlc3QgYm9keVxuICAgICAgY29uc3QgeyBzZXROdW1iZXJzIH0gPSByZXEuYm9keTtcbiAgICAgIFxuICAgICAgaWYgKCFzZXROdW1iZXJzIHx8ICFBcnJheS5pc0FycmF5KHNldE51bWJlcnMpIHx8IHNldE51bWJlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdObyBzZXQgbnVtYmVycyBwcm92aWRlZCBmb3IgcHJvY2Vzc2luZydcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgZGlyZWN0b3J5IGV4aXN0cyBiZWZvcmUgY3JlYXRpbmcgdGhlIGxvY2sgZmlsZVxuICAgICAgY29uc3QgY2FwdHVyZXNEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICdjYXB0dXJlcycpO1xuICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGNhcHR1cmVzRGlyKSkge1xuICAgICAgICBmcy5ta2RpclN5bmMoY2FwdHVyZXNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgbG9jayBmaWxlIHRvIGluZGljYXRlIHByb2Nlc3NpbmcgaXMgaW4gcHJvZ3Jlc3NcbiAgICAgIGNvbnN0IGxvY2tGaWxlUGF0aCA9IHBhdGguam9pbihjYXB0dXJlc0RpciwgJ3Byb2Nlc3NpbmcubG9jaycpO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKGxvY2tGaWxlUGF0aCwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpKTtcbiAgICAgICAgY29uc29sZS5sb2coYENyZWF0ZWQgbG9jayBmaWxlIGF0ICR7bG9ja0ZpbGVQYXRofWApO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGNyZWF0aW5nIGxvY2sgZmlsZTogJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogYEZhaWxlZCB0byBjcmVhdGUgbG9jayBmaWxlOiAke2Vyci5tZXNzYWdlfWBcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBhIGNvbW1hbmQgdG8gcnVuIHRoZSBQeXRob24gc2NyaXB0IHdpdGggYWJzb2x1dGUgcGF0aHNcbiAgICAgIGNvbnN0IHB5dGhvblNjcmlwdCA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnYmFja2VuZCcsICdwcm9jZXNzX2ltYWdlcy5weScpO1xuICAgICAgY29uc3Qgc2V0c1BhcmFtID0gc2V0TnVtYmVycy5qb2luKCcsJyk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGlmIFB5dGhvbiBzY3JpcHQgZXhpc3RzIGFuZCBsb2cgcGF0aHMgZm9yIGRlYnVnZ2luZ1xuICAgICAgY29uc29sZS5sb2coJ0NoZWNraW5nIGZvciBQeXRob24gc2NyaXB0IGF0OicsIHB5dGhvblNjcmlwdCk7XG4gICAgICBjb25zb2xlLmxvZygnQ3VycmVudCB3b3JraW5nIGRpcmVjdG9yeTonLCBwcm9jZXNzLmN3ZCgpKTtcbiAgICAgIGNvbnNvbGUubG9nKCdEaXJlY3RvcnkgbGlzdGluZyBmb3IgYmFja2VuZCBmb2xkZXI6Jyk7XG4gICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGJhY2tlbmREaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2JhY2tlbmQnKTtcbiAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoYmFja2VuZERpcikpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmlsZXMgaW4gYmFja2VuZCBkaXJlY3Rvcnk6Jyk7XG4gICAgICAgICAgY29uc29sZS5sb2coZnMucmVhZGRpclN5bmMoYmFja2VuZERpcikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdCYWNrZW5kIGRpcmVjdG9yeSBkb2VzIG5vdCBleGlzdCBhdDonLCBiYWNrZW5kRGlyKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxpc3RpbmcgYmFja2VuZCBkaXJlY3Rvcnk6JywgZXJyKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKHB5dGhvblNjcmlwdCkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgUHl0aG9uIHNjcmlwdCBub3QgZm91bmQgYXQ6ICR7cHl0aG9uU2NyaXB0fWApO1xuICAgICAgICAvLyBUcnkgYWx0ZXJuYXRpdmUgbG9jYXRpb25zXG4gICAgICAgIGNvbnN0IGFsdExvY2F0aW9ucyA9IFtcbiAgICAgICAgICBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3Byb2Nlc3NfaW1hZ2VzLnB5JyksXG4gICAgICAgICAgcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICcuLicsICdiYWNrZW5kJywgJ3Byb2Nlc3NfaW1hZ2VzLnB5JylcbiAgICAgICAgXTtcbiAgICAgICAgXG4gICAgICAgIGxldCBzY3JpcHRGb3VuZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGNvbnN0IGxvYyBvZiBhbHRMb2NhdGlvbnMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgYWx0ZXJuYXRpdmUgbG9jYXRpb246JywgbG9jKTtcbiAgICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhsb2MpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgc2NyaXB0IGF0IGFsdGVybmF0aXZlIGxvY2F0aW9uOicsIGxvYyk7XG4gICAgICAgICAgICBzY3JpcHRGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghc2NyaXB0Rm91bmQpIHtcbiAgICAgICAgICAvLyBDbGVhbiB1cCBsb2NrIGZpbGUgaWYgc2NyaXB0IG5vdCBmb3VuZFxuICAgICAgICAgIGlmIChmcy5leGlzdHNTeW5jKGxvY2tGaWxlUGF0aCkpIHtcbiAgICAgICAgICAgIGZzLnVubGlua1N5bmMobG9ja0ZpbGVQYXRoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6ICdQcm9jZXNzaW5nIHNjcmlwdCBub3QgZm91bmQuIENoZWNrZWQgbG9jYXRpb25zOiAnICsgXG4gICAgICAgICAgICAgICAgICAgW3B5dGhvblNjcmlwdCwgLi4uYWx0TG9jYXRpb25zXS5qb2luKCcsICcpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRGV0ZXJtaW5lIFB5dGhvbiBleGVjdXRhYmxlIChweXRob24zIG9yIHB5dGhvbilcbiAgICAgIGNvbnN0IHB5dGhvbkNtZCA9IHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMicgPyAncHl0aG9uJyA6ICdweXRob24zJztcbiAgICAgIFxuICAgICAgLy8gRXhlY3V0ZSB0aGUgUHl0aG9uIHNjcmlwdCB3aXRoIGZ1bGwgcGF0aCBhcmd1bWVudHNcbiAgICAgIGNvbnN0IGNtZCA9IGAke3B5dGhvbkNtZH0gXCIke3B5dGhvblNjcmlwdH1cIiAtLXNldHMgJHtzZXRzUGFyYW19IC0tbG9jayBcIiR7bG9ja0ZpbGVQYXRofVwiIC0tcm9vdCBcIiR7cHJvY2Vzcy5jd2QoKX1cImA7XG4gICAgICBjb25zb2xlLmxvZyhgRXhlY3V0aW5nIGNvbW1hbmQ6ICR7Y21kfWApO1xuICAgICAgXG4gICAgICAvLyBFeGVjdXRlIHRoZSBQeXRob24gc2NyaXB0IGFzeW5jaHJvbm91c2x5XG4gICAgICBleGVjKGNtZCwgKGVycm9yLCBzdGRvdXQsIHN0ZGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnUHl0aG9uIHByb2Nlc3Mgc3RhcnRlZCcpO1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFeGVjIGVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgIC8vIElmIHRoZXJlJ3MgYW4gZXJyb3IsIGRlbGV0ZSB0aGUgbG9jayBmaWxlXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmcy5leGlzdHNTeW5jKGxvY2tGaWxlUGF0aCkpIHtcbiAgICAgICAgICAgICAgZnMudW5saW5rU3luYyhsb2NrRmlsZVBhdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlbW92aW5nIGxvY2sgZmlsZTonLCBlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGBQeXRob24gc2NyaXB0IG91dHB1dDogJHtzdGRvdXR9YCk7XG4gICAgICAgIGlmIChzdGRlcnIpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBQeXRob24gc2NyaXB0IGVycm9yOiAke3N0ZGVycn1gKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFJldHVybiBzdWNjZXNzIGltbWVkaWF0ZWx5LCBzaW5jZSB0aGUgcHJvY2Vzc2luZyBpcyBoYXBwZW5pbmcgYXN5bmNocm9ub3VzbHlcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdQcm9jZXNzaW5nIHN0YXJ0ZWQnLFxuICAgICAgICBzZXRzVG9Qcm9jZXNzOiBzZXROdW1iZXJzLmxlbmd0aCxcbiAgICAgICAgY29tbWFuZDogY21kXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdHJpZ2dlcmluZyBwcm9jZXNzaW5nOicsIGVycm9yKTtcbiAgICAgIFxuICAgICAgLy8gSWYgdGhlcmUncyBhbiBlcnJvciwgbWFrZSBzdXJlIHRvIGRlbGV0ZSB0aGUgbG9jayBmaWxlXG4gICAgICBjb25zdCBsb2NrRmlsZVBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICdjYXB0dXJlcycsICdwcm9jZXNzaW5nLmxvY2snKTtcbiAgICAgIGlmIChmcy5leGlzdHNTeW5jKGxvY2tGaWxlUGF0aCkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmcy51bmxpbmtTeW5jKGxvY2tGaWxlUGF0aCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW1vdmluZyBsb2NrIGZpbGU6JywgZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgXG4gICAgfSk7XG4gIH1cbn0iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiZXhlYyIsInV0aWwiLCJleGVjUHJvbWlzZSIsInByb21pc2lmeSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJjYXB0dXJlc1BhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImVuaGFuY2VQYXRoIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsImxvY2tGaWxlUGF0aCIsImlzUHJvY2Vzc2luZyIsImNhcHR1cmVGaWxlcyIsInJlYWRkaXJTeW5jIiwiZmlsdGVyIiwiZmlsZSIsInN0YXJ0c1dpdGgiLCJlbmRzV2l0aCIsImxlbmd0aCIsImVuaGFuY2VGaWxlcyIsInN0YXR1cyIsImpzb24iLCJzdWNjZXNzIiwiY2FwdHVyZUNvdW50IiwiZW5oYW5jZUNvdW50IiwibmVlZHNQcm9jZXNzaW5nIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsInNldE51bWJlcnMiLCJib2R5IiwiQXJyYXkiLCJpc0FycmF5IiwiY2FwdHVyZXNEaXIiLCJ3cml0ZUZpbGVTeW5jIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwibG9nIiwiZXJyIiwicHl0aG9uU2NyaXB0Iiwic2V0c1BhcmFtIiwiYmFja2VuZERpciIsImFsdExvY2F0aW9ucyIsInNjcmlwdEZvdW5kIiwibG9jIiwidW5saW5rU3luYyIsInB5dGhvbkNtZCIsInBsYXRmb3JtIiwiY21kIiwic3Rkb3V0Iiwic3RkZXJyIiwiZSIsInNldHNUb1Byb2Nlc3MiLCJjb21tYW5kIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/for-process-folder/process-status-api.js\n");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

module.exports = require("child_process");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Ffor-process-folder%2Fprocess-status-api&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Ffor-process-folder%2Fprocess-status-api.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();