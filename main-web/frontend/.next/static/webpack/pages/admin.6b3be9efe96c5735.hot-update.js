"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/admin",{

/***/ "(pages-dir-browser)/./pages/collected-dataset-customized/components-gui/adminSettings.js":
/*!****************************************************************************!*\
  !*** ./pages/collected-dataset-customized/components-gui/adminSettings.js ***!
  \****************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ AdminSettings),\n/* harmony export */   useAdminSettings: () => (/* binding */ useAdminSettings)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(pages-dir-browser)/./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(pages-dir-browser)/./node_modules/next/dist/build/polyfills/process.js\");\nvar _s = $RefreshSig$();\n\nconst useAdminSettings = (ref)=>{\n    _s();\n    const [settings, setSettings] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n    const [currentUserId, setCurrentUserId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isTopBarUpdated, setIsTopBarUpdated] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const initialized = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const pollingInterval = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const [currentSettings, setCurrentSettings] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({});\n    // Helper: Fetch settings for a user from backend\n    const fetchSettingsForUser = async (userId)=>{\n        console.log('[fetchSettingsForUser] userId:', userId); // Debug log\n        if (!userId) return;\n        try {\n            const response = await fetch(\"/api/data-center/settings/\".concat(userId), {\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json',\n                    'X-API-Key': process.env.NEXT_PUBLIC_API_KEY || 'A1B2C3D4-E5F6-7890-GHIJ-KLMNOPQRSTUV'\n                }\n            });\n            if (!response.ok) {\n                const errorData = await response.json().catch(()=>({}));\n                throw new Error(errorData.detail || 'Failed to fetch settings');\n            }\n            const result = await response.json();\n            // result.data contains the settings object\n            const newSettings = result.data || {};\n            setSettings((prev)=>({\n                    ...prev,\n                    [userId]: newSettings\n                }));\n            setCurrentSettings(newSettings);\n            setError(null);\n            // Update TopBar if ref provided\n            if (ref && ref.current && ref.current.setCaptureSettings) {\n                ref.current.setCaptureSettings(newSettings);\n                setIsTopBarUpdated(true);\n            }\n            return newSettings;\n        } catch (error) {\n            setError(error.message);\n            return null;\n        }\n    };\n    // Polling for settings updates\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAdminSettings.useEffect\": ()=>{\n            if (!currentUserId) return;\n            console.log('[Polling useEffect] currentUserId:', currentUserId); // Debug log\n            const fetchSettings = {\n                \"useAdminSettings.useEffect.fetchSettings\": ()=>fetchSettingsForUser(currentUserId)\n            }[\"useAdminSettings.useEffect.fetchSettings\"];\n            fetchSettings();\n            pollingInterval.current = setInterval(fetchSettings, 3000);\n            return ({\n                \"useAdminSettings.useEffect\": ()=>{\n                    if (pollingInterval.current) clearInterval(pollingInterval.current);\n                }\n            })[\"useAdminSettings.useEffect\"];\n        }\n    }[\"useAdminSettings.useEffect\"], [\n        currentUserId,\n        ref\n    ]);\n    // Listen for userId changes (from index.js navigation)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAdminSettings.useEffect\": ()=>{\n            const handleUserIdChange = {\n                \"useAdminSettings.useEffect.handleUserIdChange\": (event)=>{\n                    if (event.detail && event.detail.userId) {\n                        console.log('[handleUserIdChange] userId:', event.detail.userId); // Debug log\n                        setCurrentUserId(event.detail.userId);\n                        fetchSettingsForUser(event.detail.userId);\n                    }\n                }\n            }[\"useAdminSettings.useEffect.handleUserIdChange\"];\n            window.addEventListener('userIdChange', handleUserIdChange);\n            return ({\n                \"useAdminSettings.useEffect\": ()=>window.removeEventListener('userIdChange', handleUserIdChange)\n            })[\"useAdminSettings.useEffect\"];\n        }\n    }[\"useAdminSettings.useEffect\"], [\n        ref\n    ]);\n    // Effect to handle index.js update after TopBar is updated\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAdminSettings.useEffect\": ()=>{\n            if (isTopBarUpdated) {\n                const event = new CustomEvent('settingsUpdated', {\n                    detail: {\n                        type: 'settings',\n                        userId: currentUserId,\n                        settings: settings[currentUserId]\n                    }\n                });\n                window.dispatchEvent(event);\n                setIsTopBarUpdated(false);\n            }\n        }\n    }[\"useAdminSettings.useEffect\"], [\n        isTopBarUpdated,\n        currentUserId,\n        settings\n    ]);\n    // Load settings from localStorage on mount (optional, fallback)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAdminSettings.useEffect\": ()=>{\n            try {\n                const savedSettings = localStorage.getItem('adminSettings');\n                if (savedSettings) {\n                    const parsedSettings = JSON.parse(savedSettings);\n                    setSettings(parsedSettings);\n                }\n            } catch (error) {\n            // Ignore\n            }\n        }\n    }[\"useAdminSettings.useEffect\"], []);\n    // Save settings to localStorage when they change (optional)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAdminSettings.useEffect\": ()=>{\n            if (initialized.current) {\n                try {\n                    localStorage.setItem('adminSettings', JSON.stringify(settings));\n                } catch (error) {}\n            } else {\n                initialized.current = true;\n            }\n        }\n    }[\"useAdminSettings.useEffect\"], [\n        settings\n    ]);\n    // Update settings when they change in the context\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAdminSettings.useEffect\": ()=>{\n            if (settings && currentUserId) {\n                console.log('[settings useEffect] currentUserId:', currentUserId); // Debug log\n                const userSettings = settings[currentUserId];\n                if (userSettings) {\n                    setCurrentSettings(userSettings);\n                // Optionally update UI elements if needed\n                }\n            }\n        }\n    }[\"useAdminSettings.useEffect\"], [\n        settings,\n        currentUserId\n    ]);\n    // Listen for settings updates from admin page (captureSettingsUpdate event)\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAdminSettings.useEffect\": ()=>{\n            const handleSettingsUpdate = {\n                \"useAdminSettings.useEffect.handleSettingsUpdate\": (event)=>{\n                    if (event.detail && event.detail.type === 'captureSettings') {\n                        const { userId, times, delay } = event.detail;\n                        console.log('[handleSettingsUpdate] userId:', userId, 'currentUserId:', currentUserId); // Debug log\n                        if (userId === currentUserId) {\n                            const newSettings = {\n                                ...currentSettings,\n                                times: times !== undefined ? Number(times) : currentSettings.times,\n                                delay: delay !== undefined ? Number(delay) : currentSettings.delay\n                            };\n                            setCurrentSettings(newSettings);\n                            setSettings({\n                                \"useAdminSettings.useEffect.handleSettingsUpdate\": (prev)=>({\n                                        ...prev,\n                                        [userId]: newSettings\n                                    })\n                            }[\"useAdminSettings.useEffect.handleSettingsUpdate\"]);\n                            updateSettings(newSettings, userId);\n                        }\n                    }\n                }\n            }[\"useAdminSettings.useEffect.handleSettingsUpdate\"];\n            window.addEventListener('captureSettingsUpdate', handleSettingsUpdate);\n            return ({\n                \"useAdminSettings.useEffect\": ()=>window.removeEventListener('captureSettingsUpdate', handleSettingsUpdate)\n            })[\"useAdminSettings.useEffect\"];\n        }\n    }[\"useAdminSettings.useEffect\"], [\n        currentUserId,\n        currentSettings\n    ]);\n    // Update settings for a user (times, delay, image, etc.)\n    const updateSettings = async (newSettings, userId)=>{\n        console.log('[updateSettings] userId:', userId); // Debug log\n        if (!userId) return;\n        const updatedSettings = {\n            ...settings[userId],\n            ...newSettings\n        };\n        setSettings((prev)=>({\n                ...prev,\n                [userId]: updatedSettings\n            }));\n        try {\n            const response = await fetch(\"/api/data-center/settings/\".concat(userId), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'X-API-Key': process.env.NEXT_PUBLIC_API_KEY || 'A1B2C3D4-E5F6-7890-GHIJ-KLMNOPQRSTUV'\n                },\n                body: JSON.stringify(updatedSettings)\n            });\n            if (!response.ok) {\n                const errorData = await response.json().catch(()=>({}));\n                throw new Error(errorData.detail || 'Failed to save settings');\n            }\n            const result = await response.json();\n            setSettings((prev)=>({\n                    ...prev,\n                    [userId]: result.data || updatedSettings\n                }));\n            setCurrentSettings(result.data || updatedSettings);\n            setError(null);\n        } catch (error) {\n            setError(error.message);\n        }\n    };\n    // Upload and update image for a user\n    const updateImage = async (userId, base64Image)=>{\n        console.log('[updateImage] userId:', userId); // Debug log\n        if (!userId || !base64Image) return;\n        try {\n            const response = await fetch(\"/api/data-center/image?user_id=\".concat(userId), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'X-API-Key': process.env.NEXT_PUBLIC_API_KEY || 'A1B2C3D4-E5F6-7890-GHIJ-KLMNOPQRSTUV'\n                },\n                body: JSON.stringify({\n                    image: base64Image\n                })\n            });\n            if (!response.ok) {\n                const errorData = await response.json().catch(()=>({}));\n                throw new Error(errorData.detail || 'Failed to upload image');\n            }\n            // Optionally, fetch settings again to get updated image info\n            await fetchSettingsForUser(userId);\n            setError(null);\n            return true;\n        } catch (error) {\n            setError(error.message);\n            return false;\n        }\n    };\n    return {\n        settings,\n        updateSettings,\n        updateImage,\n        error\n    };\n};\n_s(useAdminSettings, \"Pa1ccxuHXyKzm3UqydzYSy2ETpE=\");\n// Add default export component\nfunction AdminSettings() {\n    return null; // This is a utility file, so we don't need to render anything\n}\n_c = AdminSettings;\nvar _c;\n$RefreshReg$(_c, \"AdminSettings\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHBhZ2VzLWRpci1icm93c2VyKS8uL3BhZ2VzL2NvbGxlY3RlZC1kYXRhc2V0LWN1c3RvbWl6ZWQvY29tcG9uZW50cy1ndWkvYWRtaW5TZXR0aW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBb0Q7QUFFN0MsTUFBTUcsbUJBQW1CLENBQUNDOztJQUMvQixNQUFNLENBQUNDLFVBQVVDLFlBQVksR0FBR0osK0NBQVFBLENBQUMsQ0FBQztJQUMxQyxNQUFNLENBQUNLLGVBQWVDLGlCQUFpQixHQUFHTiwrQ0FBUUEsQ0FBQztJQUNuRCxNQUFNLENBQUNPLGlCQUFpQkMsbUJBQW1CLEdBQUdSLCtDQUFRQSxDQUFDO0lBQ3ZELE1BQU0sQ0FBQ1MsT0FBT0MsU0FBUyxHQUFHViwrQ0FBUUEsQ0FBQztJQUNuQyxNQUFNVyxjQUFjWiw2Q0FBTUEsQ0FBQztJQUMzQixNQUFNYSxrQkFBa0JiLDZDQUFNQSxDQUFDO0lBQy9CLE1BQU0sQ0FBQ2MsaUJBQWlCQyxtQkFBbUIsR0FBR2QsK0NBQVFBLENBQUMsQ0FBQztJQUV4RCxpREFBaUQ7SUFDakQsTUFBTWUsdUJBQXVCLE9BQU9DO1FBQ2xDQyxRQUFRQyxHQUFHLENBQUMsa0NBQWtDRixTQUFTLFlBQVk7UUFDbkUsSUFBSSxDQUFDQSxRQUFRO1FBQ2IsSUFBSTtZQUNGLE1BQU1HLFdBQVcsTUFBTUMsTUFBTSw2QkFBb0MsT0FBUEosU0FBVTtnQkFDbEVLLFNBQVM7b0JBQ1AsVUFBVTtvQkFDVixnQkFBZ0I7b0JBQ2hCLGFBQWFDLE9BQU9BLENBQUNDLEdBQUcsQ0FBQ0MsbUJBQW1CLElBQUk7Z0JBQ2xEO1lBQ0Y7WUFDQSxJQUFJLENBQUNMLFNBQVNNLEVBQUUsRUFBRTtnQkFDaEIsTUFBTUMsWUFBWSxNQUFNUCxTQUFTUSxJQUFJLEdBQUdDLEtBQUssQ0FBQyxJQUFPLEVBQUM7Z0JBQ3RELE1BQU0sSUFBSUMsTUFBTUgsVUFBVUksTUFBTSxJQUFJO1lBQ3RDO1lBQ0EsTUFBTUMsU0FBUyxNQUFNWixTQUFTUSxJQUFJ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QkFDdkVpRCxRQUFRO2dCQUNSNUMsU0FBUztvQkFDUCxnQkFBZ0I7b0JBQ2hCLGFBQWFDLE9BQU9BLENBQUNDLEdBQUcsQ0FBQ0MsbUJBQW1CLElBQUk7Z0JBQ2xEO2dCQUNBMEMsTUFBTWIsS0FBS0csU0FBUyxDQUFDO29CQUFFYSxPQUFPRDtnQkFBWTtZQUM1QztZQUNBLElBQUksQ0FBQ2pELFNBQVNNLEVBQUUsRUFBRTtnQkFDaEIsTUFBTUMsWUFBWSxNQUFNUCxTQUFTUSxJQUFJLEdBQUdDLEtBQUssQ0FBQyxJQUFPLEVBQUM7Z0JBQ3RELE1BQU0sSUFBSUMsTUFBTUgsVUFBVUksTUFBTSxJQUFJO1lBQ3RDO1lBQ0EsNkRBQTZEO1lBQzdELE1BQU1mLHFCQUFxQkM7WUFDM0JOLFNBQVM7WUFDVCxPQUFPO1FBQ1QsRUFBRSxPQUFPRCxPQUFPO1lBQ2RDLFNBQVNELE1BQU00QixPQUFPO1lBQ3RCLE9BQU87UUFDVDtJQUNGO0lBRUEsT0FBTztRQUFFbEM7UUFBVTREO1FBQWdCSTtRQUFhMUQ7SUFBTTtBQUN4RCxFQUFFO0dBM01XUjtBQTZNYiwrQkFBK0I7QUFDaEIsU0FBU3FFO0lBQ3RCLE9BQU8sTUFBTSw4REFBOEQ7QUFDN0U7S0FGd0JBIiwic291cmNlcyI6WyIvVXNlcnMvcG9yY2hwb3J0YWwyL0Rlc2t0b3Av8J+UpWV2ZXJ5dGhpbmcvTWFpbl9XZWJfRXllVHJhY2tpbmcvbWFpbi13ZWIvZnJvbnRlbmQvcGFnZXMvY29sbGVjdGVkLWRhdGFzZXQtY3VzdG9taXplZC9jb21wb25lbnRzLWd1aS9hZG1pblNldHRpbmdzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGNvbnN0IHVzZUFkbWluU2V0dGluZ3MgPSAocmVmKSA9PiB7XG4gIGNvbnN0IFtzZXR0aW5ncywgc2V0U2V0dGluZ3NdID0gdXNlU3RhdGUoe30pO1xuICBjb25zdCBbY3VycmVudFVzZXJJZCwgc2V0Q3VycmVudFVzZXJJZF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW2lzVG9wQmFyVXBkYXRlZCwgc2V0SXNUb3BCYXJVcGRhdGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgaW5pdGlhbGl6ZWQgPSB1c2VSZWYoZmFsc2UpO1xuICBjb25zdCBwb2xsaW5nSW50ZXJ2YWwgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IFtjdXJyZW50U2V0dGluZ3MsIHNldEN1cnJlbnRTZXR0aW5nc10gPSB1c2VTdGF0ZSh7fSk7XG5cbiAgLy8gSGVscGVyOiBGZXRjaCBzZXR0aW5ncyBmb3IgYSB1c2VyIGZyb20gYmFja2VuZFxuICBjb25zdCBmZXRjaFNldHRpbmdzRm9yVXNlciA9IGFzeW5jICh1c2VySWQpID0+IHtcbiAgICBjb25zb2xlLmxvZygnW2ZldGNoU2V0dGluZ3NGb3JVc2VyXSB1c2VySWQ6JywgdXNlcklkKTsgLy8gRGVidWcgbG9nXG4gICAgaWYgKCF1c2VySWQpIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgL2FwaS9kYXRhLWNlbnRlci9zZXR0aW5ncy8ke3VzZXJJZH1gLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgJ1gtQVBJLUtleSc6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9LRVkgfHwgJ0ExQjJDM0Q0LUU1RjYtNzg5MC1HSElKLUtMTU5PUFFSU1RVVidcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5kZXRhaWwgfHwgJ0ZhaWxlZCB0byBmZXRjaCBzZXR0aW5ncycpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgLy8gcmVzdWx0LmRhdGEgY29udGFpbnMgdGhlIHNldHRpbmdzIG9iamVjdFxuICAgICAgY29uc3QgbmV3U2V0dGluZ3MgPSByZXN1bHQuZGF0YSB8fCB7fTtcbiAgICAgIHNldFNldHRpbmdzKHByZXYgPT4gKHtcbiAgICAgICAgLi4ucHJldixcbiAgICAgICAgW3VzZXJJZF06IG5ld1NldHRpbmdzXG4gICAgICB9KSk7XG4gICAgICBzZXRDdXJyZW50U2V0dGluZ3MobmV3U2V0dGluZ3MpO1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICAvLyBVcGRhdGUgVG9wQmFyIGlmIHJlZiBwcm92aWRlZFxuICAgICAgaWYgKHJlZiAmJiByZWYuY3VycmVudCAmJiByZWYuY3VycmVudC5zZXRDYXB0dXJlU2V0dGluZ3MpIHtcbiAgICAgICAgcmVmLmN1cnJlbnQuc2V0Q2FwdHVyZVNldHRpbmdzKG5ld1NldHRpbmdzKTtcbiAgICAgICAgc2V0SXNUb3BCYXJVcGRhdGVkKHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ld1NldHRpbmdzO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfTtcblxuICAvLyBQb2xsaW5nIGZvciBzZXR0aW5ncyB1cGRhdGVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFjdXJyZW50VXNlcklkKSByZXR1cm47XG4gICAgY29uc29sZS5sb2coJ1tQb2xsaW5nIHVzZUVmZmVjdF0gY3VycmVudFVzZXJJZDonLCBjdXJyZW50VXNlcklkKTsgLy8gRGVidWcgbG9nXG4gICAgY29uc3QgZmV0Y2hTZXR0aW5ncyA9ICgpID0+IGZldGNoU2V0dGluZ3NGb3JVc2VyKGN1cnJlbnRVc2VySWQpO1xuICAgIGZldGNoU2V0dGluZ3MoKTtcbiAgICBwb2xsaW5nSW50ZXJ2YWwuY3VycmVudCA9IHNldEludGVydmFsKGZldGNoU2V0dGluZ3MsIDMwMDApO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAocG9sbGluZ0ludGVydmFsLmN1cnJlbnQpIGNsZWFySW50ZXJ2YWwocG9sbGluZ0ludGVydmFsLmN1cnJlbnQpO1xuICAgIH07XG4gIH0sIFtjdXJyZW50VXNlcklkLCByZWZdKTtcblxuICAvLyBMaXN0ZW4gZm9yIHVzZXJJZCBjaGFuZ2VzIChmcm9tIGluZGV4LmpzIG5hdmlnYXRpb24pXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlVXNlcklkQ2hhbmdlID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQuZGV0YWlsICYmIGV2ZW50LmRldGFpbC51c2VySWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1toYW5kbGVVc2VySWRDaGFuZ2VdIHVzZXJJZDonLCBldmVudC5kZXRhaWwudXNlcklkKTsgLy8gRGVidWcgbG9nXG4gICAgICAgIHNldEN1cnJlbnRVc2VySWQoZXZlbnQuZGV0YWlsLnVzZXJJZCk7XG4gICAgICAgIGZldGNoU2V0dGluZ3NGb3JVc2VyKGV2ZW50LmRldGFpbC51c2VySWQpO1xuICAgICAgfVxuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VzZXJJZENoYW5nZScsIGhhbmRsZVVzZXJJZENoYW5nZSk7XG4gICAgcmV0dXJuICgpID0+IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd1c2VySWRDaGFuZ2UnLCBoYW5kbGVVc2VySWRDaGFuZ2UpO1xuICB9LCBbcmVmXSk7XG5cbiAgLy8gRWZmZWN0IHRvIGhhbmRsZSBpbmRleC5qcyB1cGRhdGUgYWZ0ZXIgVG9wQmFyIGlzIHVwZGF0ZWRcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoaXNUb3BCYXJVcGRhdGVkKSB7XG4gICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnc2V0dGluZ3NVcGRhdGVkJywge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICB0eXBlOiAnc2V0dGluZ3MnLFxuICAgICAgICAgIHVzZXJJZDogY3VycmVudFVzZXJJZCxcbiAgICAgICAgICBzZXR0aW5nczogc2V0dGluZ3NbY3VycmVudFVzZXJJZF1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICBzZXRJc1RvcEJhclVwZGF0ZWQoZmFsc2UpO1xuICAgIH1cbiAgfSwgW2lzVG9wQmFyVXBkYXRlZCwgY3VycmVudFVzZXJJZCwgc2V0dGluZ3NdKTtcblxuICAvLyBMb2FkIHNldHRpbmdzIGZyb20gbG9jYWxTdG9yYWdlIG9uIG1vdW50IChvcHRpb25hbCwgZmFsbGJhY2spXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHNhdmVkU2V0dGluZ3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYWRtaW5TZXR0aW5ncycpO1xuICAgICAgaWYgKHNhdmVkU2V0dGluZ3MpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkU2V0dGluZ3MgPSBKU09OLnBhcnNlKHNhdmVkU2V0dGluZ3MpO1xuICAgICAgICBzZXRTZXR0aW5ncyhwYXJzZWRTZXR0aW5ncyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIC8vIElnbm9yZVxuICAgIH1cbiAgfSwgW10pO1xuXG4gIC8vIFNhdmUgc2V0dGluZ3MgdG8gbG9jYWxTdG9yYWdlIHdoZW4gdGhleSBjaGFuZ2UgKG9wdGlvbmFsKVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChpbml0aWFsaXplZC5jdXJyZW50KSB7XG4gICAgICB0cnkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWRtaW5TZXR0aW5ncycsIEpTT04uc3RyaW5naWZ5KHNldHRpbmdzKSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge31cbiAgICB9IGVsc2Uge1xuICAgICAgaW5pdGlhbGl6ZWQuY3VycmVudCA9IHRydWU7XG4gICAgfVxuICB9LCBbc2V0dGluZ3NdKTtcblxuICAvLyBVcGRhdGUgc2V0dGluZ3Mgd2hlbiB0aGV5IGNoYW5nZSBpbiB0aGUgY29udGV4dFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzZXR0aW5ncyAmJiBjdXJyZW50VXNlcklkKSB7XG4gICAgICBjb25zb2xlLmxvZygnW3NldHRpbmdzIHVzZUVmZmVjdF0gY3VycmVudFVzZXJJZDonLCBjdXJyZW50VXNlcklkKTsgLy8gRGVidWcgbG9nXG4gICAgICBjb25zdCB1c2VyU2V0dGluZ3MgPSBzZXR0aW5nc1tjdXJyZW50VXNlcklkXTtcbiAgICAgIGlmICh1c2VyU2V0dGluZ3MpIHtcbiAgICAgICAgc2V0Q3VycmVudFNldHRpbmdzKHVzZXJTZXR0aW5ncyk7XG4gICAgICAgIC8vIE9wdGlvbmFsbHkgdXBkYXRlIFVJIGVsZW1lbnRzIGlmIG5lZWRlZFxuICAgICAgfVxuICAgIH1cbiAgfSwgW3NldHRpbmdzLCBjdXJyZW50VXNlcklkXSk7XG5cbiAgLy8gTGlzdGVuIGZvciBzZXR0aW5ncyB1cGRhdGVzIGZyb20gYWRtaW4gcGFnZSAoY2FwdHVyZVNldHRpbmdzVXBkYXRlIGV2ZW50KVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZVNldHRpbmdzVXBkYXRlID0gKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoZXZlbnQuZGV0YWlsICYmIGV2ZW50LmRldGFpbC50eXBlID09PSAnY2FwdHVyZVNldHRpbmdzJykge1xuICAgICAgICBjb25zdCB7IHVzZXJJZCwgdGltZXMsIGRlbGF5IH0gPSBldmVudC5kZXRhaWw7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbaGFuZGxlU2V0dGluZ3NVcGRhdGVdIHVzZXJJZDonLCB1c2VySWQsICdjdXJyZW50VXNlcklkOicsIGN1cnJlbnRVc2VySWQpOyAvLyBEZWJ1ZyBsb2dcbiAgICAgICAgaWYgKHVzZXJJZCA9PT0gY3VycmVudFVzZXJJZCkge1xuICAgICAgICAgIGNvbnN0IG5ld1NldHRpbmdzID0ge1xuICAgICAgICAgICAgLi4uY3VycmVudFNldHRpbmdzLFxuICAgICAgICAgICAgdGltZXM6IHRpbWVzICE9PSB1bmRlZmluZWQgPyBOdW1iZXIodGltZXMpIDogY3VycmVudFNldHRpbmdzLnRpbWVzLFxuICAgICAgICAgICAgZGVsYXk6IGRlbGF5ICE9PSB1bmRlZmluZWQgPyBOdW1iZXIoZGVsYXkpIDogY3VycmVudFNldHRpbmdzLmRlbGF5XG4gICAgICAgICAgfTtcbiAgICAgICAgICBzZXRDdXJyZW50U2V0dGluZ3MobmV3U2V0dGluZ3MpO1xuICAgICAgICAgIHNldFNldHRpbmdzKHByZXYgPT4gKHsgLi4ucHJldiwgW3VzZXJJZF06IG5ld1NldHRpbmdzIH0pKTtcbiAgICAgICAgICB1cGRhdGVTZXR0aW5ncyhuZXdTZXR0aW5ncywgdXNlcklkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NhcHR1cmVTZXR0aW5nc1VwZGF0ZScsIGhhbmRsZVNldHRpbmdzVXBkYXRlKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NhcHR1cmVTZXR0aW5nc1VwZGF0ZScsIGhhbmRsZVNldHRpbmdzVXBkYXRlKTtcbiAgfSwgW2N1cnJlbnRVc2VySWQsIGN1cnJlbnRTZXR0aW5nc10pO1xuXG4gIC8vIFVwZGF0ZSBzZXR0aW5ncyBmb3IgYSB1c2VyICh0aW1lcywgZGVsYXksIGltYWdlLCBldGMuKVxuICBjb25zdCB1cGRhdGVTZXR0aW5ncyA9IGFzeW5jIChuZXdTZXR0aW5ncywgdXNlcklkKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ1t1cGRhdGVTZXR0aW5nc10gdXNlcklkOicsIHVzZXJJZCk7IC8vIERlYnVnIGxvZ1xuICAgIGlmICghdXNlcklkKSByZXR1cm47XG4gICAgY29uc3QgdXBkYXRlZFNldHRpbmdzID0ge1xuICAgICAgLi4uc2V0dGluZ3NbdXNlcklkXSxcbiAgICAgIC4uLm5ld1NldHRpbmdzXG4gICAgfTtcbiAgICBzZXRTZXR0aW5ncyhwcmV2ID0+ICh7IC4uLnByZXYsIFt1c2VySWRdOiB1cGRhdGVkU2V0dGluZ3MgfSkpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2RhdGEtY2VudGVyL3NldHRpbmdzLyR7dXNlcklkfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICdYLUFQSS1LZXknOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUElfS0VZIHx8ICdBMUIyQzNENC1FNUY2LTc4OTAtR0hJSi1LTE1OT1BRUlNUVVYnXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRTZXR0aW5ncylcbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvckRhdGEuZGV0YWlsIHx8ICdGYWlsZWQgdG8gc2F2ZSBzZXR0aW5ncycpO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgc2V0U2V0dGluZ3MocHJldiA9PiAoeyAuLi5wcmV2LCBbdXNlcklkXTogcmVzdWx0LmRhdGEgfHwgdXBkYXRlZFNldHRpbmdzIH0pKTtcbiAgICAgIHNldEN1cnJlbnRTZXR0aW5ncyhyZXN1bHQuZGF0YSB8fCB1cGRhdGVkU2V0dGluZ3MpO1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHNldEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgIH1cbiAgfTtcblxuICAvLyBVcGxvYWQgYW5kIHVwZGF0ZSBpbWFnZSBmb3IgYSB1c2VyXG4gIGNvbnN0IHVwZGF0ZUltYWdlID0gYXN5bmMgKHVzZXJJZCwgYmFzZTY0SW1hZ2UpID0+IHtcbiAgICBjb25zb2xlLmxvZygnW3VwZGF0ZUltYWdlXSB1c2VySWQ6JywgdXNlcklkKTsgLy8gRGVidWcgbG9nXG4gICAgaWYgKCF1c2VySWQgfHwgIWJhc2U2NEltYWdlKSByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvZGF0YS1jZW50ZXIvaW1hZ2U/dXNlcl9pZD0ke3VzZXJJZH1gLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAnWC1BUEktS2V5JzogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX0tFWSB8fCAnQTFCMkMzRDQtRTVGNi03ODkwLUdISUotS0xNTk9QUVJTVFVWJ1xuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGltYWdlOiBiYXNlNjRJbWFnZSB9KVxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yRGF0YS5kZXRhaWwgfHwgJ0ZhaWxlZCB0byB1cGxvYWQgaW1hZ2UnKTtcbiAgICAgIH1cbiAgICAgIC8vIE9wdGlvbmFsbHksIGZldGNoIHNldHRpbmdzIGFnYWluIHRvIGdldCB1cGRhdGVkIGltYWdlIGluZm9cbiAgICAgIGF3YWl0IGZldGNoU2V0dGluZ3NGb3JVc2VyKHVzZXJJZCk7XG4gICAgICBzZXRFcnJvcihudWxsKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIHsgc2V0dGluZ3MsIHVwZGF0ZVNldHRpbmdzLCB1cGRhdGVJbWFnZSwgZXJyb3IgfTtcbn07XG5cbi8vIEFkZCBkZWZhdWx0IGV4cG9ydCBjb21wb25lbnRcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFkbWluU2V0dGluZ3MoKSB7XG4gIHJldHVybiBudWxsOyAvLyBUaGlzIGlzIGEgdXRpbGl0eSBmaWxlLCBzbyB3ZSBkb24ndCBuZWVkIHRvIHJlbmRlciBhbnl0aGluZ1xufSJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUFkbWluU2V0dGluZ3MiLCJyZWYiLCJzZXR0aW5ncyIsInNldFNldHRpbmdzIiwiY3VycmVudFVzZXJJZCIsInNldEN1cnJlbnRVc2VySWQiLCJpc1RvcEJhclVwZGF0ZWQiLCJzZXRJc1RvcEJhclVwZGF0ZWQiLCJlcnJvciIsInNldEVycm9yIiwiaW5pdGlhbGl6ZWQiLCJwb2xsaW5nSW50ZXJ2YWwiLCJjdXJyZW50U2V0dGluZ3MiLCJzZXRDdXJyZW50U2V0dGluZ3MiLCJmZXRjaFNldHRpbmdzRm9yVXNlciIsInVzZXJJZCIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfS0VZIiwib2siLCJlcnJvckRhdGEiLCJqc29uIiwiY2F0Y2giLCJFcnJvciIsImRldGFpbCIsInJlc3VsdCIsIm5ld1NldHRpbmdzIiwiZGF0YSIsInByZXYiLCJjdXJyZW50Iiwic2V0Q2FwdHVyZVNldHRpbmdzIiwibWVzc2FnZSIsImZldGNoU2V0dGluZ3MiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJoYW5kbGVVc2VySWRDaGFuZ2UiLCJldmVudCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiQ3VzdG9tRXZlbnQiLCJ0eXBlIiwiZGlzcGF0Y2hFdmVudCIsInNhdmVkU2V0dGluZ3MiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2VkU2V0dGluZ3MiLCJKU09OIiwicGFyc2UiLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwidXNlclNldHRpbmdzIiwiaGFuZGxlU2V0dGluZ3NVcGRhdGUiLCJ0aW1lcyIsImRlbGF5IiwidW5kZWZpbmVkIiwiTnVtYmVyIiwidXBkYXRlU2V0dGluZ3MiLCJ1cGRhdGVkU2V0dGluZ3MiLCJtZXRob2QiLCJib2R5IiwidXBkYXRlSW1hZ2UiLCJiYXNlNjRJbWFnZSIsImltYWdlIiwiQWRtaW5TZXR0aW5ncyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(pages-dir-browser)/./pages/collected-dataset-customized/components-gui/adminSettings.js\n"));

/***/ })

});